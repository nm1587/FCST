(function(A,Rt){typeof exports=="object"&&typeof module<"u"?Rt(exports):typeof define=="function"&&define.amd?define(["exports"],Rt):(A=typeof globalThis<"u"?globalThis:A||self,Rt(A["@walletconnect/utils"]={}))})(this,function(A){"use strict";const Rt=":";function Li(e){const[t,n]=e.split(Rt);return{namespace:t,reference:n}}function Ec(e){const{namespace:t,reference:n}=e;return[t,n].join(Rt)}function ki(e){const[t,n,r]=e.split(Rt);return{namespace:t,reference:n,address:r}}function xc(e){const{namespace:t,reference:n,address:r}=e;return[t,n,r].join(Rt)}function Mi(e,t){const n=[];return e.forEach(r=>{const i=t(r);n.includes(i)||n.push(i)}),n}function vc(e){const{address:t}=ki(e);return t}function Bc(e){const{namespace:t,reference:n}=ki(e);return Ec({namespace:t,reference:n})}function y0(e,t){const{namespace:n,reference:r}=Li(t);return xc({namespace:n,reference:r,address:e})}function m0(e){return Mi(e,vc)}function Sc(e){return Mi(e,Bc)}function E0(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...i.accounts)}),n}function x0(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...Sc(i.accounts))}),n}function v0(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...Tr(r,i))}),n}function Tr(e,t){return e.includes(":")?[e]:t.chains||[]}var Ac=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},B0=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),S0=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),A0=function(){function e(t,n,r,i){this.name=t,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return e}(),D0=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),_0=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),I0=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,O0=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Dc=3,U0=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",I0]],_c=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function N0(e){return e?Ic(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new _0:typeof navigator<"u"?Ic(navigator.userAgent):R0()}function T0(e){return e!==""&&U0.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var o=i.exec(e);return!!o&&[r,o]},!1)}function Ic(e){var t=T0(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new D0;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<Dc&&(i=Ac(Ac([],i,!0),$0(Dc-i.length),!0)):i=[];var o=i.join("."),s=C0(e),c=O0.exec(e);return c&&c[1]?new A0(n,o,s,c[1]):new B0(n,o,s)}function C0(e){for(var t=0,n=_c.length;t<n;t++){var r=_c[t],i=r[0],o=r[1],s=o.exec(e);if(s)return i}return null}function R0(){var e=typeof process<"u"&&process.version;return e?new S0(process.version.slice(1)):null}function $0(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}function F0(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var fn={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var ji=function(e,t){return ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},ji(e,t)};function P0(e,t){ji(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var zi=function(){return zi=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},zi.apply(this,arguments)};function L0(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function k0(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function M0(e,t){return function(n,r){t(n,r,e)}}function j0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function z0(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(u){try{f(r.next(u))}catch(d){s(d)}}function a(u){try{f(r.throw(u))}catch(d){s(d)}}function f(u){u.done?o(u.value):i(u.value).then(c,a)}f((r=r.apply(e,t||[])).next())})}function H0(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(f){return function(u){return a([f,u])}}function a(f){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){n.label=f[1];break}if(f[0]===6&&n.label<o[1]){n.label=o[1],o=f;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(f);break}o[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(u){f=[6,u],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function q0(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function V0(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Hi(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oc(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function K0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Oc(arguments[t]));return e}function G0(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,c=o.length;s<c;s++,i++)r[i]=o[s];return r}function Gn(e){return this instanceof Gn?(this.v=e,this):new Gn(e)}function Z0(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(l){return new Promise(function(g,w){o.push([h,l,g,w])>1||c(h,l)})})}function c(h,l){try{a(r[h](l))}catch(g){d(o[0][3],g)}}function a(h){h.value instanceof Gn?Promise.resolve(h.value.v).then(f,u):d(o[0][2],h)}function f(h){c("next",h)}function u(h){c("throw",h)}function d(h,l){h(l),o.shift(),o.length&&c(o[0][0],o[0][1])}}function W0(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=e[i]?function(s){return(n=!n)?{value:Gn(e[i](s)),done:i==="return"}:o?o(s):s}:o}}function Y0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Hi=="function"?Hi(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(c,a){s=e[o](s),i(c,a,s.done,s.value)})}}function i(o,s,c,a){Promise.resolve(a).then(function(f){o({value:f,done:c})},s)}}function X0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function J0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function Q0(e){return e&&e.__esModule?e:{default:e}}function eh(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function th(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}var nh=Object.freeze({__proto__:null,__extends:P0,get __assign(){return zi},__rest:L0,__decorate:k0,__param:M0,__metadata:j0,__awaiter:z0,__generator:H0,__createBinding:q0,__exportStar:V0,__values:Hi,__read:Oc,__spread:K0,__spreadArrays:G0,__await:Gn,__asyncGenerator:Z0,__asyncDelegator:W0,__asyncValues:Y0,__makeTemplateObject:X0,__importStar:J0,__importDefault:Q0,__classPrivateFieldGet:eh,__classPrivateFieldSet:th}),Cr=F0(nh),qi={},Zn={},Uc;function rh(){if(Uc)return Zn;Uc=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return Zn.delay=e,Zn}var un={},Vi={},ln={},Nc;function ih(){return Nc||(Nc=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.ONE_THOUSAND=ln.ONE_HUNDRED=void 0,ln.ONE_HUNDRED=100,ln.ONE_THOUSAND=1e3),ln}var Ki={},Tc;function oh(){return Tc||(Tc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(Ki)),Ki}var Cc;function Rc(){return Cc||(Cc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Cr;t.__exportStar(ih(),e),t.__exportStar(oh(),e)}(Vi)),Vi}var $c;function sh(){if($c)return un;$c=1,Object.defineProperty(un,"__esModule",{value:!0}),un.fromMiliseconds=un.toMiliseconds=void 0;const e=Rc();function t(r){return r*e.ONE_THOUSAND}un.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return un.fromMiliseconds=n,un}var Fc;function ch(){return Fc||(Fc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Cr;t.__exportStar(rh(),e),t.__exportStar(sh(),e)}(qi)),qi}var Dn={},Pc;function ah(){if(Pc)return Dn;Pc=1,Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Dn.Watch=e,Dn.default=e,Dn}var Gi={},Wn={},Lc;function fh(){if(Lc)return Wn;Lc=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.IWatch=void 0;class e{}return Wn.IWatch=e,Wn}var kc;function uh(){return kc||(kc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Cr.__exportStar(fh(),e)}(Gi)),Gi}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Cr;t.__exportStar(ch(),e),t.__exportStar(ah(),e),t.__exportStar(uh(),e),t.__exportStar(Rc(),e)})(fn);var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.getLocalStorage=ce.getLocalStorageOrThrow=ce.getCrypto=ce.getCryptoOrThrow=Wi=ce.getLocation=ce.getLocationOrThrow=Zi=ce.getNavigator=ce.getNavigatorOrThrow=In=ce.getDocument=ce.getDocumentOrThrow=ce.getFromWindowOrThrow=ce.getFromWindow=void 0;function dn(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}ce.getFromWindow=dn;function _n(e){const t=dn(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}ce.getFromWindowOrThrow=_n;function lh(){return _n("document")}ce.getDocumentOrThrow=lh;function dh(){return dn("document")}var In=ce.getDocument=dh;function hh(){return _n("navigator")}ce.getNavigatorOrThrow=hh;function bh(){return dn("navigator")}var Zi=ce.getNavigator=bh;function gh(){return _n("location")}ce.getLocationOrThrow=gh;function ph(){return dn("location")}var Wi=ce.getLocation=ph;function wh(){return _n("crypto")}ce.getCryptoOrThrow=wh;function yh(){return dn("crypto")}ce.getCrypto=yh;function mh(){return _n("localStorage")}ce.getLocalStorageOrThrow=mh;function Eh(){return dn("localStorage")}ce.getLocalStorage=Eh;var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});var Mc=Yi.getWindowMetadata=void 0;const jc=ce;function xh(){let e,t;try{e=jc.getDocumentOrThrow(),t=jc.getLocationOrThrow()}catch{return null}function n(){const d=e.getElementsByTagName("link"),h=[];for(let l=0;l<d.length;l++){const g=d[l],w=g.getAttribute("rel");if(w&&w.toLowerCase().indexOf("icon")>-1){const x=g.getAttribute("href");if(x)if(x.toLowerCase().indexOf("https:")===-1&&x.toLowerCase().indexOf("http:")===-1&&x.indexOf("//")!==0){let I=t.protocol+"//"+t.host;if(x.indexOf("/")===0)I+=x;else{const $=t.pathname.split("/");$.pop();const B=$.join("/");I+=B+"/"+x}h.push(I)}else if(x.indexOf("//")===0){const I=t.protocol+x;h.push(I)}else h.push(x)}}return h}function r(...d){const h=e.getElementsByTagName("meta");for(let l=0;l<h.length;l++){const g=h[l],w=["itemprop","property","name"].map(x=>g.getAttribute(x)).filter(x=>x?d.includes(x):!1);if(w.length&&w){const x=g.getAttribute("content");if(x)return x}}return""}function i(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=e.title),d}function o(){return r("description","og:description","twitter:description","keywords")}const s=i(),c=o(),a=t.origin,f=n();return{description:c,url:a,icons:f,name:s}}Mc=Yi.getWindowMetadata=xh;var vh=Object.defineProperty,Bh=Object.defineProperties,Sh=Object.getOwnPropertyDescriptors,zc=Object.getOwnPropertySymbols,Ah=Object.prototype.hasOwnProperty,Dh=Object.prototype.propertyIsEnumerable,Xi=(e,t,n)=>t in e?vh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hc=(e,t)=>{for(var n in t||(t={}))Ah.call(t,n)&&Xi(e,n,t[n]);if(zc)for(var n of zc(t))Dh.call(t,n)&&Xi(e,n,t[n]);return e},_h=(e,t)=>Bh(e,Sh(t)),qc=(e,t,n)=>Xi(e,typeof t!="symbol"?t+"":t,n);const Vc="ReactNative",Ue={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Rr=" ",Ih=":",Kc="/",Ji=2,Oh=1e3,Gc="js";function Qi(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function $t(){return!In()&&!!Zi()&&navigator.product===Vc}function Uh(){return $t()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Nh(){return $t()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function On(){return!Qi()&&!!Zi()&&!!In()}function hn(){return $t()?Ue.reactNative:Qi()?Ue.node:On()?Ue.browser:Ue.unknown}function Th(){var e;try{return $t()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function Zc(e,t){const n=new URLSearchParams(e);return Object.entries(t).sort(([r],[i])=>r.localeCompare(i)).forEach(([r,i])=>{i!=null&&n.set(r,String(i))}),n.toString()}function Ch(e){var t,n;const r=Wc();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e?.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(i=>i!=="")),_h(Hc(Hc({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:(n=e?.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),e||r}}function Wc(){return Mc()||{name:"",description:"",url:"",icons:[""]}}function Rh(e,t){var n;const r=hn(),i={protocol:e,version:t,env:r};return r==="browser"&&(i.host=((n=Wi())==null?void 0:n.host)||"unknown"),i}function Yc(){if(hn()===Ue.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=N0();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function Xc(){var e;const t=hn();return t===Ue.browser?[t,((e=Wi())==null?void 0:e.host)||"unknown"].join(":"):t}function Jc(e,t,n){const r=Yc(),i=Xc();return[[e,t].join("-"),[Gc,n].join("-"),r,i].join("/")}function $h({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:i,projectId:o,useOnCloseEvent:s,bundleId:c,packageName:a}){const f=n.split("?"),u=Jc(e,t,r),d={auth:i,ua:u,projectId:o,useOnCloseEvent:s||void 0,packageName:a||void 0,bundleId:c||void 0},h=Zc(f[1]||"",d);return f[0]+"?"+h}function Fh(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const n=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,n].join("://")}function Ph(e,t,n){if(!e[t]||typeof e[t]!==n)throw new Error(`Missing or invalid "${t}" param`)}function Qc(e,t=Ji){return ea(e.split(Kc),t)}function Lh(e){return Qc(e).join(Rr)}function Ft(e,t){return e.filter(n=>t.includes(n)).length===e.length}function ea(e,t=Ji){return e.slice(Math.max(e.length-t,0))}function kh(e){return Object.fromEntries(e.entries())}function Mh(e){return new Map(Object.entries(e))}function jh(e,t){const n={};return Object.keys(e).forEach(r=>{n[r]=t(e[r])}),n}const zh=e=>e;function ta(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function Hh(e){return e.split(Rr).map(t=>ta(t)).join(Rr)}function qh(e=fn.FIVE_MINUTES,t){const n=fn.toMiliseconds(e||fn.FIVE_MINUTES);let r,i,o,s;return{resolve:c=>{o&&r&&(clearTimeout(o),r(c),s=Promise.resolve(c))},reject:c=>{o&&i&&(clearTimeout(o),i(c))},done:()=>new Promise((c,a)=>{if(s)return c(s);o=setTimeout(()=>{const f=new Error(t);s=Promise.reject(f),a(f)},n),r=c,i=a})}}function Vh(e,t,n){return new Promise(async(r,i)=>{const o=setTimeout(()=>i(new Error(n)),t);try{const s=await e;r(s)}catch(s){i(s)}clearTimeout(o)})}function eo(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Kh(e){return eo("topic",e)}function Gh(e){return eo("id",e)}function Zh(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function Wh(e,t){return fn.fromMiliseconds((t||Date.now())+fn.toMiliseconds(e))}function Yh(e){return Date.now()>=fn.toMiliseconds(e)}function Xh(e,t){return`${e}${t?`:${t}`:""}`}function Ze(e=[],t=[]){return[...new Set([...e,...t])]}async function Jh({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,o=i?.href;if(typeof o!="string")return;const s=na(o,e,t),c=hn();if(c===Ue.browser){if(!((r=In())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}ra(s)}else c===Ue.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(i){console.error(i)}}function na(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;if(e.startsWith("https://t.me")){const o=e.includes("?")?"&startapp=":"?startapp=";i=`${i}${o}${sa(r,!0)}`}else i=`${i}/wc?${r}`;return i}function ra(e){let t="_self";oa()?t="_top":(ia()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function Qh(e,t){let n="";try{if(On()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function to(e,t){return e.filter(n=>t.includes(n))}function e1(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function t1(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function n1(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function ia(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function oa(){try{return window.self!==window.top}catch{return!1}}function sa(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function no(e){return Buffer.from(e,"base64").toString("utf-8")}function r1(e){return new Promise(t=>setTimeout(t,e))}class i1{constructor({limit:t}){qc(this,"limit"),qc(this,"set"),this.limit=t,this.set=new Set}add(t){if(!this.set.has(t)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(t)}}has(t){return this.set.has(t)}}const $r=BigInt(2**32-1),ca=BigInt(32);function aa(e,t=!1){return t?{h:Number(e&$r),l:Number(e>>ca&$r)}:{h:Number(e>>ca&$r)|0,l:Number(e&$r)|0}}function fa(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let o=0;o<n;o++){const{h:s,l:c}=aa(e[o],t);[r[o],i[o]]=[s,c]}return[r,i]}const ua=(e,t,n)=>e>>>n,la=(e,t,n)=>e<<32-n|t>>>n,Pt=(e,t,n)=>e>>>n|t<<32-n,Lt=(e,t,n)=>e<<32-n|t>>>n,Yn=(e,t,n)=>e<<64-n|t>>>n-32,Xn=(e,t,n)=>e>>>n-32|t<<64-n,o1=(e,t)=>t,s1=(e,t)=>e,c1=(e,t,n)=>e<<n|t>>>32-n,a1=(e,t,n)=>t<<n|e>>>32-n,f1=(e,t,n)=>t<<n-32|e>>>64-n,u1=(e,t,n)=>e<<n-32|t>>>64-n;function et(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const ro=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),io=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,l1=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),d1=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,h1=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),b1=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,Un=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Fr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function st(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function tt(e,...t){if(!Fr(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Pr(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");st(e.outputLen),st(e.blockLen)}function kt(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function oo(e,t){tt(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Jn(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function We(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function so(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ct(e,t){return e<<32-t|e>>>t}const da=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function ha(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const ht=da?e=>e:e=>ha(e);function g1(e){for(let t=0;t<e.length;t++)e[t]=ha(e[t]);return e}const Mt=da?e=>e:g1,ba=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",p1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Nn(e){if(tt(e),ba)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=p1[e[n]];return t}const bt={_0:48,_9:57,A:65,F:70,a:97,f:102};function ga(e){if(e>=bt._0&&e<=bt._9)return e-bt._0;if(e>=bt.A&&e<=bt.F)return e-(bt.A-10);if(e>=bt.a&&e<=bt.f)return e-(bt.a-10)}function Lr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(ba)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=ga(e.charCodeAt(o)),c=ga(e.charCodeAt(o+1));if(s===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[i]=s*16+c}return r}function co(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function nt(e){return typeof e=="string"&&(e=co(e)),tt(e),e}function gt(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];tt(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}class kr{}function Qn(e){const t=r=>e().update(nt(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function w1(e){const t=(r,i)=>e(i).update(nt(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function pt(e=32){if(Un&&typeof Un.getRandomValues=="function")return Un.getRandomValues(new Uint8Array(e));if(Un&&typeof Un.randomBytes=="function")return Uint8Array.from(Un.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const y1=BigInt(0),er=BigInt(1),m1=BigInt(2),E1=BigInt(7),x1=BigInt(256),v1=BigInt(113),pa=[],wa=[],ya=[];for(let e=0,t=er,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],pa.push(2*(5*r+n)),wa.push((e+1)*(e+2)/2%64);let i=y1;for(let o=0;o<7;o++)t=(t<<er^(t>>E1)*v1)%x1,t&m1&&(i^=er<<(er<<BigInt(o))-er);ya.push(i)}const ma=fa(ya,!0),B1=ma[0],S1=ma[1],Ea=(e,t,n)=>n>32?f1(e,t,n):c1(e,t,n),xa=(e,t,n)=>n>32?u1(e,t,n):a1(e,t,n);function A1(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let s=0;s<10;s++)n[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){const c=(s+8)%10,a=(s+2)%10,f=n[a],u=n[a+1],d=Ea(f,u,1)^n[c],h=xa(f,u,1)^n[c+1];for(let l=0;l<50;l+=10)e[s+l]^=d,e[s+l+1]^=h}let i=e[2],o=e[3];for(let s=0;s<24;s++){const c=wa[s],a=Ea(i,o,c),f=xa(i,o,c),u=pa[s];i=e[u],o=e[u+1],e[u]=a,e[u+1]=f}for(let s=0;s<50;s+=10){for(let c=0;c<10;c++)n[c]=e[s+c];for(let c=0;c<10;c++)e[s+c]^=~n[(c+2)%10]&n[(c+4)%10]}e[0]^=B1[r],e[1]^=S1[r]}We(n)}class ao extends kr{constructor(t,n,r,i=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=o,st(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Jn(this.state)}clone(){return this._cloneInto()}keccak(){Mt(this.state32),A1(this.state32,this.rounds),Mt(this.state32),this.posOut=0,this.pos=0}update(t){kt(this),t=nt(t),tt(t);const{blockLen:n,state:r}=this,i=t.length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);for(let c=0;c<s;c++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){kt(this,!1),tt(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,o=t.length;i<o;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,o-i);t.set(n.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return st(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(oo(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,We(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new ao(n,r,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}}const D1=(e,t,n)=>Qn(()=>new ao(t,e,n)),va=D1(1,136,256/8),_1="0.1.1";function I1(){return _1}class se extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof se){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),i=n.cause instanceof se&&n.cause.docsPath||n.docsPath,s=`https://oxlib.sh${i??""}`,c=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${s}`:void 0]:[]].filter(a=>typeof a=="string").join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${I1()}`}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=i,this.shortMessage=t}walk(t){return Ba(this,t)}}function Ba(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Ba(e.cause,t):t?null:e}function O1(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}function U1(e,t,n){return e&t^~e&n}function N1(e,t,n){return e&t^e&n^t&n}class Sa extends kr{constructor(t,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=so(this.buffer)}update(t){kt(this),t=nt(t),tt(t);const{view:n,buffer:r,blockLen:i}=this,o=t.length;for(let s=0;s<o;){const c=Math.min(i-this.pos,o-s);if(c===i){const a=so(t);for(;i<=o-s;s+=i)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){kt(this),oo(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,We(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(r,0),s=0);for(let d=s;d<i;d++)n[d]=0;O1(r,i-8,BigInt(this.length*8),o),this.process(r,0);const c=so(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=a/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<f;d++)c.setUint32(4*d,u[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:c}=this;return t.destroyed=s,t.finished=o,t.length=i,t.pos=c,i%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const wt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Be=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Se=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),T1=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jt=new Uint32Array(64);class C1 extends Sa{constructor(t=32){super(64,t,8,!1),this.A=wt[0]|0,this.B=wt[1]|0,this.C=wt[2]|0,this.D=wt[3]|0,this.E=wt[4]|0,this.F=wt[5]|0,this.G=wt[6]|0,this.H=wt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:o,F:s,G:c,H:a}=this;return[t,n,r,i,o,s,c,a]}set(t,n,r,i,o,s,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,n){for(let d=0;d<16;d++,n+=4)jt[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const h=jt[d-15],l=jt[d-2],g=ct(h,7)^ct(h,18)^h>>>3,w=ct(l,17)^ct(l,19)^l>>>10;jt[d]=w+jt[d-7]+g+jt[d-16]|0}let{A:r,B:i,C:o,D:s,E:c,F:a,G:f,H:u}=this;for(let d=0;d<64;d++){const h=ct(c,6)^ct(c,11)^ct(c,25),l=u+h+U1(c,a,f)+T1[d]+jt[d]|0,w=(ct(r,2)^ct(r,13)^ct(r,22))+N1(r,i,o)|0;u=f,f=a,a=c,c=s+l|0,s=o,o=i,i=r,r=l+w|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(r,i,o,s,c,a,f,u)}roundClean(){We(jt)}destroy(){this.set(0,0,0,0,0,0,0,0),We(this.buffer)}}const Aa=fa(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),R1=Aa[0],$1=Aa[1],zt=new Uint32Array(80),Ht=new Uint32Array(80);class fo extends Sa{constructor(t=64){super(128,t,16,!1),this.Ah=Se[0]|0,this.Al=Se[1]|0,this.Bh=Se[2]|0,this.Bl=Se[3]|0,this.Ch=Se[4]|0,this.Cl=Se[5]|0,this.Dh=Se[6]|0,this.Dl=Se[7]|0,this.Eh=Se[8]|0,this.El=Se[9]|0,this.Fh=Se[10]|0,this.Fl=Se[11]|0,this.Gh=Se[12]|0,this.Gl=Se[13]|0,this.Hh=Se[14]|0,this.Hl=Se[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:c,Dl:a,Eh:f,El:u,Fh:d,Fl:h,Gh:l,Gl:g,Hh:w,Hl:x}=this;return[t,n,r,i,o,s,c,a,f,u,d,h,l,g,w,x]}set(t,n,r,i,o,s,c,a,f,u,d,h,l,g,w,x){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=c|0,this.Dl=a|0,this.Eh=f|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=l|0,this.Gl=g|0,this.Hh=w|0,this.Hl=x|0}process(t,n){for(let B=0;B<16;B++,n+=4)zt[B]=t.getUint32(n),Ht[B]=t.getUint32(n+=4);for(let B=16;B<80;B++){const E=zt[B-15]|0,U=Ht[B-15]|0,T=Pt(E,U,1)^Pt(E,U,8)^ua(E,U,7),P=Lt(E,U,1)^Lt(E,U,8)^la(E,U,7),L=zt[B-2]|0,R=Ht[B-2]|0,q=Pt(L,R,19)^Yn(L,R,61)^ua(L,R,6),z=Lt(L,R,19)^Xn(L,R,61)^la(L,R,6),m=l1(P,z,Ht[B-7],Ht[B-16]),b=d1(m,T,q,zt[B-7],zt[B-16]);zt[B]=b|0,Ht[B]=m|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:c,Cl:a,Dh:f,Dl:u,Eh:d,El:h,Fh:l,Fl:g,Gh:w,Gl:x,Hh:I,Hl:$}=this;for(let B=0;B<80;B++){const E=Pt(d,h,14)^Pt(d,h,18)^Yn(d,h,41),U=Lt(d,h,14)^Lt(d,h,18)^Xn(d,h,41),T=d&l^~d&w,P=h&g^~h&x,L=h1($,U,P,$1[B],Ht[B]),R=b1(L,I,E,T,R1[B],zt[B]),q=L|0,z=Pt(r,i,28)^Yn(r,i,34)^Yn(r,i,39),m=Lt(r,i,28)^Xn(r,i,34)^Xn(r,i,39),b=r&o^r&c^o&c,v=i&s^i&a^s&a;I=w|0,$=x|0,w=l|0,x=g|0,l=d|0,g=h|0,{h:d,l:h}=et(f|0,u|0,R|0,q|0),f=c|0,u=a|0,c=o|0,a=s|0,o=r|0,s=i|0;const p=ro(q,m,v);r=io(p,R,z,b),i=p|0}({h:r,l:i}=et(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=et(this.Bh|0,this.Bl|0,o|0,s|0),{h:c,l:a}=et(this.Ch|0,this.Cl|0,c|0,a|0),{h:f,l:u}=et(this.Dh|0,this.Dl|0,f|0,u|0),{h:d,l:h}=et(this.Eh|0,this.El|0,d|0,h|0),{h:l,l:g}=et(this.Fh|0,this.Fl|0,l|0,g|0),{h:w,l:x}=et(this.Gh|0,this.Gl|0,w|0,x|0),{h:I,l:$}=et(this.Hh|0,this.Hl|0,I|0,$|0),this.set(r,i,o,s,c,a,f,u,d,h,l,g,w,x,I,$)}roundClean(){We(zt,Ht)}destroy(){We(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class F1 extends fo{constructor(){super(48),this.Ah=Be[0]|0,this.Al=Be[1]|0,this.Bh=Be[2]|0,this.Bl=Be[3]|0,this.Ch=Be[4]|0,this.Cl=Be[5]|0,this.Dh=Be[6]|0,this.Dl=Be[7]|0,this.Eh=Be[8]|0,this.El=Be[9]|0,this.Fh=Be[10]|0,this.Fl=Be[11]|0,this.Gh=Be[12]|0,this.Gl=Be[13]|0,this.Hh=Be[14]|0,this.Hl=Be[15]|0}}const Ae=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class P1 extends fo{constructor(){super(32),this.Ah=Ae[0]|0,this.Al=Ae[1]|0,this.Bh=Ae[2]|0,this.Bl=Ae[3]|0,this.Ch=Ae[4]|0,this.Cl=Ae[5]|0,this.Dh=Ae[6]|0,this.Dl=Ae[7]|0,this.Eh=Ae[8]|0,this.El=Ae[9]|0,this.Fh=Ae[10]|0,this.Fl=Ae[11]|0,this.Gh=Ae[12]|0,this.Gl=Ae[13]|0,this.Hh=Ae[14]|0,this.Hl=Ae[15]|0}}const at=Qn(()=>new C1),Da=Qn(()=>new fo),_a=Qn(()=>new F1),L1=Qn(()=>new P1),Mr=at;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uo=BigInt(0),jr=BigInt(1);function tr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function qt(e){if(!tr(e))throw new Error("Uint8Array expected")}function nr(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function zr(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Ia(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?uo:BigInt("0x"+e)}const Oa=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",k1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function bn(e){if(qt(e),Oa)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=k1[e[n]];return t}const yt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ua(e){if(e>=yt._0&&e<=yt._9)return e-yt._0;if(e>=yt.A&&e<=yt.F)return e-(yt.A-10);if(e>=yt.a&&e<=yt.f)return e-(yt.a-10)}function Hr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Oa)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=Ua(e.charCodeAt(o)),c=Ua(e.charCodeAt(o+1));if(s===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[i]=s*16+c}return r}function Ne(e){return Ia(bn(e))}function Na(e){return qt(e),Ia(bn(Uint8Array.from(e).reverse()))}function he(e,t){return Hr(e.toString(16).padStart(t*2,"0"))}function Ta(e,t){return he(e,t).reverse()}function De(e,t,n){let r;if(typeof t=="string")try{r=Hr(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(tr(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function le(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];qt(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}function lo(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const ho=e=>typeof e=="bigint"&&uo<=e;function bo(e,t,n){return ho(e)&&ho(t)&&ho(n)&&t<=e&&e<n}function Tn(e,t,n,r){if(!bo(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function rr(e){let t;for(t=0;e>uo;e>>=jr,t+=1);return t}function M1(e,t){return e>>BigInt(t)&jr}const gn=e=>(jr<<BigInt(e))-jr,go=e=>new Uint8Array(e),Ca=e=>Uint8Array.from(e);function j1(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=go(e),i=go(e),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},c=(...d)=>n(i,r,...d),a=(d=go(0))=>{i=c(Ca([0]),d),r=c(),d.length!==0&&(i=c(Ca([1]),d),r=c())},f=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<t;){r=c();const l=r.slice();h.push(l),d+=r.length}return le(...h)};return(d,h)=>{s(),a(d);let l;for(;!(l=h(f()));)a();return s(),l}}const z1={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||tr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ir(e,t,n={}){const r=(i,o,s)=>{const c=z1[o];if(typeof c!="function")throw new Error("invalid validator function");const a=e[i];if(!(s&&a===void 0)&&!c(a,e))throw new Error("param "+String(i)+" is invalid. Expected "+o+", got "+a)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}const Ra=()=>{throw new Error("not implemented")};function po(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const o=e(n,...r);return t.set(n,o),o}}function H1(e,t){if(Ma(e)>t)throw new lb({givenSize:Ma(e),maxSize:t})}const mt={zero:48,nine:57,A:65,F:70,a:97,f:102};function $a(e){if(e>=mt.zero&&e<=mt.nine)return e-mt.zero;if(e>=mt.A&&e<=mt.F)return e-(mt.A-10);if(e>=mt.a&&e<=mt.f)return e-(mt.a-10)}function q1(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new db({size:e.length,targetSize:r,type:"Bytes"});const i=new Uint8Array(r);for(let o=0;o<r;o++){const s=n==="right";i[s?o:r-o-1]=e[s?o:e.length-o-1]}return i}function wo(e,t){if(xt(e)>t)throw new tb({givenSize:xt(e),maxSize:t})}function V1(e,t){if(typeof t=="number"&&t>0&&t>xt(e)-1)throw new ka({offset:t,position:"start",size:xt(e)})}function K1(e,t,n){if(typeof t=="number"&&typeof n=="number"&&xt(e)!==n-t)throw new ka({offset:n,position:"end",size:xt(e)})}function Fa(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const i=e.replace("0x","");if(i.length>r*2)throw new nb({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const G1="#__bigint";function yo(e,t,n){return JSON.stringify(e,(r,i)=>typeof t=="function"?t(r,i):typeof i=="bigint"?i.toString()+G1:i,n)}const Z1=new TextEncoder,W1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Y1(e,t={}){const{strict:n=!1}=t;if(!e)throw new Pa(e);if(typeof e!="string")throw new Pa(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new La(e);if(!e.startsWith("0x"))throw new La(e)}function mo(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Eo(e){return e instanceof Uint8Array?or(e):Array.isArray(e)?or(new Uint8Array(e)):e}function X1(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(wo(n,t.size),Vr(n,t.size)):n}function or(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=W1[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(wo(r,t.size),xo(r,t.size)):r}function qr(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof o=="bigint"&&n?-o-1n:0;if(o&&i>o||i<s){const f=typeof e=="bigint"?"n":"";throw new eb({max:o?`${o}${f}`:void 0,min:`${s}${f}`,signed:n,size:r,value:`${e}${f}`})}const a=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?Vr(a,r):a}function J1(e,t={}){return or(Z1.encode(e),t)}function Vr(e,t){return Fa(e,{dir:"left",size:t})}function xo(e,t){return Fa(e,{dir:"right",size:t})}function Et(e,t,n,r={}){const{strict:i}=r;V1(e,t);const o=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return i&&K1(o,t,n),o}function xt(e){return Math.ceil((e.length-2)/2)}function Q1(e,t={}){const{strict:n=!1}=t;try{return Y1(e,{strict:n}),!0}catch{return!1}}class eb extends se{constructor({max:t,min:n,signed:r,size:i,value:o}){super(`Number \`${o}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class Pa extends se{constructor(t){super(`Value \`${typeof t=="object"?yo(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class La extends se{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class tb extends se{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class ka extends se{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class nb extends se{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}const rb=new TextEncoder;function ib(e){if(!(e instanceof Uint8Array)){if(!e)throw new Kr(e);if(typeof e!="object")throw new Kr(e);if(!("BYTES_PER_ELEMENT"in e))throw new Kr(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new Kr(e)}}function ob(e){return e instanceof Uint8Array?e:typeof e=="string"?cb(e):sb(e)}function sb(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function cb(e,t={}){const{size:n}=t;let r=e;n&&(wo(e,n),r=xo(e,n));let i=r.slice(2);i.length%2&&(i=`0${i}`);const o=i.length/2,s=new Uint8Array(o);for(let c=0,a=0;c<o;c++){const f=$a(i.charCodeAt(a++)),u=$a(i.charCodeAt(a++));if(f===void 0||u===void 0)throw new se(`Invalid byte sequence ("${i[a-2]}${i[a-1]}" in "${i}").`);s[c]=f*16+u}return s}function ab(e,t={}){const{size:n}=t,r=rb.encode(e);return typeof n=="number"?(H1(r,n),fb(r,n)):r}function fb(e,t){return q1(e,{dir:"right",size:t})}function Ma(e){return e.length}function ub(e){try{return ib(e),!0}catch{return!1}}class Kr extends se{constructor(t){super(`Value \`${typeof t=="object"?yo(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class lb extends se{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class db extends se{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function ja(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=va(ob(e));return n==="Bytes"?r:or(r)}class hb extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const vo={checksum:new hb(8192)}.checksum;function za(e,t={}){const{compressed:n}=t,{prefix:r,x:i,y:o}=e;if(n===!1||typeof i=="bigint"&&typeof o=="bigint"){if(r!==4)throw new qa({prefix:r,cause:new mb});return}if(n===!0||typeof i=="bigint"&&typeof o>"u"){if(r!==3&&r!==2)throw new qa({prefix:r,cause:new yb});return}throw new wb({publicKey:e})}function bb(e){const t=(()=>{if(Q1(e))return Ha(e);if(ub(e))return gb(e);const{prefix:n,x:r,y:i}=e;return typeof r=="bigint"&&typeof i=="bigint"?{prefix:n??4,x:r,y:i}:{prefix:n,x:r}})();return za(t),t}function gb(e){return Ha(or(e))}function Ha(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new Eb({publicKey:e});if(e.length===130){const r=BigInt(Et(e,0,32)),i=BigInt(Et(e,32,64));return{prefix:4,x:r,y:i}}if(e.length===132){const r=Number(Et(e,0,1)),i=BigInt(Et(e,1,33)),o=BigInt(Et(e,33,65));return{prefix:r,x:i,y:o}}const t=Number(Et(e,0,1)),n=BigInt(Et(e,1,33));return{prefix:t,x:n}}function pb(e,t={}){za(e);const{prefix:n,x:r,y:i}=e,{includePrefix:o=!0}=t;return mo(o?qr(n,{size:1}):"0x",qr(r,{size:32}),typeof i=="bigint"?qr(i,{size:32}):"0x")}class wb extends se{constructor({publicKey:t}){super(`Value \`${yo(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class qa extends se{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class yb extends se{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class mb extends se{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class Eb extends se{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${xt(Eo(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}const xb=/^0x[a-fA-F0-9]{40}$/;function Bo(e,t={}){const{strict:n=!0}=t;if(!xb.test(e))throw new Ka({address:e,cause:new Sb});if(n){if(e.toLowerCase()===e)return;if(Va(e)!==e)throw new Ka({address:e,cause:new Ab})}}function Va(e){if(vo.has(e))return vo.get(e);Bo(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=ja(ab(t),{as:"Bytes"}),r=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const i=`0x${r.join("")}`;return vo.set(e,i),i}function vb(e,t={}){const{checksum:n=!1}=t;return Bo(e),n?Va(e):e}function Bb(e,t={}){const n=ja(`0x${pb(e).slice(4)}`).substring(26);return vb(`0x${n}`,t)}class Ka extends se{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Sb extends se{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Ab extends se{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const Db=/^(.*)\[([0-9]*)\]$/,_b=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ib=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function So(e,t){if(e.length!==t.length)throw new Ub({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=t[r];n.push(So.encode(i,o))}return mo(...n)}(function(e){function t(n,r,i=!1){if(n==="address"){const a=r;return Bo(a),Vr(a.toLowerCase(),i?32:0)}if(n==="string")return J1(r);if(n==="bytes")return r;if(n==="bool")return Vr(X1(r),i?32:1);const o=n.match(Ib);if(o){const[a,f,u="256"]=o,d=Number.parseInt(u,10)/8;return qr(r,{size:i?32:d,signed:f==="int"})}const s=n.match(_b);if(s){const[a,f]=s;if(Number.parseInt(f,10)!==(r.length-2)/2)throw new Ob({expectedSize:Number.parseInt(f,10),value:r});return xo(r,i?32:0)}const c=n.match(Db);if(c&&Array.isArray(r)){const[a,f]=c,u=[];for(let d=0;d<r.length;d++)u.push(t(f,r[d],!0));return u.length===0?"0x":mo(...u)}throw new Nb(n)}e.encode=t})(So||(So={}));class Ob extends se{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${xt(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Ub extends se{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Nb extends se{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class Ga extends kr{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Pr(t);const r=nt(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?t.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),We(o)}update(t){return kt(this),this.iHash.update(t),this}digestInto(t){kt(this),tt(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:c}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const sr=(e,t,n)=>new Ga(e,t).update(n).digest();sr.create=(e,t)=>new Ga(e,t);const Pe=BigInt(0),Te=BigInt(1),pn=BigInt(2),Tb=BigInt(3),Za=BigInt(4),Wa=BigInt(5),Ya=BigInt(8);function Ce(e,t){const n=e%t;return n>=Pe?n:t+n}function Ye(e,t,n){let r=e;for(;t-- >Pe;)r*=r,r%=n;return r}function Ao(e,t){if(e===Pe)throw new Error("invert: expected non-zero number");if(t<=Pe)throw new Error("invert: expected positive modulus, got "+t);let n=Ce(e,t),r=t,i=Pe,o=Te;for(;n!==Pe;){const c=r/n,a=r%n,f=i-o*c;r=n,n=a,i=o,o=f}if(r!==Te)throw new Error("invert: does not exist");return Ce(i,t)}function Xa(e,t){const n=(e.ORDER+Te)/Za,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function Cb(e,t){const n=(e.ORDER-Wa)/Ya,r=e.mul(t,pn),i=e.pow(r,n),o=e.mul(t,i),s=e.mul(e.mul(o,pn),i),c=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(c),t))throw new Error("Cannot find square root");return c}function Rb(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-Te,n=0;for(;t%pn===Pe;)t/=pn,n++;let r=pn;const i=Vt(e);for(;Zr(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Xa;let o=i.pow(r,t);const s=(t+Te)/pn;return function(a,f){if(a.is0(f))return f;if(Zr(a,f)!==1)throw new Error("Cannot find square root");let u=n,d=a.mul(a.ONE,o),h=a.pow(f,t),l=a.pow(f,s);for(;!a.eql(h,a.ONE);){if(a.is0(h))return a.ZERO;let g=1,w=a.sqr(h);for(;!a.eql(w,a.ONE);)if(g++,w=a.sqr(w),g===u)throw new Error("Cannot find square root");const x=Te<<BigInt(u-g-1),I=a.pow(d,x);u=g,d=a.sqr(I),h=a.mul(h,d),l=a.mul(l,I)}return l}}function $b(e){return e%Za===Tb?Xa:e%Ya===Wa?Cb:Rb(e)}const Fb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ja(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Fb.reduce((r,i)=>(r[i]="function",r),t);return ir(e,n)}function Gr(e,t,n){if(n<Pe)throw new Error("invalid exponent, negatives unsupported");if(n===Pe)return e.ONE;if(n===Te)return t;let r=e.ONE,i=t;for(;n>Pe;)n&Te&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Te;return r}function wn(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((s,c,a)=>e.is0(c)?s:(r[a]=s,e.mul(s,c)),e.ONE),o=e.inv(i);return t.reduceRight((s,c,a)=>e.is0(c)?s:(r[a]=e.mul(s,r[a]),e.mul(s,c)),o),r}function Zr(e,t){const n=(e.ORDER-Te)/pn,r=e.pow(t,n),i=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),s=e.eql(r,e.neg(e.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function Qa(e,t){t!==void 0&&st(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Vt(e,t,n=!1,r={}){if(e<=Pe)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:o}=Qa(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const c=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:o,MASK:gn(i),ZERO:Pe,ONE:Te,create:a=>Ce(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return Pe<=a&&a<e},is0:a=>a===Pe,isOdd:a=>(a&Te)===Te,neg:a=>Ce(-a,e),eql:(a,f)=>a===f,sqr:a=>Ce(a*a,e),add:(a,f)=>Ce(a+f,e),sub:(a,f)=>Ce(a-f,e),mul:(a,f)=>Ce(a*f,e),pow:(a,f)=>Gr(c,a,f),div:(a,f)=>Ce(a*Ao(f,e),e),sqrN:a=>a*a,addN:(a,f)=>a+f,subN:(a,f)=>a-f,mulN:(a,f)=>a*f,inv:a=>Ao(a,e),sqrt:r.sqrt||(a=>(s||(s=$b(e)),s(c,a))),toBytes:a=>n?Ta(a,o):he(a,o),fromBytes:a=>{if(a.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+a.length);return n?Na(a):Ne(a)},invertBatch:a=>wn(c,a),cmov:(a,f,u)=>u?f:a});return Object.freeze(c)}function ef(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Do(e){const t=ef(e);return t+Math.ceil(t/2)}function tf(e,t,n=!1){const r=e.length,i=ef(t),o=Do(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const s=n?Na(e):Ne(e),c=Ce(s,t-Te)+Te;return n?Ta(c,i):he(c,i)}const nf=BigInt(0),_o=BigInt(1);function Io(e,t){const n=t.negate();return e?n:t}function rf(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Oo(e,t){rf(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,o=gn(e),s=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:i,shiftBy:s}}function of(e,t,n){const{windowSize:r,mask:i,maxNumber:o,shiftBy:s}=n;let c=Number(e&i),a=e>>s;c>r&&(c-=o,a+=_o);const f=t*r,u=f+Math.abs(c)-1,d=c===0,h=c<0,l=t%2!==0;return{nextN:a,offset:u,isZero:d,isNeg:h,isNegF:l,offsetF:f}}function Pb(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Lb(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Uo=new WeakMap,sf=new WeakMap;function No(e){return sf.get(e)||1}function kb(e,t){return{constTimeNegate:Io,hasPrecomputes(n){return No(n)!==1},unsafeLadder(n,r,i=e.ZERO){let o=n;for(;r>nf;)r&_o&&(i=i.add(o)),o=o.double(),r>>=_o;return i},precomputeWindow(n,r){const{windows:i,windowSize:o}=Oo(r,t),s=[];let c=n,a=c;for(let f=0;f<i;f++){a=c,s.push(a);for(let u=1;u<o;u++)a=a.add(c),s.push(a);c=a.double()}return s},wNAF(n,r,i){let o=e.ZERO,s=e.BASE;const c=Oo(n,t);for(let a=0;a<c.windows;a++){const{nextN:f,offset:u,isZero:d,isNeg:h,isNegF:l,offsetF:g}=of(i,a,c);i=f,d?s=s.add(Io(l,r[g])):o=o.add(Io(h,r[u]))}return{p:o,f:s}},wNAFUnsafe(n,r,i,o=e.ZERO){const s=Oo(n,t);for(let c=0;c<s.windows&&i!==nf;c++){const{nextN:a,offset:f,isZero:u,isNeg:d}=of(i,c,s);if(i=a,!u){const h=r[f];o=o.add(d?h.negate():h)}}return o},getPrecomputes(n,r,i){let o=Uo.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&Uo.set(r,i(o))),o},wNAFCached(n,r,i){const o=No(n);return this.wNAF(o,this.getPrecomputes(o,n,i),r)},wNAFCachedUnsafe(n,r,i,o){const s=No(n);return s===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(s,this.getPrecomputes(s,n,i),r,o)},setWindowSize(n,r){rf(r,t),sf.set(n,r),Uo.delete(n)}}}function Mb(e,t,n,r){Pb(n,e),Lb(r,t);const i=n.length,o=r.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,c=rr(BigInt(i));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const f=gn(a),u=new Array(Number(f)+1).fill(s),d=Math.floor((t.BITS-1)/a)*a;let h=s;for(let l=d;l>=0;l-=a){u.fill(s);for(let w=0;w<o;w++){const x=r[w],I=Number(x>>BigInt(l)&f);u[I]=u[I].add(n[w])}let g=s;for(let w=u.length-1,x=s;w>0;w--)x=x.add(u[w]),g=g.add(x);if(h=h.add(g),l!==0)for(let w=0;w<a;w++)h=h.double()}return h}function cf(e){return Ja(e.Fp),ir(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Qa(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function af(e){e.lowS!==void 0&&nr("lowS",e.lowS),e.prehash!==void 0&&nr("prehash",e.prehash)}function jb(e){const t=cf(e);ir(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class zb extends Error{constructor(t=""){super(t)}}const vt={Err:zb,_tlv:{encode:(e,t)=>{const{Err:n}=vt;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=zr(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?zr(i.length/2|128):"";return zr(e)+o+i+t},decode(e,t){const{Err:n}=vt;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],o=!!(i&128);let s=0;if(!o)s=i;else{const a=i&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const f=t.subarray(r,r+a);if(f.length!==a)throw new n("tlv.decode: length bytes not complete");if(f[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of f)s=s<<8|u;if(r+=a,s<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+s);if(c.length!==s)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=vt;if(e<rt)throw new t("integer: negative integers are not allowed");let n=zr(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=vt;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Ne(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=vt,i=De("signature",e),{v:o,l:s}=r.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,o),{v:f,l:u}=r.decode(2,a);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(f)}},hexFromSig(e){const{_tlv:t,_int:n}=vt,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),o=r+i;return t.encode(48,o)}};function To(e,t){return bn(he(e,t))}const rt=BigInt(0),oe=BigInt(1),Kt=BigInt(2),cr=BigInt(3),Co=BigInt(4);function Ro(e){const t=jb(e),{Fp:n}=t,r=Vt(t.n,t.nBitLength),i=t.toBytes||((B,E,U)=>{const T=E.toAffine();return le(Uint8Array.from([4]),n.toBytes(T.x),n.toBytes(T.y))}),o=t.fromBytes||(B=>{const E=B.subarray(1),U=n.fromBytes(E.subarray(0,n.BYTES)),T=n.fromBytes(E.subarray(n.BYTES,2*n.BYTES));return{x:U,y:T}});function s(B){const{a:E,b:U}=t,T=n.sqr(B),P=n.mul(T,B);return n.add(n.add(P,n.mul(B,E)),U)}function c(B,E){const U=n.sqr(E),T=s(B);return n.eql(U,T)}if(!c(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const a=n.mul(n.pow(t.a,cr),Co),f=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(a,f)))throw new Error("bad curve params: a or b");function u(B){return bo(B,oe,t.n)}function d(B){const{allowedPrivateKeyLengths:E,nByteLength:U,wrapPrivateKey:T,n:P}=t;if(E&&typeof B!="bigint"){if(tr(B)&&(B=bn(B)),typeof B!="string"||!E.includes(B.length))throw new Error("invalid private key");B=B.padStart(U*2,"0")}let L;try{L=typeof B=="bigint"?B:Ne(De("private key",B,U))}catch{throw new Error("invalid private key, expected hex or "+U+" bytes, got "+typeof B)}return T&&(L=Ce(L,P)),Tn("private key",L,oe,P),L}function h(B){if(!(B instanceof w))throw new Error("ProjectivePoint expected")}const l=po((B,E)=>{const{px:U,py:T,pz:P}=B;if(n.eql(P,n.ONE))return{x:U,y:T};const L=B.is0();E==null&&(E=L?n.ONE:n.inv(P));const R=n.mul(U,E),q=n.mul(T,E),z=n.mul(P,E);if(L)return{x:n.ZERO,y:n.ZERO};if(!n.eql(z,n.ONE))throw new Error("invZ was invalid");return{x:R,y:q}}),g=po(B=>{if(B.is0()){if(t.allowInfinityPoint&&!n.is0(B.py))return;throw new Error("bad point: ZERO")}const{x:E,y:U}=B.toAffine();if(!n.isValid(E)||!n.isValid(U))throw new Error("bad point: x or y not FE");if(!c(E,U))throw new Error("bad point: equation left != right");if(!B.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class w{constructor(E,U,T){if(E==null||!n.isValid(E))throw new Error("x required");if(U==null||!n.isValid(U)||n.is0(U))throw new Error("y required");if(T==null||!n.isValid(T))throw new Error("z required");this.px=E,this.py=U,this.pz=T,Object.freeze(this)}static fromAffine(E){const{x:U,y:T}=E||{};if(!E||!n.isValid(U)||!n.isValid(T))throw new Error("invalid affine point");if(E instanceof w)throw new Error("projective point not allowed");const P=L=>n.eql(L,n.ZERO);return P(U)&&P(T)?w.ZERO:new w(U,T,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){const U=wn(n,E.map(T=>T.pz));return E.map((T,P)=>T.toAffine(U[P])).map(w.fromAffine)}static fromHex(E){const U=w.fromAffine(o(De("pointHex",E)));return U.assertValidity(),U}static fromPrivateKey(E){return w.BASE.multiply(d(E))}static msm(E,U){return Mb(w,r,E,U)}_setWindowSize(E){$.setWindowSize(this,E)}assertValidity(){g(this)}hasEvenY(){const{y:E}=this.toAffine();if(n.isOdd)return!n.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){h(E);const{px:U,py:T,pz:P}=this,{px:L,py:R,pz:q}=E,z=n.eql(n.mul(U,q),n.mul(L,P)),m=n.eql(n.mul(T,q),n.mul(R,P));return z&&m}negate(){return new w(this.px,n.neg(this.py),this.pz)}double(){const{a:E,b:U}=t,T=n.mul(U,cr),{px:P,py:L,pz:R}=this;let q=n.ZERO,z=n.ZERO,m=n.ZERO,b=n.mul(P,P),v=n.mul(L,L),p=n.mul(R,R),y=n.mul(P,L);return y=n.add(y,y),m=n.mul(P,R),m=n.add(m,m),q=n.mul(E,m),z=n.mul(T,p),z=n.add(q,z),q=n.sub(v,z),z=n.add(v,z),z=n.mul(q,z),q=n.mul(y,q),m=n.mul(T,m),p=n.mul(E,p),y=n.sub(b,p),y=n.mul(E,y),y=n.add(y,m),m=n.add(b,b),b=n.add(m,b),b=n.add(b,p),b=n.mul(b,y),z=n.add(z,b),p=n.mul(L,R),p=n.add(p,p),b=n.mul(p,y),q=n.sub(q,b),m=n.mul(p,v),m=n.add(m,m),m=n.add(m,m),new w(q,z,m)}add(E){h(E);const{px:U,py:T,pz:P}=this,{px:L,py:R,pz:q}=E;let z=n.ZERO,m=n.ZERO,b=n.ZERO;const v=t.a,p=n.mul(t.b,cr);let y=n.mul(U,L),S=n.mul(T,R),D=n.mul(P,q),_=n.add(U,T),O=n.add(L,R);_=n.mul(_,O),O=n.add(y,S),_=n.sub(_,O),O=n.add(U,P);let C=n.add(L,q);return O=n.mul(O,C),C=n.add(y,D),O=n.sub(O,C),C=n.add(T,P),z=n.add(R,q),C=n.mul(C,z),z=n.add(S,D),C=n.sub(C,z),b=n.mul(v,O),z=n.mul(p,D),b=n.add(z,b),z=n.sub(S,b),b=n.add(S,b),m=n.mul(z,b),S=n.add(y,y),S=n.add(S,y),D=n.mul(v,D),O=n.mul(p,O),S=n.add(S,D),D=n.sub(y,D),D=n.mul(v,D),O=n.add(O,D),y=n.mul(S,O),m=n.add(m,y),y=n.mul(C,O),z=n.mul(_,z),z=n.sub(z,y),y=n.mul(_,S),b=n.mul(C,b),b=n.add(b,y),new w(z,m,b)}subtract(E){return this.add(E.negate())}is0(){return this.equals(w.ZERO)}wNAF(E){return $.wNAFCached(this,E,w.normalizeZ)}multiplyUnsafe(E){const{endo:U,n:T}=t;Tn("scalar",E,rt,T);const P=w.ZERO;if(E===rt)return P;if(this.is0()||E===oe)return this;if(!U||$.hasPrecomputes(this))return $.wNAFCachedUnsafe(this,E,w.normalizeZ);let{k1neg:L,k1:R,k2neg:q,k2:z}=U.splitScalar(E),m=P,b=P,v=this;for(;R>rt||z>rt;)R&oe&&(m=m.add(v)),z&oe&&(b=b.add(v)),v=v.double(),R>>=oe,z>>=oe;return L&&(m=m.negate()),q&&(b=b.negate()),b=new w(n.mul(b.px,U.beta),b.py,b.pz),m.add(b)}multiply(E){const{endo:U,n:T}=t;Tn("scalar",E,oe,T);let P,L;if(U){const{k1neg:R,k1:q,k2neg:z,k2:m}=U.splitScalar(E);let{p:b,f:v}=this.wNAF(q),{p,f:y}=this.wNAF(m);b=$.constTimeNegate(R,b),p=$.constTimeNegate(z,p),p=new w(n.mul(p.px,U.beta),p.py,p.pz),P=b.add(p),L=v.add(y)}else{const{p:R,f:q}=this.wNAF(E);P=R,L=q}return w.normalizeZ([P,L])[0]}multiplyAndAddUnsafe(E,U,T){const P=w.BASE,L=(q,z)=>z===rt||z===oe||!q.equals(P)?q.multiplyUnsafe(z):q.multiply(z),R=L(this,U).add(L(E,T));return R.is0()?void 0:R}toAffine(E){return l(this,E)}isTorsionFree(){const{h:E,isTorsionFree:U}=t;if(E===oe)return!0;if(U)return U(w,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:E,clearCofactor:U}=t;return E===oe?this:U?U(w,this):this.multiplyUnsafe(t.h)}toRawBytes(E=!0){return nr("isCompressed",E),this.assertValidity(),i(w,this,E)}toHex(E=!0){return nr("isCompressed",E),bn(this.toRawBytes(E))}}w.BASE=new w(t.Gx,t.Gy,n.ONE),w.ZERO=new w(n.ZERO,n.ONE,n.ZERO);const{endo:x,nBitLength:I}=t,$=kb(w,x?Math.ceil(I/2):I);return{CURVE:t,ProjectivePoint:w,normPrivateKeyToScalar:d,weierstrassEquation:s,isWithinCurveOrder:u}}function Hb(e){const t=cf(e);return ir(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function qb(e){const t=Hb(e),{Fp:n,n:r,nByteLength:i,nBitLength:o}=t,s=n.BYTES+1,c=2*n.BYTES+1;function a(p){return Ce(p,r)}function f(p){return Ao(p,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:l}=Ro({...t,toBytes(p,y,S){const D=y.toAffine(),_=n.toBytes(D.x),O=le;return nr("isCompressed",S),S?O(Uint8Array.from([y.hasEvenY()?2:3]),_):O(Uint8Array.from([4]),_,n.toBytes(D.y))},fromBytes(p){const y=p.length,S=p[0],D=p.subarray(1);if(y===s&&(S===2||S===3)){const _=Ne(D);if(!bo(_,oe,n.ORDER))throw new Error("Point is not on curve");const O=h(_);let C;try{C=n.sqrt(O)}catch(k){const F=k instanceof Error?": "+k.message:"";throw new Error("Point is not on curve"+F)}const M=(C&oe)===oe;return(S&1)===1!==M&&(C=n.neg(C)),{x:_,y:C}}else if(y===c&&S===4){const _=n.fromBytes(D.subarray(0,n.BYTES)),O=n.fromBytes(D.subarray(n.BYTES,2*n.BYTES));return{x:_,y:O}}else{const _=s,O=c;throw new Error("invalid Point, expected length of "+_+", or uncompressed "+O+", got "+y)}}});function g(p){const y=r>>oe;return p>y}function w(p){return g(p)?a(-p):p}const x=(p,y,S)=>Ne(p.slice(y,S));class I{constructor(y,S,D){Tn("r",y,oe,r),Tn("s",S,oe,r),this.r=y,this.s=S,D!=null&&(this.recovery=D),Object.freeze(this)}static fromCompact(y){const S=i;return y=De("compactSignature",y,S*2),new I(x(y,0,S),x(y,S,2*S))}static fromDER(y){const{r:S,s:D}=vt.toSig(De("DER",y));return new I(S,D)}assertValidity(){}addRecoveryBit(y){return new I(this.r,this.s,y)}recoverPublicKey(y){const{r:S,s:D,recovery:_}=this,O=P(De("msgHash",y));if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");const C=_===2||_===3?S+t.n:S;if(C>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=(_&1)===0?"02":"03",N=u.fromHex(M+To(C,n.BYTES)),k=f(C),F=a(-O*k),j=a(D*k),H=u.BASE.multiplyAndAddUnsafe(N,F,j);if(!H)throw new Error("point at infinify");return H.assertValidity(),H}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Hr(this.toDERHex())}toDERHex(){return vt.hexFromSig(this)}toCompactRawBytes(){return Hr(this.toCompactHex())}toCompactHex(){const y=i;return To(this.r,y)+To(this.s,y)}}const $={isValidPrivateKey(p){try{return d(p),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const p=Do(t.n);return tf(t.randomBytes(p),t.n)},precompute(p=8,y=u.BASE){return y._setWindowSize(p),y.multiply(BigInt(3)),y}};function B(p,y=!0){return u.fromPrivateKey(p).toRawBytes(y)}function E(p){if(typeof p=="bigint")return!1;if(p instanceof u)return!0;const S=De("key",p).length,D=n.BYTES,_=D+1,O=2*D+1;if(!(t.allowedPrivateKeyLengths||i===_))return S===_||S===O}function U(p,y,S=!0){if(E(p)===!0)throw new Error("first arg must be private key");if(E(y)===!1)throw new Error("second arg must be public key");return u.fromHex(y).multiply(d(p)).toRawBytes(S)}const T=t.bits2int||function(p){if(p.length>8192)throw new Error("input is too large");const y=Ne(p),S=p.length*8-o;return S>0?y>>BigInt(S):y},P=t.bits2int_modN||function(p){return a(T(p))},L=gn(o);function R(p){return Tn("num < 2^"+o,p,rt,L),he(p,i)}function q(p,y,S=z){if(["recovered","canonical"].some(K=>K in S))throw new Error("sign() legacy options not supported");const{hash:D,randomBytes:_}=t;let{lowS:O,prehash:C,extraEntropy:M}=S;O==null&&(O=!0),p=De("msgHash",p),af(S),C&&(p=De("prehashed msgHash",D(p)));const N=P(p),k=d(y),F=[R(k),R(N)];if(M!=null&&M!==!1){const K=M===!0?_(n.BYTES):M;F.push(De("extraEntropy",K))}const j=le(...F),H=N;function Z(K){const W=T(K);if(!l(W))return;const Q=f(W),ee=u.BASE.multiply(W).toAffine(),ie=a(ee.x);if(ie===rt)return;const ae=a(Q*a(H+ie*k));if(ae===rt)return;let fe=(ee.x===ie?0:2)|Number(ee.y&oe),Ct=ae;return O&&g(ae)&&(Ct=w(ae),fe^=1),new I(ie,Ct,fe)}return{seed:j,k2sig:Z}}const z={lowS:t.lowS,prehash:!1},m={lowS:t.lowS,prehash:!1};function b(p,y,S=z){const{seed:D,k2sig:_}=q(p,y,S),O=t;return j1(O.hash.outputLen,O.nByteLength,O.hmac)(D,_)}u.BASE._setWindowSize(8);function v(p,y,S,D=m){const _=p;y=De("msgHash",y),S=De("publicKey",S);const{lowS:O,prehash:C,format:M}=D;if(af(D),"strict"in D)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&M!=="compact"&&M!=="der")throw new Error("format must be compact or der");const N=typeof _=="string"||tr(_),k=!N&&!M&&typeof _=="object"&&_!==null&&typeof _.r=="bigint"&&typeof _.s=="bigint";if(!N&&!k)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let F,j;try{if(k&&(F=new I(_.r,_.s)),N){try{M!=="compact"&&(F=I.fromDER(_))}catch(fe){if(!(fe instanceof vt.Err))throw fe}!F&&M!=="der"&&(F=I.fromCompact(_))}j=u.fromHex(S)}catch{return!1}if(!F||O&&F.hasHighS())return!1;C&&(y=t.hash(y));const{r:H,s:Z}=F,K=P(y),W=f(Z),Q=a(K*W),ee=a(H*W),ie=u.BASE.multiplyAndAddUnsafe(j,Q,ee)?.toAffine();return ie?a(ie.x)===H:!1}return{CURVE:t,getPublicKey:B,getSharedSecret:U,sign:b,verify:v,ProjectivePoint:u,Signature:I,utils:$}}function Vb(e,t){const n=e.ORDER;let r=rt;for(let g=n-oe;g%Kt===rt;g/=Kt)r+=oe;const i=r,o=Kt<<i-oe-oe,s=o*Kt,c=(n-oe)/s,a=(c-oe)/Kt,f=s-oe,u=o,d=e.pow(t,c),h=e.pow(t,(c+oe)/Kt);let l=(g,w)=>{let x=d,I=e.pow(w,f),$=e.sqr(I);$=e.mul($,w);let B=e.mul(g,$);B=e.pow(B,a),B=e.mul(B,I),I=e.mul(B,w),$=e.mul(B,g);let E=e.mul($,I);B=e.pow(E,u);let U=e.eql(B,e.ONE);I=e.mul($,h),B=e.mul(E,x),$=e.cmov(I,$,U),E=e.cmov(B,E,U);for(let T=i;T>oe;T--){let P=T-Kt;P=Kt<<P-oe;let L=e.pow(E,P);const R=e.eql(L,e.ONE);I=e.mul($,x),x=e.mul(x,x),L=e.mul(E,x),$=e.cmov(I,$,R),E=e.cmov(L,E,R)}return{isValid:U,value:$}};if(e.ORDER%Co===cr){const g=(e.ORDER-cr)/Co,w=e.sqrt(e.neg(t));l=(x,I)=>{let $=e.sqr(I);const B=e.mul(x,I);$=e.mul($,B);let E=e.pow($,g);E=e.mul(E,B);const U=e.mul(E,w),T=e.mul(e.sqr(E),I),P=e.eql(T,x);let L=e.cmov(U,E,P);return{isValid:P,value:L}}}return l}function ff(e,t){if(Ja(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=Vb(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,o,s,c,a,f,u,d;i=e.sqr(r),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),s=e.add(o,e.ONE),s=e.mul(s,t.B),c=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),c=e.mul(c,t.A),o=e.sqr(s),f=e.sqr(c),a=e.mul(f,t.A),o=e.add(o,a),o=e.mul(o,s),f=e.mul(f,c),a=e.mul(f,t.B),o=e.add(o,a),u=e.mul(i,s);const{isValid:h,value:l}=n(o,f);d=e.mul(i,r),d=e.mul(d,l),u=e.cmov(u,s,h),d=e.cmov(d,l,h);const g=e.isOdd(r)===e.isOdd(d);d=e.cmov(e.neg(d),d,g);const w=wn(e,[c],!0)[0];return u=e.mul(u,w),{x:u,y:d}}}function Kb(e){return{hash:e,hmac:(t,...n)=>sr(e,t,gt(...n)),randomBytes:pt}}function Wr(e,t){const n=r=>qb({...e,...Kb(r)});return{...n(t),create:n}}const Gb=Ne;function Gt(e,t){if(ar(e),ar(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function Zb(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function ar(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Wb(e,t,n,r){qt(e),qt(t),ar(n),t.length>255&&(t=r(le(lo("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:o}=r,s=Math.ceil(n/i);if(n>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");const c=le(t,Gt(t.length,1)),a=Gt(0,o),f=Gt(n,2),u=new Array(s),d=r(le(a,e,f,Gt(0,1),c));u[0]=r(le(d,Gt(1,1),c));for(let l=1;l<=s;l++){const g=[Zb(d,u[l-1]),Gt(l+1,1),c];u[l]=r(le(...g))}return le(...u).slice(0,n)}function Yb(e,t,n,r,i){if(qt(e),qt(t),ar(n),t.length>255){const o=Math.ceil(2*r/8);t=i.create({dkLen:o}).update(lo("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(Gt(n,2)).update(t).update(Gt(t.length,1)).digest()}function uf(e,t,n){ir(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:o,hash:s,expand:c,DST:a}=n;qt(e),ar(t);const f=typeof a=="string"?lo(a):a,u=r.toString(2).length,d=Math.ceil((u+i)/8),h=t*o*d;let l;if(c==="xmd")l=Wb(e,f,h,s);else if(c==="xof")l=Yb(e,f,h,i,s);else if(c==="_internal_pass")l=e;else throw new Error('expand must be "xmd" or "xof"');const g=new Array(t);for(let w=0;w<t;w++){const x=new Array(o);for(let I=0;I<o;I++){const $=d*(I+w*o),B=l.subarray($,$+d);x[I]=Ce(Gb(B),r)}g[w]=x}return g}function lf(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,i)=>{const[o,s,c,a]=n.map(d=>d.reduce((h,l)=>e.add(e.mul(h,r),l))),[f,u]=wn(e,[s,a],!0);return r=e.mul(o,f),i=e.mul(i,e.mul(c,u)),{x:r,y:i}}}function df(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");function r(o){return e.fromAffine(t(o))}function i(o){const s=o.clearCofactor();return s.equals(e.ZERO)?e.ZERO:(s.assertValidity(),s)}return{defaults:n,hashToCurve(o,s){const c=uf(o,2,{...n,DST:n.DST,...s}),a=r(c[0]),f=r(c[1]);return i(a.add(f))},encodeToCurve(o,s){const c=uf(o,1,{...n,DST:n.encodeDST,...s});return i(r(c[0]))},mapToCurve(o){if(!Array.isArray(o))throw new Error("expected array of bigints");for(const s of o)if(typeof s!="bigint")throw new Error("expected array of bigints");return i(r(o))}}}const hf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),bf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Xb=BigInt(0),Jb=BigInt(1),$o=BigInt(2),gf=(e,t)=>(e+t/$o)/t;function Qb(e){const t=hf,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),f=e*e*e%t,u=f*f*e%t,d=Ye(u,n,t)*u%t,h=Ye(d,n,t)*u%t,l=Ye(h,$o,t)*f%t,g=Ye(l,i,t)*l%t,w=Ye(g,o,t)*g%t,x=Ye(w,c,t)*w%t,I=Ye(x,a,t)*x%t,$=Ye(I,c,t)*w%t,B=Ye($,n,t)*u%t,E=Ye(B,s,t)*g%t,U=Ye(E,r,t)*f%t,T=Ye(U,$o,t);if(!Fo.eql(Fo.sqr(T),e))throw new Error("Cannot find square root");return T}const Fo=Vt(hf,void 0,void 0,{sqrt:Qb}),e2=Wr({a:Xb,b:BigInt(7),Fp:Fo,n:bf,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=bf,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Jb*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),c=gf(o*e,t),a=gf(-r*e,t);let f=Ce(e-c*n-a*i,t),u=Ce(-c*r-a*o,t);const d=f>s,h=u>s;if(d&&(f=t-f),h&&(u=t-u),f>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:f,k2neg:h,k2:u}}}},at);function t2(e){if(e.length!==130&&e.length!==132)throw new r2({signature:e});const t=BigInt(Et(e,0,32)),n=BigInt(Et(e,32,64)),r=(()=>{const i=+`0x${e.slice(130)}`;if(!Number.isNaN(i))try{return n2(i)}catch{throw new i2({value:i})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function n2(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new o2({value:e})}class r2 extends se{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${xt(Eo(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class i2 extends se{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class o2 extends se{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}Object.freeze({1:0n,2:1n,3:2n,4:3n,5:4n,6:5n,7:6n,8:7n,9:8n,A:9n,B:10n,C:11n,D:12n,E:13n,F:14n,G:15n,H:16n,J:17n,K:18n,L:19n,M:20n,N:21n,P:22n,Q:23n,R:24n,S:25n,T:26n,U:27n,V:28n,W:29n,X:30n,Y:31n,Z:32n,a:33n,b:34n,c:35n,d:36n,e:37n,f:38n,g:39n,h:40n,i:41n,j:42n,k:43n,m:44n,n:45n,o:46n,p:47n,q:48n,r:49n,s:50n,t:51n,u:52n,v:53n,w:54n,x:55n,y:56n,z:57n}),Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)]),{...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t]))};const s2=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),be=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),V=new Uint32Array(32);function Zt(e,t,n,r,i,o){const s=i[o],c=i[o+1];let a=V[2*e],f=V[2*e+1],u=V[2*t],d=V[2*t+1],h=V[2*n],l=V[2*n+1],g=V[2*r],w=V[2*r+1],x=ro(a,u,s);f=io(x,f,d,c),a=x|0,{Dh:w,Dl:g}={Dh:w^f,Dl:g^a},{Dh:w,Dl:g}={Dh:o1(w,g),Dl:s1(w)},{h:l,l:h}=et(l,h,w,g),{Bh:d,Bl:u}={Bh:d^l,Bl:u^h},{Bh:d,Bl:u}={Bh:Pt(d,u,24),Bl:Lt(d,u,24)},V[2*e]=a,V[2*e+1]=f,V[2*t]=u,V[2*t+1]=d,V[2*n]=h,V[2*n+1]=l,V[2*r]=g,V[2*r+1]=w}function Wt(e,t,n,r,i,o){const s=i[o],c=i[o+1];let a=V[2*e],f=V[2*e+1],u=V[2*t],d=V[2*t+1],h=V[2*n],l=V[2*n+1],g=V[2*r],w=V[2*r+1],x=ro(a,u,s);f=io(x,f,d,c),a=x|0,{Dh:w,Dl:g}={Dh:w^f,Dl:g^a},{Dh:w,Dl:g}={Dh:Pt(w,g,16),Dl:Lt(w,g,16)},{h:l,l:h}=et(l,h,w,g),{Bh:d,Bl:u}={Bh:d^l,Bl:u^h},{Bh:d,Bl:u}={Bh:Yn(d,u,63),Bl:Xn(d,u,63)},V[2*e]=a,V[2*e+1]=f,V[2*t]=u,V[2*t+1]=d,V[2*n]=h,V[2*n+1]=l,V[2*r]=g,V[2*r+1]=w}function c2(e,t={},n,r,i){if(st(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:o,salt:s,personalization:c}=t;if(o!==void 0&&(o.length<1||o.length>n))throw new Error("key length must be undefined or 1.."+n);if(s!==void 0&&s.length!==r)throw new Error("salt must be undefined or "+r);if(c!==void 0&&c.length!==i)throw new Error("personalization must be undefined or "+i)}class a2 extends kr{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,st(t),st(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=Jn(this.buffer)}update(t){kt(this),t=nt(t),tt(t);const{blockLen:n,buffer:r,buffer32:i}=this,o=t.length,s=t.byteOffset,c=t.buffer;for(let a=0;a<o;){this.pos===n&&(Mt(i),this.compress(i,0,!1),Mt(i),this.pos=0);const f=Math.min(n-this.pos,o-a),u=s+a;if(f===n&&!(u%4)&&a+f<o){const d=new Uint32Array(c,u,Math.floor((o-a)/4));Mt(d);for(let h=0;a+n<o;h+=i.length,a+=n)this.length+=n,this.compress(d,h,!1);Mt(d);continue}r.set(t.subarray(a,a+f),this.pos),this.pos+=f,this.length+=f,a+=f}return this}digestInto(t){kt(this),oo(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,We(this.buffer.subarray(n)),Mt(r),this.compress(r,0,!0),Mt(r);const i=Jn(t);this.get().forEach((o,s)=>i[s]=ht(o))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:i,destroyed:o,outputLen:s,pos:c}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.buffer.set(n),t.destroyed=o,t.finished=i,t.length=r,t.pos=c,t.outputLen=s,t}clone(){return this._cloneInto()}}class f2 extends a2{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=be[0]|0,this.v0h=be[1]|0,this.v1l=be[2]|0,this.v1h=be[3]|0,this.v2l=be[4]|0,this.v2h=be[5]|0,this.v3l=be[6]|0,this.v3h=be[7]|0,this.v4l=be[8]|0,this.v4h=be[9]|0,this.v5l=be[10]|0,this.v5h=be[11]|0,this.v6l=be[12]|0,this.v6h=be[13]|0,this.v7l=be[14]|0,this.v7h=be[15]|0,c2(n,t,64,16,16);let{key:r,personalization:i,salt:o}=t,s=0;if(r!==void 0&&(r=nt(r),s=r.length),this.v0l^=this.outputLen|s<<8|65536|1<<24,o!==void 0){o=nt(o);const c=Jn(o);this.v4l^=ht(c[0]),this.v4h^=ht(c[1]),this.v5l^=ht(c[2]),this.v5h^=ht(c[3])}if(i!==void 0){i=nt(i);const c=Jn(i);this.v6l^=ht(c[0]),this.v6h^=ht(c[1]),this.v7l^=ht(c[2]),this.v7h^=ht(c[3])}if(r!==void 0){const c=new Uint8Array(this.blockLen);c.set(r),this.update(c)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:i,v2l:o,v2h:s,v3l:c,v3h:a,v4l:f,v4h:u,v5l:d,v5h:h,v6l:l,v6h:g,v7l:w,v7h:x}=this;return[t,n,r,i,o,s,c,a,f,u,d,h,l,g,w,x]}set(t,n,r,i,o,s,c,a,f,u,d,h,l,g,w,x){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=o|0,this.v2h=s|0,this.v3l=c|0,this.v3h=a|0,this.v4l=f|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=l|0,this.v6h=g|0,this.v7l=w|0,this.v7h=x|0}compress(t,n,r){this.get().forEach((a,f)=>V[f]=a),V.set(be,16);let{h:i,l:o}=aa(BigInt(this.length));V[24]=be[8]^o,V[25]=be[9]^i,r&&(V[28]=~V[28],V[29]=~V[29]);let s=0;const c=s2;for(let a=0;a<12;a++)Zt(0,4,8,12,t,n+2*c[s++]),Wt(0,4,8,12,t,n+2*c[s++]),Zt(1,5,9,13,t,n+2*c[s++]),Wt(1,5,9,13,t,n+2*c[s++]),Zt(2,6,10,14,t,n+2*c[s++]),Wt(2,6,10,14,t,n+2*c[s++]),Zt(3,7,11,15,t,n+2*c[s++]),Wt(3,7,11,15,t,n+2*c[s++]),Zt(0,5,10,15,t,n+2*c[s++]),Wt(0,5,10,15,t,n+2*c[s++]),Zt(1,6,11,12,t,n+2*c[s++]),Wt(1,6,11,12,t,n+2*c[s++]),Zt(2,7,8,13,t,n+2*c[s++]),Wt(2,7,8,13,t,n+2*c[s++]),Zt(3,4,9,14,t,n+2*c[s++]),Wt(3,4,9,14,t,n+2*c[s++]);this.v0l^=V[0]^V[16],this.v0h^=V[1]^V[17],this.v1l^=V[2]^V[18],this.v1h^=V[3]^V[19],this.v2l^=V[4]^V[20],this.v2h^=V[5]^V[21],this.v3l^=V[6]^V[22],this.v3h^=V[7]^V[23],this.v4l^=V[8]^V[24],this.v4h^=V[9]^V[25],this.v5l^=V[10]^V[26],this.v5h^=V[11]^V[27],this.v6l^=V[12]^V[28],this.v6h^=V[13]^V[29],this.v7l^=V[14]^V[30],this.v7h^=V[15]^V[31],We(V)}destroy(){this.destroyed=!0,We(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const u2=w1(e=>new f2(e));wt.slice();const l2=BigInt(0),Yr=BigInt(1),pf=BigInt(2),Cn=BigInt(3);function d2(e){const t=[];for(;e>Yr;e>>=Yr)(e&Yr)===l2?t.unshift(0):(e&Cn)===Cn?(t.unshift(-1),e+=Yr):t.unshift(1);return t}function h2(e){const{Fp:t,Fr:n,Fp2:r,Fp6:i,Fp12:o}=e.fields,s=e.params.xNegative,c=e.params.twistType,a=Ro({n:n.ORDER,...e.G1}),f=Object.assign(a,df(a.ProjectivePoint,e.G1.mapToCurve,{...e.htfDefaults,...e.G1.htfDefaults})),u=Ro({n:n.ORDER,...e.G2}),d=Object.assign(u,df(u.ProjectivePoint,e.G2.mapToCurve,{...e.htfDefaults,...e.G2.htfDefaults}));let h;if(c==="multiplicative")h=(N,k,F,j,H,Z)=>o.mul014(j,N,r.mul(k,H),r.mul(F,Z));else if(c==="divisive")h=(N,k,F,j,H,Z)=>o.mul034(j,r.mul(F,Z),r.mul(k,H),N);else throw new Error("bls: unknown twist type");const l=r.div(r.ONE,r.mul(r.ONE,pf));function g(N,k,F,j){const H=r.sqr(F),Z=r.sqr(j),K=r.mulByB(r.mul(Z,Cn)),W=r.mul(K,Cn),Q=r.sub(r.sub(r.sqr(r.add(F,j)),Z),H),ee=r.sub(K,H),ie=r.mul(r.sqr(k),Cn),ae=r.neg(Q);return N.push([ee,ie,ae]),k=r.mul(r.mul(r.mul(r.sub(H,W),k),F),l),F=r.sub(r.sqr(r.mul(r.add(H,W),l)),r.mul(r.sqr(K),Cn)),j=r.mul(H,Q),{Rx:k,Ry:F,Rz:j}}function w(N,k,F,j,H,Z){const K=r.sub(F,r.mul(Z,j)),W=r.sub(k,r.mul(H,j)),Q=r.sub(r.mul(K,H),r.mul(W,Z)),ee=r.neg(K),ie=W;N.push([Q,ee,ie]);const ae=r.sqr(W),fe=r.mul(ae,W),Ct=r.mul(ae,k),Pi=r.add(r.sub(fe,r.mul(Ct,pf)),r.mul(r.sqr(K),j));return k=r.mul(W,Pi),F=r.sub(r.mul(r.sub(Ct,Pi),K),r.mul(fe,F)),j=r.mul(j,fe),{Rx:k,Ry:F,Rz:j}}const x=d2(e.params.ateLoopSize),I=po(N=>{const k=N,{x:F,y:j}=k.toAffine(),H=F,Z=j,K=r.neg(j);let W=H,Q=Z,ee=r.ONE;const ie=[];for(const ae of x){const fe=[];({Rx:W,Ry:Q,Rz:ee}=g(fe,W,Q,ee)),ae&&({Rx:W,Ry:Q,Rz:ee}=w(fe,W,Q,ee,H,ae===-1?K:Z)),ie.push(fe)}if(e.postPrecompute){const ae=ie[ie.length-1];e.postPrecompute(W,Q,ee,H,Z,w.bind(null,ae))}return ie});function $(N,k=!1){let F=o.ONE;if(N.length){const j=N[0][0].length;for(let H=0;H<j;H++){F=o.sqr(F);for(const[Z,K,W]of N)for(const[Q,ee,ie]of Z[H])F=h(Q,ee,ie,F,K,W)}}return s&&(F=o.conjugate(F)),k?o.finalExponentiate(F):F}function B(N,k=!0){const F=[];f.ProjectivePoint.normalizeZ(N.map(({g1:j})=>j)),d.ProjectivePoint.normalizeZ(N.map(({g2:j})=>j));for(const{g1:j,g2:H}of N){if(j.equals(f.ProjectivePoint.ZERO)||H.equals(d.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");j.assertValidity(),H.assertValidity();const Z=j.toAffine();F.push([I(H),Z.x,Z.y])}return $(F,k)}function E(N,k,F=!0){return B([{g1:N,g2:k}],F)}const U={randomPrivateKey:()=>{const N=Do(n.ORDER);return tf(e.randomBytes(N),n.ORDER)},calcPairingPrecomputes:I},{ShortSignature:T}=e.G1,{Signature:P}=e.G2;function L(N){return N instanceof f.ProjectivePoint?N:f.ProjectivePoint.fromHex(N)}function R(N,k){return N instanceof f.ProjectivePoint?N:f.hashToCurve(De("point",N),k)}function q(N){return N instanceof d.ProjectivePoint?N:P.fromHex(N)}function z(N,k){return N instanceof d.ProjectivePoint?N:d.hashToCurve(De("point",N),k)}function m(N){return f.ProjectivePoint.fromPrivateKey(N).toRawBytes(!0)}function b(N){return d.ProjectivePoint.fromPrivateKey(N).toRawBytes(!0)}function v(N,k,F){const j=z(N,F);j.assertValidity();const H=j.multiply(f.normPrivateKeyToScalar(k));return N instanceof d.ProjectivePoint?H:P.toRawBytes(H)}function p(N,k,F){const j=R(N,F);j.assertValidity();const H=j.multiply(f.normPrivateKeyToScalar(k));return N instanceof f.ProjectivePoint?H:T.toRawBytes(H)}function y(N,k,F,j){const H=L(F),Z=z(k,j),K=f.ProjectivePoint.BASE,W=q(N),Q=B([{g1:H.negate(),g2:Z},{g1:K,g2:W}]);return o.eql(Q,o.ONE)}function S(N,k,F,j){const H=q(F),Z=R(k,j),K=d.ProjectivePoint.BASE,W=L(N),Q=B([{g1:Z,g2:H},{g1:W,g2:K.negate()}]);return o.eql(Q,o.ONE)}function D(N){if(!Array.isArray(N)||N.length===0)throw new Error("expected non-empty array")}function _(N){D(N);const F=N.map(L).reduce((j,H)=>j.add(H),f.ProjectivePoint.ZERO);return N[0]instanceof f.ProjectivePoint?(F.assertValidity(),F):F.toRawBytes(!0)}function O(N){D(N);const F=N.map(q).reduce((j,H)=>j.add(H),d.ProjectivePoint.ZERO);return N[0]instanceof d.ProjectivePoint?(F.assertValidity(),F):P.toRawBytes(F)}function C(N){D(N);const F=N.map(L).reduce((j,H)=>j.add(H),f.ProjectivePoint.ZERO);return N[0]instanceof f.ProjectivePoint?(F.assertValidity(),F):T.toRawBytes(F)}function M(N,k,F,j){if(D(k),F.length!==k.length)throw new Error("amount of public keys and messages should be equal");const H=q(N),Z=k.map(ee=>z(ee,j)),K=F.map(L),W=new Map;for(let ee=0;ee<K.length;ee++){const ie=K[ee],ae=Z[ee];let fe=W.get(ae);fe===void 0&&(fe=[],W.set(ae,fe)),fe.push(ie)}const Q=[];try{for(const[ee,ie]of W){const ae=ie.reduce((fe,Ct)=>fe.add(Ct));Q.push({g1:ae,g2:ee})}return Q.push({g1:f.ProjectivePoint.BASE.negate(),g2:H}),o.eql(B(Q),o.ONE)}catch{return!1}}return f.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:m,getPublicKeyForShortSignatures:b,sign:v,signShortSignature:p,verify:y,verifyBatch:M,verifyShortSignature:S,aggregatePublicKeys:_,aggregateSignatures:O,aggregateShortSignatures:C,millerLoopBatch:$,pairing:E,pairingBatch:B,G1:f,G2:d,Signature:P,ShortSignature:T,fields:{Fr:n,Fp:t,Fp2:r,Fp6:i,Fp12:o},params:{ateLoopSize:e.params.ateLoopSize,r:e.params.r,G1b:e.G1.b,G2b:e.G2.b},utils:U}}const b2=BigInt(0),Rn=BigInt(1),Bt=BigInt(2),wf=BigInt(3);function Po(e,t,n,r,i=1,o){const s=BigInt(o===void 0?r:o),c=n**BigInt(r),a=[];for(let f=0;f<i;f++){const u=BigInt(f+1),d=[];for(let h=0,l=Rn;h<r;h++){const g=(u*l-u)/s%c;d.push(e.pow(t,g)),l*=n}a.push(d)}return a}function g2(e,t,n){const r=t.pow(n,(e.ORDER-Rn)/wf),i=t.pow(n,(e.ORDER-Rn)/Bt);function o(h,l){const g=t.mul(t.frobeniusMap(h,1),r),w=t.mul(t.frobeniusMap(l,1),i);return[g,w]}const s=t.pow(n,(e.ORDER**Bt-Rn)/wf),c=t.pow(n,(e.ORDER**Bt-Rn)/Bt);if(!t.eql(c,t.neg(t.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function a(h,l){return[t.mul(h,s),t.neg(l)]}const f=h=>(l,g)=>{const w=g.toAffine(),x=h(w.x,w.y);return l.fromAffine({x:x[0],y:x[1]})},u=f(o),d=f(a);return{psi:o,psi2:a,G2psi:u,G2psi2:d,PSI_X:r,PSI_Y:i,PSI2_X:s,PSI2_Y:c}}function p2(e){const{ORDER:t}=e,n=Vt(t),r=n.create(e.NONRESIDUE||BigInt(-1)),i=n.div(n.ONE,Bt),o=Po(n,r,n.ORDER,2)[0],s=({c0:m,c1:b},{c0:v,c1:p})=>({c0:n.add(m,v),c1:n.add(b,p)}),c=({c0:m,c1:b},{c0:v,c1:p})=>({c0:n.sub(m,v),c1:n.sub(b,p)}),a=({c0:m,c1:b},v)=>{if(typeof v=="bigint")return{c0:n.mul(m,v),c1:n.mul(b,v)};const{c0:p,c1:y}=v;let S=n.mul(m,p),D=n.mul(b,y);const _=n.sub(S,D),O=n.sub(n.mul(n.add(m,b),n.add(p,y)),n.add(S,D));return{c0:_,c1:O}},f=({c0:m,c1:b})=>{const v=n.add(m,b),p=n.sub(m,b),y=n.add(m,m);return{c0:n.mul(v,p),c1:n.mul(y,b)}},u=m=>{if(m.length!==2)throw new Error("invalid tuple");const b=m.map(v=>n.create(v));return{c0:b[0],c1:b[1]}},d=t*t,h=u(e.FP2_NONRESIDUE),l={ORDER:d,isLE:n.isLE,NONRESIDUE:h,BITS:rr(d),BYTES:Math.ceil(rr(d)/8),MASK:gn(rr(d)),ZERO:{c0:n.ZERO,c1:n.ZERO},ONE:{c0:n.ONE,c1:n.ZERO},create:m=>m,isValid:({c0:m,c1:b})=>typeof m=="bigint"&&typeof b=="bigint",is0:({c0:m,c1:b})=>n.is0(m)&&n.is0(b),eql:({c0:m,c1:b},{c0:v,c1:p})=>n.eql(m,v)&&n.eql(b,p),neg:({c0:m,c1:b})=>({c0:n.neg(m),c1:n.neg(b)}),pow:(m,b)=>Gr(l,m,b),invertBatch:m=>wn(l,m),add:s,sub:c,mul:a,sqr:f,addN:s,subN:c,mulN:a,sqrN:f,div:(m,b)=>l.mul(m,typeof b=="bigint"?n.inv(n.create(b)):l.inv(b)),inv:({c0:m,c1:b})=>{const v=n.inv(n.create(m*m+b*b));return{c0:n.mul(v,n.create(m)),c1:n.mul(v,n.create(-b))}},sqrt:m=>{if(e.Fp2sqrt)return e.Fp2sqrt(m);const{c0:b,c1:v}=m;if(n.is0(v))return Zr(n,b)===1?l.create({c0:n.sqrt(b),c1:n.ZERO}):l.create({c0:n.ZERO,c1:n.sqrt(n.div(b,r))});const p=n.sqrt(n.sub(n.sqr(b),n.mul(n.sqr(v),r)));let y=n.mul(n.add(p,b),i);Zr(n,y)===-1&&(y=n.sub(y,p));const D=n.sqrt(y),_=l.create({c0:D,c1:n.div(n.mul(v,i),D)});if(!l.eql(l.sqr(_),m))throw new Error("Cannot find square root");const O=_,C=l.neg(O),{re:M,im:N}=l.reim(O),{re:k,im:F}=l.reim(C);return N>F||N===F&&M>k?O:C},isOdd:m=>{const{re:b,im:v}=l.reim(m),p=b%Bt,y=b===b2,S=v%Bt;return BigInt(p||y&&S)==Rn},fromBytes(m){if(m.length!==l.BYTES)throw new Error("fromBytes invalid length="+m.length);return{c0:n.fromBytes(m.subarray(0,n.BYTES)),c1:n.fromBytes(m.subarray(n.BYTES))}},toBytes:({c0:m,c1:b})=>le(n.toBytes(m),n.toBytes(b)),cmov:({c0:m,c1:b},{c0:v,c1:p},y)=>({c0:n.cmov(m,v,y),c1:n.cmov(b,p,y)}),reim:({c0:m,c1:b})=>({re:m,im:b}),mulByNonresidue:({c0:m,c1:b})=>l.mul({c0:m,c1:b},h),mulByB:e.Fp2mulByB,fromBigTuple:u,frobeniusMap:({c0:m,c1:b},v)=>({c0:m,c1:n.mul(b,o[v%2])})},g=({c0:m,c1:b,c2:v},{c0:p,c1:y,c2:S})=>({c0:l.add(m,p),c1:l.add(b,y),c2:l.add(v,S)}),w=({c0:m,c1:b,c2:v},{c0:p,c1:y,c2:S})=>({c0:l.sub(m,p),c1:l.sub(b,y),c2:l.sub(v,S)}),x=({c0:m,c1:b,c2:v},p)=>{if(typeof p=="bigint")return{c0:l.mul(m,p),c1:l.mul(b,p),c2:l.mul(v,p)};const{c0:y,c1:S,c2:D}=p,_=l.mul(m,y),O=l.mul(b,S),C=l.mul(v,D);return{c0:l.add(_,l.mulByNonresidue(l.sub(l.mul(l.add(b,v),l.add(S,D)),l.add(O,C)))),c1:l.add(l.sub(l.mul(l.add(m,b),l.add(y,S)),l.add(_,O)),l.mulByNonresidue(C)),c2:l.sub(l.add(O,l.mul(l.add(m,v),l.add(y,D))),l.add(_,C))}},I=({c0:m,c1:b,c2:v})=>{let p=l.sqr(m),y=l.mul(l.mul(m,b),Bt),S=l.mul(l.mul(b,v),Bt),D=l.sqr(v);return{c0:l.add(l.mulByNonresidue(S),p),c1:l.add(l.mulByNonresidue(D),y),c2:l.sub(l.sub(l.add(l.add(y,l.sqr(l.add(l.sub(m,b),v))),S),p),D)}},[$,B]=Po(l,h,n.ORDER,6,2,3),E={ORDER:l.ORDER,isLE:l.isLE,BITS:3*l.BITS,BYTES:3*l.BYTES,MASK:gn(3*l.BITS),ZERO:{c0:l.ZERO,c1:l.ZERO,c2:l.ZERO},ONE:{c0:l.ONE,c1:l.ZERO,c2:l.ZERO},create:m=>m,isValid:({c0:m,c1:b,c2:v})=>l.isValid(m)&&l.isValid(b)&&l.isValid(v),is0:({c0:m,c1:b,c2:v})=>l.is0(m)&&l.is0(b)&&l.is0(v),neg:({c0:m,c1:b,c2:v})=>({c0:l.neg(m),c1:l.neg(b),c2:l.neg(v)}),eql:({c0:m,c1:b,c2:v},{c0:p,c1:y,c2:S})=>l.eql(m,p)&&l.eql(b,y)&&l.eql(v,S),sqrt:Ra,div:(m,b)=>E.mul(m,typeof b=="bigint"?n.inv(n.create(b)):E.inv(b)),pow:(m,b)=>Gr(E,m,b),invertBatch:m=>wn(E,m),add:g,sub:w,mul:x,sqr:I,addN:g,subN:w,mulN:x,sqrN:I,inv:({c0:m,c1:b,c2:v})=>{let p=l.sub(l.sqr(m),l.mulByNonresidue(l.mul(v,b))),y=l.sub(l.mulByNonresidue(l.sqr(v)),l.mul(m,b)),S=l.sub(l.sqr(b),l.mul(m,v)),D=l.inv(l.add(l.mulByNonresidue(l.add(l.mul(v,y),l.mul(b,S))),l.mul(m,p)));return{c0:l.mul(D,p),c1:l.mul(D,y),c2:l.mul(D,S)}},fromBytes:m=>{if(m.length!==E.BYTES)throw new Error("fromBytes invalid length="+m.length);return{c0:l.fromBytes(m.subarray(0,l.BYTES)),c1:l.fromBytes(m.subarray(l.BYTES,2*l.BYTES)),c2:l.fromBytes(m.subarray(2*l.BYTES))}},toBytes:({c0:m,c1:b,c2:v})=>le(l.toBytes(m),l.toBytes(b),l.toBytes(v)),cmov:({c0:m,c1:b,c2:v},{c0:p,c1:y,c2:S},D)=>({c0:l.cmov(m,p,D),c1:l.cmov(b,y,D),c2:l.cmov(v,S,D)}),fromBigSix:m=>{if(!Array.isArray(m)||m.length!==6)throw new Error("invalid Fp6 usage");return{c0:l.fromBigTuple(m.slice(0,2)),c1:l.fromBigTuple(m.slice(2,4)),c2:l.fromBigTuple(m.slice(4,6))}},frobeniusMap:({c0:m,c1:b,c2:v},p)=>({c0:l.frobeniusMap(m,p),c1:l.mul(l.frobeniusMap(b,p),$[p%6]),c2:l.mul(l.frobeniusMap(v,p),B[p%6])}),mulByFp2:({c0:m,c1:b,c2:v},p)=>({c0:l.mul(m,p),c1:l.mul(b,p),c2:l.mul(v,p)}),mulByNonresidue:({c0:m,c1:b,c2:v})=>({c0:l.mulByNonresidue(v),c1:m,c2:b}),mul1:({c0:m,c1:b,c2:v},p)=>({c0:l.mulByNonresidue(l.mul(v,p)),c1:l.mul(m,p),c2:l.mul(b,p)}),mul01({c0:m,c1:b,c2:v},p,y){let S=l.mul(m,p),D=l.mul(b,y);return{c0:l.add(l.mulByNonresidue(l.sub(l.mul(l.add(b,v),y),D)),S),c1:l.sub(l.sub(l.mul(l.add(p,y),l.add(m,b)),S),D),c2:l.add(l.sub(l.mul(l.add(m,v),p),S),D)}}},U=Po(l,h,n.ORDER,12,1,6)[0],T=({c0:m,c1:b},{c0:v,c1:p})=>({c0:E.add(m,v),c1:E.add(b,p)}),P=({c0:m,c1:b},{c0:v,c1:p})=>({c0:E.sub(m,v),c1:E.sub(b,p)}),L=({c0:m,c1:b},v)=>{if(typeof v=="bigint")return{c0:E.mul(m,v),c1:E.mul(b,v)};let{c0:p,c1:y}=v,S=E.mul(m,p),D=E.mul(b,y);return{c0:E.add(S,E.mulByNonresidue(D)),c1:E.sub(E.mul(E.add(m,b),E.add(p,y)),E.add(S,D))}},R=({c0:m,c1:b})=>{let v=E.mul(m,b);return{c0:E.sub(E.sub(E.mul(E.add(E.mulByNonresidue(b),m),E.add(m,b)),v),E.mulByNonresidue(v)),c1:E.add(v,v)}};function q(m,b){const v=l.sqr(m),p=l.sqr(b);return{first:l.add(l.mulByNonresidue(p),v),second:l.sub(l.sub(l.sqr(l.add(m,b)),v),p)}}const z={ORDER:l.ORDER,isLE:E.isLE,BITS:2*E.BITS,BYTES:2*E.BYTES,MASK:gn(2*E.BITS),ZERO:{c0:E.ZERO,c1:E.ZERO},ONE:{c0:E.ONE,c1:E.ZERO},create:m=>m,isValid:({c0:m,c1:b})=>E.isValid(m)&&E.isValid(b),is0:({c0:m,c1:b})=>E.is0(m)&&E.is0(b),neg:({c0:m,c1:b})=>({c0:E.neg(m),c1:E.neg(b)}),eql:({c0:m,c1:b},{c0:v,c1:p})=>E.eql(m,v)&&E.eql(b,p),sqrt:Ra,inv:({c0:m,c1:b})=>{let v=E.inv(E.sub(E.sqr(m),E.mulByNonresidue(E.sqr(b))));return{c0:E.mul(m,v),c1:E.neg(E.mul(b,v))}},div:(m,b)=>z.mul(m,typeof b=="bigint"?n.inv(n.create(b)):z.inv(b)),pow:(m,b)=>Gr(z,m,b),invertBatch:m=>wn(z,m),add:T,sub:P,mul:L,sqr:R,addN:T,subN:P,mulN:L,sqrN:R,fromBytes:m=>{if(m.length!==z.BYTES)throw new Error("fromBytes invalid length="+m.length);return{c0:E.fromBytes(m.subarray(0,E.BYTES)),c1:E.fromBytes(m.subarray(E.BYTES))}},toBytes:({c0:m,c1:b})=>le(E.toBytes(m),E.toBytes(b)),cmov:({c0:m,c1:b},{c0:v,c1:p},y)=>({c0:E.cmov(m,v,y),c1:E.cmov(b,p,y)}),fromBigTwelve:m=>({c0:E.fromBigSix(m.slice(0,6)),c1:E.fromBigSix(m.slice(6,12))}),frobeniusMap(m,b){const{c0:v,c1:p,c2:y}=E.frobeniusMap(m.c1,b),S=U[b%12];return{c0:E.frobeniusMap(m.c0,b),c1:E.create({c0:l.mul(v,S),c1:l.mul(p,S),c2:l.mul(y,S)})}},mulByFp2:({c0:m,c1:b},v)=>({c0:E.mulByFp2(m,v),c1:E.mulByFp2(b,v)}),conjugate:({c0:m,c1:b})=>({c0:m,c1:E.neg(b)}),mul014:({c0:m,c1:b},v,p,y)=>{let S=E.mul01(m,v,p),D=E.mul1(b,y);return{c0:E.add(E.mulByNonresidue(D),S),c1:E.sub(E.sub(E.mul01(E.add(b,m),v,l.add(p,y)),S),D)}},mul034:({c0:m,c1:b},v,p,y)=>{const S=E.create({c0:l.mul(m.c0,v),c1:l.mul(m.c1,v),c2:l.mul(m.c2,v)}),D=E.mul01(b,p,y),_=E.mul01(E.add(m,b),l.add(v,p),y);return{c0:E.add(E.mulByNonresidue(D),S),c1:E.sub(_,E.add(S,D))}},_cyclotomicSquare:e.Fp12cyclotomicSquare,_cyclotomicExp:e.Fp12cyclotomicExp,finalExponentiate:e.Fp12finalExponentiate};return{Fp:n,Fp2:l,Fp6:E,Fp4Square:q,Fp12:z}}const Re=BigInt(0),Xr=BigInt(1),pe=BigInt(2),Jr=BigInt(3),fr=BigInt(4),Yt=BigInt("0xd201000000010000"),w2=rr(Yt),{Fp:G,Fp2:Y,Fp6:Lo,Fp4Square:ko,Fp12:te}=p2({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[Xr,Xr],Fp2mulByB:({c0:e,c1:t})=>{const n=G.mul(e,fr),r=G.mul(t,fr);return{c0:G.sub(n,r),c1:G.add(n,r)}},Fp12cyclotomicSquare:({c0:e,c1:t})=>{const{c0:n,c1:r,c2:i}=e,{c0:o,c1:s,c2:c}=t,{first:a,second:f}=ko(n,s),{first:u,second:d}=ko(o,i),{first:h,second:l}=ko(r,c),g=Y.mulByNonresidue(l);return{c0:Lo.create({c0:Y.add(Y.mul(Y.sub(a,n),pe),a),c1:Y.add(Y.mul(Y.sub(u,r),pe),u),c2:Y.add(Y.mul(Y.sub(h,i),pe),h)}),c1:Lo.create({c0:Y.add(Y.mul(Y.add(g,o),pe),g),c1:Y.add(Y.mul(Y.add(f,s),pe),f),c2:Y.add(Y.mul(Y.add(d,c),pe),d)})}},Fp12cyclotomicExp(e,t){let n=te.ONE;for(let r=w2-1;r>=0;r--)n=te._cyclotomicSquare(n),M1(t,r)&&(n=te.mul(n,e));return n},Fp12finalExponentiate:e=>{const t=Yt,n=te.div(te.frobeniusMap(e,6),e),r=te.mul(te.frobeniusMap(n,2),n),i=te.conjugate(te._cyclotomicExp(r,t)),o=te.mul(te.conjugate(te._cyclotomicSquare(r)),i),s=te.conjugate(te._cyclotomicExp(o,t)),c=te.conjugate(te._cyclotomicExp(s,t)),a=te.mul(te.conjugate(te._cyclotomicExp(c,t)),te._cyclotomicSquare(i)),f=te.conjugate(te._cyclotomicExp(a,t)),u=te.frobeniusMap(te.mul(i,c),2),d=te.frobeniusMap(te.mul(s,r),3),h=te.frobeniusMap(te.mul(a,te.conjugate(r)),1),l=te.mul(te.mul(f,te.conjugate(o)),r);return te.mul(te.mul(te.mul(u,d),h),l)}}),yf=Vt(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),y2=lf(Y,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(e=>e.map(t=>Y.fromBigTuple(t.map(BigInt))))),m2=lf(G,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),E2=ff(Y,{A:Y.create({c0:G.create(Re),c1:G.create(BigInt(240))}),B:Y.create({c0:G.create(BigInt(1012)),c1:G.create(BigInt(1012))}),Z:Y.create({c0:G.create(BigInt(-2)),c1:G.create(BigInt(-1))})}),x2=ff(G,{A:G.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:G.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:G.create(BigInt(11))}),{G2psi:mf,G2psi2:v2}=g2(G,Y,Y.div(Y.ONE,Y.NONRESIDUE)),Mo=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:G.ORDER,m:2,k:128,expand:"xmd",hash:at}),Qr=ur(G.toBytes(Re),{infinity:!0,compressed:!0});function ei(e){e=e.slice();const t=e[0]&224,n=!!(t>>7&1),r=!!(t>>6&1),i=!!(t>>5&1);return e[0]&=31,{compressed:n,infinity:r,sort:i,value:e}}function ur(e,t){if(e[0]&224)throw new Error("setMask: non-empty mask");return t.compressed&&(e[0]|=128),t.infinity&&(e[0]|=64),t.sort&&(e[0]|=32),e}function Ef(e){e.assertValidity();const t=e.equals(it.G1.ProjectivePoint.ZERO),{x:n,y:r}=e.toAffine();if(t)return Qr.slice();const i=G.ORDER,o=!!(r*pe/i);return ur(he(n,G.BYTES),{compressed:!0,sort:o})}function xf(e){e.assertValidity();const t=G.BYTES;if(e.equals(it.G2.ProjectivePoint.ZERO))return le(Qr,he(Re,t));const{x:n,y:r}=e.toAffine(),{re:i,im:o}=Y.reim(n),{re:s,im:c}=Y.reim(r),f=!!((c>Re?c*pe:s*pe)/G.ORDER&Xr),u=i;return le(ur(he(o,t),{sort:f,compressed:!0}),he(u,t))}const it=h2({fields:{Fp:G,Fp2:Y,Fp6:Lo,Fp12:te,Fr:yf},G1:{Fp:G,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:G.ZERO,b:fr,htfDefaults:{...Mo,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(e,t)=>{const n=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),r=new e(G.mul(t.px,n),t.py,t.pz);return t.multiplyUnsafe(Yt).negate().multiplyUnsafe(Yt).equals(r)},clearCofactor:(e,t)=>t.multiplyUnsafe(Yt).add(t),mapToCurve:e=>{const{x:t,y:n}=x2(G.create(e[0]));return m2(t,n)},fromBytes:e=>{const{compressed:t,infinity:n,sort:r,value:i}=ei(e);if(i.length===48&&t){const o=G.ORDER,s=Ne(i),c=G.create(s&G.MASK);if(n){if(c!==Re)throw new Error("G1: non-empty compressed point at infinity");return{x:Re,y:Re}}const a=G.add(G.pow(c,Jr),G.create(it.params.G1b));let f=G.sqrt(a);if(!f)throw new Error("invalid compressed G1 point");return f*pe/o!==BigInt(r)&&(f=G.neg(f)),{x:G.create(c),y:G.create(f)}}else if(i.length===96&&!t){const o=Ne(i.subarray(0,G.BYTES)),s=Ne(i.subarray(G.BYTES));if(n){if(o!==Re||s!==Re)throw new Error("G1: non-empty point at infinity");return it.G1.ProjectivePoint.ZERO.toAffine()}return{x:G.create(o),y:G.create(s)}}else throw new Error("invalid point G1, expected 48/96 bytes")},toBytes:(e,t,n)=>{const r=t.equals(e.ZERO),{x:i,y:o}=t.toAffine();if(n){if(r)return Qr.slice();const s=G.ORDER,c=!!(o*pe/s);return ur(he(i,G.BYTES),{compressed:!0,sort:c})}else return r?le(new Uint8Array([64]),new Uint8Array(2*G.BYTES-1)):le(he(i,G.BYTES),he(o,G.BYTES))},ShortSignature:{fromHex(e){const{infinity:t,sort:n,value:r}=ei(De("signatureHex",e,48)),i=G.ORDER,o=Ne(r);if(t)return it.G1.ProjectivePoint.ZERO;const s=G.create(o&G.MASK),c=G.add(G.pow(s,Jr),G.create(it.params.G1b));let a=G.sqrt(c);if(!a)throw new Error("invalid compressed G1 point");const f=BigInt(n);a*pe/i!==f&&(a=G.neg(a));const u=it.G1.ProjectivePoint.fromAffine({x:s,y:a});return u.assertValidity(),u},toRawBytes(e){return Ef(e)},toHex(e){return bn(Ef(e))}}},G2:{Fp:Y,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:Y.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:Y.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:Y.ZERO,b:Y.fromBigTuple([fr,fr]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...Mo},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:e=>{const{x:t,y:n}=E2(Y.fromBigTuple(e));return y2(t,n)},isTorsionFree:(e,t)=>t.multiplyUnsafe(Yt).negate().equals(mf(e,t)),clearCofactor:(e,t)=>{const n=Yt;let r=t.multiplyUnsafe(n).negate(),i=mf(e,t),o=t.double();return o=v2(e,o),o=o.subtract(i),i=r.add(i),i=i.multiplyUnsafe(n).negate(),o=o.add(i),o=o.subtract(r),o.subtract(t)},fromBytes:e=>{const{compressed:t,infinity:n,sort:r,value:i}=ei(e);if(!t&&!n&&r||!t&&n&&r||r&&n&&t)throw new Error("invalid encoding flag: "+(e[0]&224));const o=G.BYTES,s=(c,a,f)=>Ne(c.slice(a,f));if(i.length===96&&t){const c=it.params.G2b,a=G.ORDER;if(n){if(i.reduce((w,x)=>w!==0?x+1:x,0)>0)throw new Error("invalid compressed G2 point");return{x:Y.ZERO,y:Y.ZERO}}const f=s(i,0,o),u=s(i,o,2*o),d=Y.create({c0:G.create(u),c1:G.create(f)}),h=Y.add(Y.pow(d,Jr),c);let l=Y.sqrt(h);const g=l.c1===Re?l.c0*pe/a:l.c1*pe/a?Xr:Re;return l=r&&g>0?l:Y.neg(l),{x:d,y:l}}else if(i.length===192&&!t){if(n){if(i.reduce((d,h)=>d!==0?h+1:h,0)>0)throw new Error("invalid uncompressed G2 point");return{x:Y.ZERO,y:Y.ZERO}}const c=s(i,0,o),a=s(i,o,2*o),f=s(i,2*o,3*o),u=s(i,3*o,4*o);return{x:Y.fromBigTuple([a,c]),y:Y.fromBigTuple([u,f])}}else throw new Error("invalid point G2, expected 96/192 bytes")},toBytes:(e,t,n)=>{const{BYTES:r,ORDER:i}=G,o=t.equals(e.ZERO),{x:s,y:c}=t.toAffine();if(n){if(o)return le(Qr,he(Re,r));const a=!!(c.c1===Re?c.c0*pe/i:c.c1*pe/i);return le(ur(he(s.c1,r),{compressed:!0,sort:a}),he(s.c0,r))}else{if(o)return le(new Uint8Array([64]),new Uint8Array(4*r-1));const{re:a,im:f}=Y.reim(s),{re:u,im:d}=Y.reim(c);return le(he(f,r),he(a,r),he(d,r),he(u,r))}},Signature:{fromHex(e){const{infinity:t,sort:n,value:r}=ei(De("signatureHex",e)),i=G.ORDER,o=r.length/2;if(o!==48&&o!==96)throw new Error("invalid compressed signature length, must be 96 or 192");const s=Ne(r.slice(0,o)),c=Ne(r.slice(o));if(t)return it.G2.ProjectivePoint.ZERO;const a=G.create(s&G.MASK),f=G.create(c),u=Y.create({c0:f,c1:a}),d=Y.add(Y.pow(u,Jr),it.params.G2b);let h=Y.sqrt(d);if(!h)throw new Error("Failed to find a square root");const{re:l,im:g}=Y.reim(h),w=BigInt(n),x=g>Re&&g*pe/i!==w,I=g===Re&&l*pe/i!==w;(x||I)&&(h=Y.neg(h));const $=it.G2.ProjectivePoint.fromAffine({x:u,y:h});return $.assertValidity(),$},toRawBytes(e){return xf(e)},toHex(e){return bn(xf(e))}}},params:{ateLoopSize:Yt,r:yf.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:Mo,hash:at,randomBytes:pt});BigInt(0),BigInt(1),BigInt(2),BigInt(8),BigInt(0),BigInt(1),BigInt(2),BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),BigInt(0),BigInt(1),BigInt(2),BigInt(3),BigInt(5),BigInt(8);const jo=BigInt(0),zo=BigInt(1);function ti(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function yn(e,t,n=""){const r=Fr(e),i=e?.length,o=t!==void 0;if(!r||o&&i!==t){const s=n&&`"${n}" `,c=o?` of length ${t}`:"",a=r?`length=${i}`:`type=${typeof e}`;throw new Error(s+"expected Uint8Array"+c+", got "+a)}return e}function ni(e){const t=e.toString(16);return t.length&1?"0"+t:t}function vf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?