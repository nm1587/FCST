(function(re,en){typeof exports=="object"&&typeof module<"u"?en(exports):typeof define=="function"&&define.amd?define(["exports"],en):(re=typeof globalThis<"u"?globalThis:re||self,en(re["@walletconnect/sign-client"]={}))})(this,function(re){"use strict";var en=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hl(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var lt={exports:{}},Jr=typeof Reflect=="object"?Reflect:null,Kl=Jr&&typeof Jr.apply=="function"?Jr.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},ks;Jr&&typeof Jr.ownKeys=="function"?ks=Jr.ownKeys:Object.getOwnPropertySymbols?ks=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ks=function(e){return Object.getOwnPropertyNames(e)};function Vb(t){console&&console.warn&&console.warn(t)}var Gl=Number.isNaN||function(e){return e!==e};function pe(){pe.init.call(this)}lt.exports=pe,lt.exports.once=Wb,pe.EventEmitter=pe,pe.prototype._events=void 0,pe.prototype._eventsCount=0,pe.prototype._maxListeners=void 0;var Wl=10;function qs(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(pe,"defaultMaxListeners",{enumerable:!0,get:function(){return Wl},set:function(t){if(typeof t!="number"||t<0||Gl(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Wl=t}}),pe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},pe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Gl(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Zl(t){return t._maxListeners===void 0?pe.defaultMaxListeners:t._maxListeners}pe.prototype.getMaxListeners=function(){return Zl(this)},pe.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")Kl(c,this,n);else for(var u=c.length,l=ef(c,u),r=0;r<u;++r)Kl(l[r],this,n);return!0};function Yl(t,e,n,r){var i,s,o;if(qs(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=Zl(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Vb(a)}return t}pe.prototype.addListener=function(e,n){return Yl(this,e,n,!1)},pe.prototype.on=pe.prototype.addListener,pe.prototype.prependListener=function(e,n){return Yl(this,e,n,!0)};function Hb(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Xl(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=Hb.bind(r);return i.listener=n,r.wrapFn=i,i}pe.prototype.once=function(e,n){return qs(n),this.on(e,Xl(this,e,n)),this},pe.prototype.prependOnceListener=function(e,n){return qs(n),this.prependListener(e,Xl(this,e,n)),this},pe.prototype.removeListener=function(e,n){var r,i,s,o,a;if(qs(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():Kb(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this},pe.prototype.off=pe.prototype.removeListener,pe.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function Jl(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?Gb(i):ef(i,i.length)}pe.prototype.listeners=function(e){return Jl(this,e,!0)},pe.prototype.rawListeners=function(e){return Jl(this,e,!1)},pe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Ql.call(t,e)},pe.prototype.listenerCount=Ql;function Ql(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}pe.prototype.eventNames=function(){return this._eventsCount>0?ks(this._events):[]};function ef(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function Kb(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Gb(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Wb(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}tf(t,e,s,{once:!0}),e!=="error"&&Zb(t,i,{once:!0})})}function Zb(t,e,n){typeof t.on=="function"&&tf(t,"error",e,n)}function tf(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var K={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var $a=function(t,e){return $a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},$a(t,e)};function Yb(t,e){$a(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ta=function(){return Ta=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ta.apply(this,arguments)};function Xb(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Jb(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function Qb(t,e){return function(n,r){e(n,r,t)}}function ey(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ty(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(h){o(h)}}function c(l){try{u(r.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function ny(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function ry(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function iy(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Pa(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nf(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function sy(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(nf(arguments[e]));return t}function oy(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function Ni(t){return this instanceof Ni?(this.v=t,this):new Ni(t)}function ay(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(f){return new Promise(function(p,y){s.push([d,f,p,y])>1||a(d,f)})})}function a(d,f){try{c(r[d](f))}catch(p){h(s[0][3],p)}}function c(d){d.value instanceof Ni?Promise.resolve(d.value.v).then(u,l):h(s[0][2],d)}function u(d){a("next",d)}function l(d){a("throw",d)}function h(d,f){d(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function cy(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:Ni(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function uy(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Pa=="function"?Pa(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function ly(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function fy(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function hy(t){return t&&t.__esModule?t:{default:t}}function dy(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function py(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}var gy=Object.freeze({__proto__:null,__extends:Yb,get __assign(){return Ta},__rest:Xb,__decorate:Jb,__param:Qb,__metadata:ey,__awaiter:ty,__generator:ny,__createBinding:ry,__exportStar:iy,__values:Pa,__read:nf,__spread:sy,__spreadArrays:oy,__await:Ni,__asyncGenerator:ay,__asyncDelegator:cy,__asyncValues:uy,__makeTemplateObject:ly,__importStar:fy,__importDefault:hy,__classPrivateFieldGet:dy,__classPrivateFieldSet:py}),Ms=Hl(gy),Ra={},Ci={},rf;function by(){if(rf)return Ci;rf=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Ci.delay=t,Ci}var Er={},Na={},xr={},sf;function yy(){return sf||(sf=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.ONE_THOUSAND=xr.ONE_HUNDRED=void 0,xr.ONE_HUNDRED=100,xr.ONE_THOUSAND=1e3),xr}var Ca={},of;function wy(){return of||(of=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Ca)),Ca}var af;function cf(){return af||(af=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ms;e.__exportStar(yy(),t),e.__exportStar(wy(),t)}(Na)),Na}var uf;function my(){if(uf)return Er;uf=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.fromMiliseconds=Er.toMiliseconds=void 0;const t=cf();function e(r){return r*t.ONE_THOUSAND}Er.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Er.fromMiliseconds=n,Er}var lf;function vy(){return lf||(lf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ms;e.__exportStar(by(),t),e.__exportStar(my(),t)}(Ra)),Ra}var Qr={},ff;function Ey(){if(ff)return Qr;ff=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Qr.Watch=t,Qr.default=t,Qr}var Ua={},Ui={},hf;function xy(){if(hf)return Ui;hf=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.IWatch=void 0;class t{}return Ui.IWatch=t,Ui}var df;function _y(){return df||(df=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Ms.__exportStar(xy(),t)}(Ua)),Ua}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ms;e.__exportStar(vy(),t),e.__exportStar(Ey(),t),e.__exportStar(_y(),t),e.__exportStar(cf(),t)})(K);class _r{}class Sy extends _r{constructor(e){super()}}const pf=K.FIVE_SECONDS,Sr={pulse:"heartbeat_pulse"};class Fa extends Sy{constructor(e){super(e),this.events=new lt.exports.EventEmitter,this.interval=pf,this.interval=e?.interval||pf}static async init(e){const n=new Fa(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),K.toMiliseconds(this.interval))}pulse(){this.events.emit(Sr.pulse)}}const Iy=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Oy=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ay=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function By(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Dy(t);return}return e}function Dy(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function js(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Ay.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Iy.test(t)||Oy.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,By)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function $y(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Re(t,...e){try{return $y(t(...e))}catch(n){return Promise.reject(n)}}function Ty(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Py(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function zs(t){if(Ty(t))return String(t);if(Py(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return zs(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const La="base64:";function Ry(t){return typeof t=="string"?t:La+Uy(t)}function Ny(t){return typeof t!="string"||!t.startsWith(La)?t:Cy(t.slice(La.length))}function Cy(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Uy(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function ft(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Fy(...t){return ft(t.join(":"))}function Vs(t){return t=ft(t),t?t+":":""}function Ly(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function ky(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}function LD(t){return t}const qy="memory",My=()=>{const t=new Map;return{name:qy,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function jy(t={}){const e={mounts:{"":t.driver||My()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},r=(u,l)=>e.mountpoints.filter(h=>h.startsWith(u)||l&&u.startsWith(h)).map(h=>({relativeBase:u.length>h.length?u.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),i=(u,l)=>{if(e.watching){l=ft(l);for(const h of e.watchListeners)h(u,l)}},s=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await gf(e.mounts[u],i,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,h)=>{const d=new Map,f=p=>{let y=d.get(p.base);return y||(y={driver:p.driver,base:p.base,items:[]},d.set(p.base,y)),y};for(const p of u){const y=typeof p=="string",m=ft(y?p:p.key),A=y?void 0:p.value,$=y||!p.options?l:{...l,...p.options},_=n(m);f(_).items.push({key:m,value:A,relativeKey:_.relativeKey,options:$})}return Promise.all([...d.values()].map(p=>h(p))).then(p=>p.flat())},c={hasItem(u,l={}){u=ft(u);const{relativeKey:h,driver:d}=n(u);return Re(d.hasItem,h,l)},getItem(u,l={}){u=ft(u);const{relativeKey:h,driver:d}=n(u);return Re(d.getItem,h,l).then(f=>js(f))},getItems(u,l={}){return a(u,l,h=>h.driver.getItems?Re(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),l).then(d=>d.map(f=>({key:Fy(h.base,f.key),value:js(f.value)}))):Promise.all(h.items.map(d=>Re(h.driver.getItem,d.relativeKey,d.options).then(f=>({key:d.key,value:js(f)})))))},getItemRaw(u,l={}){u=ft(u);const{relativeKey:h,driver:d}=n(u);return d.getItemRaw?Re(d.getItemRaw,h,l):Re(d.getItem,h,l).then(f=>Ny(f))},async setItem(u,l,h={}){if(l===void 0)return c.removeItem(u);u=ft(u);const{relativeKey:d,driver:f}=n(u);f.setItem&&(await Re(f.setItem,d,zs(l),h),f.watch||i("update",u))},async setItems(u,l){await a(u,l,async h=>{if(h.driver.setItems)return Re(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:zs(d.value),options:d.options})),l);h.driver.setItem&&await Promise.all(h.items.map(d=>Re(h.driver.setItem,d.relativeKey,zs(d.value),d.options)))})},async setItemRaw(u,l,h={}){if(l===void 0)return c.removeItem(u,h);u=ft(u);const{relativeKey:d,driver:f}=n(u);if(f.setItemRaw)await Re(f.setItemRaw,d,l,h);else if(f.setItem)await Re(f.setItem,d,Ry(l),h);else return;f.watch||i("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=ft(u);const{relativeKey:h,driver:d}=n(u);d.removeItem&&(await Re(d.removeItem,h,l),(l.removeMeta||l.removeMata)&&await Re(d.removeItem,h+"$",l),d.watch||i("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=ft(u);const{relativeKey:h,driver:d}=n(u),f=Object.create(null);if(d.getMeta&&Object.assign(f,await Re(d.getMeta,h,l)),!l.nativeOnly){const p=await Re(d.getItem,h+"$",l).then(y=>js(y));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(u,l,h={}){return this.setItem(u+"$",l,h)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){u=Vs(u);const h=r(u,!0);let d=[];const f=[];let p=!0;for(const m of h){m.driver.flags?.maxDepth||(p=!1);const A=await Re(m.driver.getKeys,m.relativeBase,l);for(const $ of A){const _=m.mountpoint+ft($);d.some(x=>_.startsWith(x))||f.push(_)}d=[m.mountpoint,...d.filter($=>!$.startsWith(m.mountpoint))]}const y=l.maxDepth!==void 0&&!p;return f.filter(m=>(!y||Ly(m,l.maxDepth))&&ky(m,u))},async clear(u,l={}){u=Vs(u),await Promise.all(r(u,!1).map(async h=>{if(h.driver.clear)return Re(h.driver.clear,h.relativeBase,l);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",l);return Promise.all(d.map(f=>h.driver.removeItem(f,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>bf(u)))},async watch(u){return await s(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=Vs(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[u]=l,e.watching&&Promise.resolve(gf(l,i,u)).then(h=>{e.unwatch[u]=h}).catch(console.error),c},async unmount(u,l=!0){u=Vs(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&(e.unwatch[u]?.(),delete e.unwatch[u]),l&&await bf(e.mounts[u]),e.mountpoints=e.mountpoints.filter(h=>h!==u),delete e.mounts[u])},getMount(u=""){u=ft(u)+":";const l=n(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=ft(u),r(u,l.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,h={})=>c.setItem(u,l,h),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function gf(t,e,n){return t.watch?t.watch((r,i)=>e(r,n+i)):()=>{}}async function bf(t){typeof t.dispose=="function"&&await Re(t.dispose)}function Ir(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function yf(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Ir(n);return(i,s)=>r.then(o=>s(o.transaction(e,i).objectStore(e)))}let ka;function Fi(){return ka||(ka=yf("keyval-store","keyval")),ka}function wf(t,e=Fi()){return e("readonly",n=>Ir(n.get(t)))}function zy(t,e,n=Fi()){return n("readwrite",r=>(r.put(e,t),Ir(r.transaction)))}function Vy(t,e=Fi()){return e("readwrite",n=>(n.delete(t),Ir(n.transaction)))}function Hy(t=Fi()){return t("readwrite",e=>(e.clear(),Ir(e.transaction)))}function Ky(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Ir(t.transaction)}function Gy(t=Fi()){return t("readonly",e=>{if(e.getAllKeys)return Ir(e.getAllKeys());const n=[];return Ky(e,r=>n.push(r.key)).then(()=>n)})}const Wy=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),Zy=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function ei(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Zy(t)}catch{return t}}function Or(t){return typeof t=="string"?t:Wy(t)||""}const Yy="idb-keyval";var Xy=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=i=>e+i;let r;return t.dbName&&t.storeName&&(r=yf(t.dbName,t.storeName)),{name:Yy,options:t,async hasItem(i){return!(typeof await wf(n(i),r)>"u")},async getItem(i){return await wf(n(i),r)??null},setItem(i,s){return zy(n(i),s,r)},removeItem(i){return Vy(n(i),r)},getKeys(){return Gy(r)},clear(){return Hy(r)}}};const Jy="WALLET_CONNECT_V2_INDEXED_DB",Qy="keyvaluestorage";class ew{constructor(){this.indexedDb=jy({driver:Xy({dbName:Jy,storeName:Qy})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Or(n))}async removeItem(e){await this.indexedDb.removeItem(e)}}var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hs={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof qa<"u"&&qa.localStorage?Hs.exports=qa.localStorage:typeof window<"u"&&window.localStorage?Hs.exports=window.localStorage:Hs.exports=new e})();function tw(t){var e;return[t[0],ei((e=t[1])!=null?e:"")]}class nw{constructor(){this.localStorage=Hs.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(tw)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return ei(n)}async setItem(e,n){this.localStorage.setItem(e,Or(n))}async removeItem(e){this.localStorage.removeItem(e)}}const rw="wc_storage_version",mf=1,iw=async(t,e,n)=>{const r=rw,i=await e.getItem(r);if(i&&i>=mf){n(e);return}const s=await t.getKeys();if(!s.length){n(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(r,mf),n(e),sw(t,o)},sw=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};class ow{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new nw;this.storage=e;try{const n=new ew;iw(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}}var tn={exports:{}};function aw(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var cw=uw;function uw(t,e,n){var r=n&&n.stringify||aw,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=r(t);for(var a=1;a<s;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var u="",l=1-i,h=-1,d=t&&t.length||0,f=0;f<d;){if(t.charCodeAt(f)===37&&f+1<d){switch(h=h>-1?h:0,t.charCodeAt(f+1)){case 100:case 102:if(l>=c||e[l]==null)break;h<f&&(u+=t.slice(h,f)),u+=Number(e[l]),h=f+2,f++;break;case 105:if(l>=c||e[l]==null)break;h<f&&(u+=t.slice(h,f)),u+=Math.floor(Number(e[l])),h=f+2,f++;break;case 79:case 111:case 106:if(l>=c||e[l]===void 0)break;h<f&&(u+=t.slice(h,f));var p=typeof e[l];if(p==="string"){u+="'"+e[l]+"'",h=f+2,f++;break}if(p==="function"){u+=e[l].name||"<anonymous>",h=f+2,f++;break}u+=r(e[l]),h=f+2,f++;break;case 115:if(l>=c)break;h<f&&(u+=t.slice(h,f)),u+=String(e[l]),h=f+2,f++;break;case 37:h<f&&(u+=t.slice(h,f)),u+="%",h=f+2,f++,l--;break}++l}++f}return h===-1?t:(h<d&&(u+=t.slice(h)),u)}const vf=cw;tn.exports=dn;const Li=Sw().console||{},lw={mapHttpRequest:Ks,mapHttpResponse:Ks,wrapRequestSerializer:Ha,wrapResponseSerializer:Ha,wrapErrorSerializer:Ha,req:Ks,res:Ks,err:xf,errWithCause:xf};function Mn(t,e){return t==="silent"?1/0:e.levels.values[t]}const Ma=Symbol("pino.logFuncs"),ja=Symbol("pino.hierarchy"),fw={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Ef(t,e){const n={logger:e,parent:t[ja]};e[ja]=n}function hw(t,e,n){const r={};e.forEach(i=>{r[i]=n[i]?n[i]:Li[i]||Li[fw[i]||"log"]||ti}),t[Ma]=r}function dw(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function dn(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||Li;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},i=dw(t.browser.serialize,r);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=Object.keys(t.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(o);typeof n=="function"&&a.forEach(function(y){n[y]=n}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");const c=t.level||"info",u=Object.create(n);u.log||(u.log=ti),hw(u,a,n),Ef({},u),Object.defineProperty(u,"levelVal",{get:h}),Object.defineProperty(u,"level",{get:d,set:f});const l={transmit:e,serialize:i,asObject:t.browser.asObject,asObjectBindingsOnly:t.browser.asObjectBindingsOnly,formatters:t.browser.formatters,levels:a,timestamp:Ew(t),messageKey:t.messageKey||"msg",onChild:t.onChild||ti};u.levels=pw(t),u.level=c,u.isLevelEnabled=function(y){return this.levels.values[y]?this.levels.values[y]>=this.levels.values[this.level]:!1},u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=ti,u.serializers=r,u._serialize=i,u._stdErrSerialize=s,u.child=function(...y){return p.call(this,l,...y)},e&&(u._logEvent=Va());function h(){return Mn(this.level,this)}function d(){return this._level}function f(y){if(y!=="silent"&&!this.levels.values[y])throw Error("unknown level "+y);this._level=y,Ar(this,l,u,"error"),Ar(this,l,u,"fatal"),Ar(this,l,u,"warn"),Ar(this,l,u,"info"),Ar(this,l,u,"debug"),Ar(this,l,u,"trace"),o.forEach(m=>{Ar(this,l,u,m)})}function p(y,m,A){if(!m)throw new Error("missing bindings for child Pino");A=A||{},i&&m.serializers&&(A.serializers=m.serializers);const $=A.serializers;if(i&&$){var _=Object.assign({},r,$),x=t.browser.serialize===!0?Object.keys(_):i;delete m.serializers,za([m],x,_,this._stdErrSerialize)}function T(F){this._childLevel=(F._childLevel|0)+1,this.bindings=m,_&&(this.serializers=_,this._serialize=x),e&&(this._logEvent=Va([].concat(F._logEvent.bindings,m)))}T.prototype=this;const R=new T(this);return Ef(this,R),R.child=function(...F){return p.call(this,y,...F)},R.level=A.level||this.level,y.onChild(R),R}return u}function pw(t){const e=t.customLevels||{},n=Object.assign({},dn.levels.values,e),r=Object.assign({},dn.levels.labels,gw(e));return{values:n,labels:r}}function gw(t){const e={};return Object.keys(t).forEach(function(n){e[t[n]]=n}),e}dn.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},dn.stdSerializers=lw,dn.stdTimeFunctions=Object.assign({},{nullTime:_f,epochTime:Sf,unixTime:xw,isoTime:_w});function bw(t){const e=[];t.bindings&&e.push(t.bindings);let n=t[ja];for(;n.parent;)n=n.parent,n.logger.bindings&&e.push(n.logger.bindings);return e.reverse()}function Ar(t,e,n,r){if(Object.defineProperty(t,r,{value:Mn(t.level,n)>Mn(r,n)?ti:n[Ma][r],writable:!0,enumerable:!0,configurable:!0}),t[r]===ti){if(!e.transmit)return;const s=e.transmit.level||t.level,o=Mn(s,n);if(Mn(r,n)<o)return}t[r]=ww(t,e,n,r);const i=bw(t);i.length!==0&&(t[r]=yw(i,t[r]))}function yw(t,e){return function(){return e.apply(this,[...t,...arguments])}}function ww(t,e,n,r){return function(i){return function(){const o=e.timestamp(),a=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Li?Li:this;for(var u=0;u<a.length;u++)a[u]=arguments[u];var l=!1;if(e.serialize&&(za(a,this._serialize,this.serializers,this._stdErrSerialize),l=!0),e.asObject||e.formatters?i.call(c,...mw(this,r,a,o,e)):i.apply(c,a),e.transmit){const h=e.transmit.level||t._level,d=Mn(h,n),f=Mn(r,n);if(f<d)return;vw(this,{ts:o,methodLevel:r,methodValue:f,transmitLevel:h,transmitValue:n.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:Mn(t._level,n)},a,l)}}}(t[Ma][r])}function mw(t,e,n,r,i){const{level:s,log:o=h=>h}=i.formatters||{},a=n.slice();let c=a[0];const u={};let l=(t._childLevel|0)+1;if(l<1&&(l=1),r&&(u.time=r),s){const h=s(e,t.levels.values[e]);Object.assign(u,h)}else u.level=t.levels.values[e];if(i.asObjectBindingsOnly){if(c!==null&&typeof c=="object")for(;l--&&typeof a[0]=="object";)Object.assign(u,a.shift());return[o(u),...a]}else{if(c!==null&&typeof c=="object"){for(;l--&&typeof a[0]=="object";)Object.assign(u,a.shift());c=a.length?vf(a.shift(),a):void 0}else typeof c=="string"&&(c=vf(a.shift(),a));return c!==void 0&&(u[i.messageKey]=c),[o(u)]}}function za(t,e,n,r){for(const i in t)if(r&&t[i]instanceof Error)t[i]=dn.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i])&&e)for(const s in t[i])e.indexOf(s)>-1&&s in n&&(t[i][s]=n[s](t[i][s]))}function vw(t,e,n,r=!1){const i=e.send,s=e.ts,o=e.methodLevel,a=e.methodValue,c=e.val,u=t._logEvent.bindings;r||za(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return u.indexOf(l)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=a,i(o,t._logEvent,c),t._logEvent=Va(u)}function Va(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function xf(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function Ew(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?_f:Sf}function Ks(){return{}}function Ha(t){return t}function ti(){}function _f(){return!1}function Sf(){return Date.now()}function xw(){return Math.round(Date.now()/1e3)}function _w(){return new Date(Date.now()).toISOString()}function Sw(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}tn.exports.default=dn,tn.exports.pino=dn;const Iw={level:"info"},Gs="custom_context",Ka=1e3*1024;var Ow=Object.defineProperty,Aw=(t,e,n)=>e in t?Ow(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jn=(t,e,n)=>Aw(t,typeof e!="symbol"?e+"":e,n);class Bw{constructor(e){jn(this,"nodeValue"),jn(this,"sizeInBytes"),jn(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class If{constructor(e){jn(this,"lengthInNodes"),jn(this,"sizeInBytes"),jn(this,"head"),jn(this,"tail"),jn(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Bw(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}}var Dw=Object.defineProperty,$w=(t,e,n)=>e in t?Dw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ws=(t,e,n)=>$w(t,typeof e!="symbol"?e+"":e,n);class Of{constructor(e,n=Ka){Ws(this,"logs"),Ws(this,"level"),Ws(this,"levelValue"),Ws(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=tn.exports.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new If(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===tn.exports.levels.values.error?console.error(e):n===tn.exports.levels.values.warn?console.warn(e):n===tn.exports.levels.values.debug?console.debug(e):n===tn.exports.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Or({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new If(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Or({extraMetadata:e})),new Blob(n,{type:"application/json"})}}var Tw=Object.defineProperty,Pw=(t,e,n)=>e in t?Tw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rw=(t,e,n)=>Pw(t,typeof e!="symbol"?e+"":e,n);class Nw{constructor(e,n=Ka){Rw(this,"baseChunkLogger"),this.baseChunkLogger=new Of(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}}var Cw=Object.defineProperty,Uw=(t,e,n)=>e in t?Cw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fw=(t,e,n)=>Uw(t,typeof e!="symbol"?e+"":e,n);class Lw{constructor(e,n=Ka){Fw(this,"baseChunkLogger"),this.baseChunkLogger=new Of(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var kw=Object.defineProperty,qw=Object.defineProperties,Mw=Object.getOwnPropertyDescriptors,Af=Object.getOwnPropertySymbols,jw=Object.prototype.hasOwnProperty,zw=Object.prototype.propertyIsEnumerable,Bf=(t,e,n)=>e in t?kw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zs=(t,e)=>{for(var n in e||(e={}))jw.call(e,n)&&Bf(t,n,e[n]);if(Af)for(var n of Af(e))zw.call(e,n)&&Bf(t,n,e[n]);return t},Ys=(t,e)=>qw(t,Mw(e));function Vw(t){return Ys(Zs({},t),{level:t?.level||Iw.level})}function Hw(t,e,n=Gs){return t[n]=e,t}function ht(t,e=Gs){return t[e]||""}function Kw(t,e,n=Gs){const r=ht(t,n);return r.trim()?`${r}/${e}`:e}function St(t,e,n=Gs){const r=Kw(t,e,n),i=t.child({context:r});return Hw(i,r,n)}function Gw(t){var e,n;const r=new Nw((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:tn.exports(Ys(Zs({},t.opts),{level:"trace",browser:Ys(Zs({},(n=t.opts)==null?void 0:n.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function Ww(t){var e;const n=new Lw((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:tn.exports(Ys(Zs({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function Df(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Gw(t):Ww(t)}var Zw=Object.defineProperty,Yw=(t,e,n)=>e in t?Zw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$f=(t,e,n)=>Yw(t,typeof e!="symbol"?e+"":e,n);class Xw extends _r{constructor(e){super(),this.opts=e,$f(this,"protocol","wc"),$f(this,"version",2)}}var Jw=Object.defineProperty,Qw=(t,e,n)=>e in t?Jw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,em=(t,e,n)=>Qw(t,typeof e!="symbol"?e+"":e,n);class tm extends _r{constructor(e,n){super(),this.core=e,this.logger=n,em(this,"records",new Map)}}class nm{constructor(e,n){this.logger=e,this.core=n}}class rm extends _r{constructor(e,n){super(),this.relayer=e,this.logger=n}}class im extends _r{constructor(e){super()}}class sm{constructor(e,n,r,i){this.core=e,this.logger=n,this.name=r}}class om extends _r{constructor(e,n){super(),this.relayer=e,this.logger=n}}class am extends _r{constructor(e,n){super(),this.core=e,this.logger=n}}class cm{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}}class um{constructor(e,n){this.projectId=e,this.logger=n}}class lm{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}}var fm=Object.defineProperty,hm=(t,e,n)=>e in t?fm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tf=(t,e,n)=>hm(t,typeof e!="symbol"?e+"":e,n);class dm{constructor(e){this.opts=e,Tf(this,"protocol","wc"),Tf(this,"version",2)}}class pm{constructor(e){this.client=e}}function gm(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Pf(t,...e){if(!gm(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Rf(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function bm(t,e){Pf(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const ni=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ga=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function ym(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Nf(t){return typeof t=="string"&&(t=ym(t)),Pf(t),t}class wm{clone(){return this._cloneInto()}}function mm(t){const e=r=>t().update(Nf(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Cf(t=32){if(ni&&typeof ni.getRandomValues=="function")return ni.getRandomValues(new Uint8Array(t));if(ni&&typeof ni.randomBytes=="function")return ni.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function vm(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}class Em extends wm{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ga(this.buffer)}update(e){Rf(this);const{view:n,buffer:r,blockLen:i}=this;e=Nf(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Ga(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Rf(this),bm(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;vm(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Ga(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const Xs=BigInt(2**32-1),Wa=BigInt(32);function Uf(t,e=!1){return e?{h:Number(t&Xs),l:Number(t>>Wa&Xs)}:{h:Number(t>>Wa&Xs)|0,l:Number(t&Xs)|0}}function xm(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Uf(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const _m=(t,e)=>BigInt(t>>>0)<<Wa|BigInt(e>>>0),Sm=(t,e,n)=>t>>>n,Im=(t,e,n)=>t<<32-n|e>>>n,Om=(t,e,n)=>t>>>n|e<<32-n,Am=(t,e,n)=>t<<32-n|e>>>n,Bm=(t,e,n)=>t<<64-n|e>>>n-32,Dm=(t,e,n)=>t>>>n-32|e<<64-n,$m=(t,e)=>e,Tm=(t,e)=>t,Pm=(t,e,n)=>t<<n|e>>>32-n,Rm=(t,e,n)=>e<<n|t>>>32-n,Nm=(t,e,n)=>e<<n-32|t>>>64-n,Cm=(t,e,n)=>t<<n-32|e>>>64-n;function Um(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Fm=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Lm=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,km=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),qm=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Mm=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),jm=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,ne={fromBig:Uf,split:xm,toBig:_m,shrSH:Sm,shrSL:Im,rotrSH:Om,rotrSL:Am,rotrBH:Bm,rotrBL:Dm,rotr32H:$m,rotr32L:Tm,rotlSH:Pm,rotlSL:Rm,rotlBH:Nm,rotlBL:Cm,add:Um,add3L:Fm,add3H:Lm,add4L:km,add4H:qm,add5H:jm,add5L:Mm},[zm,Vm]=ne.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),zn=new Uint32Array(80),Vn=new Uint32Array(80);class Hm extends Em{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:h,Fl:d,Gh:f,Gl:p,Hh:y,Hl:m}=this;return[e,n,r,i,s,o,a,c,u,l,h,d,f,p,y,m]}set(e,n,r,i,s,o,a,c,u,l,h,d,f,p,y,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=p|0,this.Hh=y|0,this.Hl=m|0}process(e,n){for(let _=0;_<16;_++,n+=4)zn[_]=e.getUint32(n),Vn[_]=e.getUint32(n+=4);for(let _=16;_<80;_++){const x=zn[_-15]|0,T=Vn[_-15]|0,R=ne.rotrSH(x,T,1)^ne.rotrSH(x,T,8)^ne.shrSH(x,T,7),F=ne.rotrSL(x,T,1)^ne.rotrSL(x,T,8)^ne.shrSL(x,T,7),U=zn[_-2]|0,D=Vn[_-2]|0,j=ne.rotrSH(U,D,19)^ne.rotrBH(U,D,61)^ne.shrSH(U,D,6),M=ne.rotrSL(U,D,19)^ne.rotrBL(U,D,61)^ne.shrSL(U,D,6),E=ne.add4L(F,M,Vn[_-7],Vn[_-16]),b=ne.add4H(E,R,j,zn[_-7],zn[_-16]);zn[_]=b|0,Vn[_]=E|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:h,El:d,Fh:f,Fl:p,Gh:y,Gl:m,Hh:A,Hl:$}=this;for(let _=0;_<80;_++){const x=ne.rotrSH(h,d,14)^ne.rotrSH(h,d,18)^ne.rotrBH(h,d,41),T=ne.rotrSL(h,d,14)^ne.rotrSL(h,d,18)^ne.rotrBL(h,d,41),R=h&f^~h&y,F=d&p^~d&m,U=ne.add5L($,T,F,Vm[_],Vn[_]),D=ne.add5H(U,A,x,R,zm[_],zn[_]),j=U|0,M=ne.rotrSH(r,i,28)^ne.rotrBH(r,i,34)^ne.rotrBH(r,i,39),E=ne.rotrSL(r,i,28)^ne.rotrBL(r,i,34)^ne.rotrBL(r,i,39),b=r&s^r&a^s&a,v=i&o^i&c^o&c;A=y|0,$=m|0,y=f|0,m=p|0,f=h|0,p=d|0,{h,l:d}=ne.add(u|0,l|0,D|0,j|0),u=a|0,l=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const g=ne.add3L(j,E,v);r=ne.add3H(g,D,M,b),i=g|0}({h:r,l:i}=ne.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=ne.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=ne.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=ne.add(this.Dh|0,this.Dl|0,u|0,l|0),{h,l:d}=ne.add(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:p}=ne.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:y,l:m}=ne.add(this.Gh|0,this.Gl|0,y|0,m|0),{h:A,l:$}=ne.add(this.Hh|0,this.Hl|0,A|0,$|0),this.set(r,i,s,o,a,c,u,l,h,d,f,p,y,m,A,$)}roundClean(){zn.fill(0),Vn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Km=mm(()=>new Hm);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Za=BigInt(0),Ff=BigInt(1),Gm=BigInt(2);function Ya(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xa(t){if(!Ya(t))throw new Error("Uint8Array expected")}function Ja(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Wm=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Qa(t){Xa(t);let e="";for(let n=0;n<t.length;n++)e+=Wm[t[n]];return e}function Lf(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Za:BigInt("0x"+t)}const pn={_0:48,_9:57,A:65,F:70,a:97,f:102};function kf(t){if(t>=pn._0&&t<=pn._9)return t-pn._0;if(t>=pn.A&&t<=pn.F)return t-(pn.A-10);if(t>=pn.a&&t<=pn.f)return t-(pn.a-10)}function qf(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=kf(t.charCodeAt(s)),a=kf(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Zm(t){return Lf(Qa(t))}function Js(t){return Xa(t),Lf(Qa(Uint8Array.from(t).reverse()))}function Mf(t,e){return qf(t.toString(16).padStart(e*2,"0"))}function ec(t,e){return Mf(t,e).reverse()}function gn(t,e,n){let r;if(typeof e=="string")try{r=qf(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Ya(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function jf(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Xa(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const tc=t=>typeof t=="bigint"&&Za<=t;function Ym(t,e,n){return tc(t)&&tc(e)&&tc(n)&&e<=t&&t<n}function ki(t,e,n,r){if(!Ym(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Xm(t){let e;for(e=0;t>Za;t>>=Ff,e+=1);return e}const Jm=t=>(Gm<<BigInt(t-1))-Ff,Qm={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ya(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function nc(t,e,n={}){const r=(i,s,o)=>{const a=Qm[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}function zf(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const Ne=BigInt(0),_e=BigInt(1),Br=BigInt(2),e2=BigInt(3),rc=BigInt(4),Vf=BigInt(5),Hf=BigInt(8);function Be(t,e){const n=t%e;return n>=Ne?n:e+n}function t2(t,e,n){if(e<Ne)throw new Error("invalid exponent, negatives unsupported");if(n<=Ne)throw new Error("invalid modulus");if(n===_e)return Ne;let r=_e;for(;e>Ne;)e&_e&&(r=r*t%n),t=t*t%n,e>>=_e;return r}function nn(t,e,n){let r=t;for(;e-- >Ne;)r*=r,r%=n;return r}function Kf(t,e){if(t===Ne)throw new Error("invert: expected non-zero number");if(e<=Ne)throw new Error("invert: expected positive modulus, got "+e);let n=Be(t,e),r=e,i=Ne,s=_e;for(;n!==Ne;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==_e)throw new Error("invert: does not exist");return Be(i,e)}function n2(t){const e=(t-_e)/Br;let n,r,i;for(n=t-_e,r=0;n%Br===Ne;n/=Br,r++);for(i=Br;i<t&&t2(i,e,t)!==t-_e;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+_e)/rc;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const s=(n+_e)/Br;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,u=o.pow(o.mul(o.ONE,i),n),l=o.pow(a,s),h=o.pow(a,n);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let p=o.sqr(h);d<c&&!o.eql(p,o.ONE);d++)p=o.sqr(p);const f=o.pow(u,_e<<BigInt(c-d-1));u=o.sqr(f),l=o.mul(l,f),h=o.mul(h,u),c=d}return l}}function r2(t){if(t%rc===e2){const e=(t+_e)/rc;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%Hf===Vf){const e=(t-Vf)/Hf;return function(n,r){const i=n.mul(r,Br),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,Br),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return n2(t)}const i2=(t,e)=>(Be(t,e)&_e)===_e,s2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function o2(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=s2.reduce((r,i)=>(r[i]="function",r),e);return nc(t,n)}function a2(t,e,n){if(n<Ne)throw new Error("invalid exponent, negatives unsupported");if(n===Ne)return t.ONE;if(n===_e)return e;let r=t.ONE,i=e;for(;n>Ne;)n&_e&&(r=t.mul(r,i)),i=t.sqr(i),n>>=_e;return r}function c2(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function Gf(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Wf(t,e,n=!1,r={}){if(t<=Ne)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=Gf(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:Jm(i),ZERO:Ne,ONE:_e,create:c=>Be(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Ne<=c&&c<t},is0:c=>c===Ne,isOdd:c=>(c&_e)===_e,neg:c=>Be(-c,t),eql:(c,u)=>c===u,sqr:c=>Be(c*c,t),add:(c,u)=>Be(c+u,t),sub:(c,u)=>Be(c-u,t),mul:(c,u)=>Be(c*u,t),pow:(c,u)=>a2(a,c,u),div:(c,u)=>Be(c*Kf(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Kf(c,t),sqrt:r.sqrt||(c=>(o||(o=r2(t)),o(a,c))),invertBatch:c=>c2(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?ec(c,s):Mf(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?Js(c):Zm(c)}});return Object.freeze(a)}const Zf=BigInt(0),Qs=BigInt(1);function ic(t,e){const n=e.negate();return t?n:e}function Yf(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function sc(t,e){Yf(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function u2(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function l2(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const oc=new WeakMap,Xf=new WeakMap;function ac(t){return Xf.get(t)||1}function f2(t,e){return{constTimeNegate:ic,hasPrecomputes(n){return ac(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>Zf;)r&Qs&&(i=i.add(s)),s=s.double(),r>>=Qs;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=sc(r,e),o=[];let a=n,c=a;for(let u=0;u<i;u++){c=a,o.push(c);for(let l=1;l<s;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=sc(n,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**n-1),l=2**n,h=BigInt(n);for(let d=0;d<s;d++){const f=d*o;let p=Number(i&u);i>>=h,p>o&&(p-=l,i+=Qs);const y=f,m=f+Math.abs(p)-1,A=d%2!==0,$=p<0;p===0?c=c.add(ic(A,r[y])):a=a.add(ic($,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=sc(n,e),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let h=0;h<o;h++){const d=h*a;if(i===Zf)break;let f=Number(i&c);if(i>>=l,f>a&&(f-=u,i+=Qs),f===0)continue;let p=r[d+Math.abs(f)-1];f<0&&(p=p.negate()),s=s.add(p)}return s},getPrecomputes(n,r,i){let s=oc.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&oc.set(r,i(s))),s},wNAFCached(n,r,i){const s=ac(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=ac(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){Yf(r,e),Xf.set(n,r),oc.delete(n)}}}function h2(t,e,n,r){if(u2(n,t),l2(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Xm(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),u=Math.floor((e.BITS-1)/o)*o;let l=i;for(let h=u;h>=0;h-=o){c.fill(i);for(let f=0;f<r.length;f++){const p=r[f],y=Number(p>>BigInt(h)&BigInt(a));c[y]=c[y].add(n[f])}let d=i;for(let f=c.length-1,p=i;f>0;f--)p=p.add(c[f]),d=d.add(p);if(l=l.add(d),h!==0)for(let f=0;f<o;f++)l=l.double()}return l}function d2(t){return o2(t.Fp),nc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Gf(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const zt=BigInt(0),dt=BigInt(1),eo=BigInt(2),p2=BigInt(8),g2={zip215:!0};function b2(t){const e=d2(t);return nc(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function y2(t){const e=b2(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,u=eo<<BigInt(a*8)-dt,l=n.create,h=Wf(e.n,e.nBitLength),d=e.uvRatio||((g,w)=>{try{return{isValid:!0,value:n.sqrt(g*n.inv(w))}}catch{return{isValid:!1,value:zt}}}),f=e.adjustScalarBytes||(g=>g),p=e.domain||((g,w,S)=>{if(Ja("phflag",S),w.length||S)throw new Error("Contexts/pre-hash are not supported");return g});function y(g,w){ki("coordinate "+g,w,zt,u)}function m(g){if(!(g instanceof _))throw new Error("ExtendedPoint expected")}const A=zf((g,w)=>{const{ex:S,ey:O,ez:I}=g,B=g.is0();w==null&&(w=B?p2:n.inv(I));const P=l(S*w),L=l(O*w),C=l(I*w);if(B)return{x:zt,y:dt};if(C!==dt)throw new Error("invZ was invalid");return{x:P,y:L}}),$=zf(g=>{const{a:w,d:S}=e;if(g.is0())throw new Error("bad point: ZERO");const{ex:O,ey:I,ez:B,et:P}=g,L=l(O*O),C=l(I*I),k=l(B*B),N=l(k*k),q=l(L*w),z=l(k*l(q+C)),W=l(N+l(S*l(L*C)));if(z!==W)throw new Error("bad point: equation left != right (1)");const H=l(O*I),Z=l(B*P);if(H!==Z)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(w,S,O,I){this.ex=w,this.ey=S,this.ez=O,this.et=I,y("x",w),y("y",S),y("z",O),y("t",I),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof _)throw new Error("extended point not allowed");const{x:S,y:O}=w||{};return y("x",S),y("y",O),new _(S,O,dt,l(S*O))}static normalizeZ(w){const S=n.invertBatch(w.map(O=>O.ez));return w.map((O,I)=>O.toAffine(S[I])).map(_.fromAffine)}static msm(w,S){return h2(_,h,w,S)}_setWindowSize(w){R.setWindowSize(this,w)}assertValidity(){$(this)}equals(w){m(w);const{ex:S,ey:O,ez:I}=this,{ex:B,ey:P,ez:L}=w,C=l(S*L),k=l(B*I),N=l(O*L),q=l(P*I);return C===k&&N===q}is0(){return this.equals(_.ZERO)}negate(){return new _(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:w}=e,{ex:S,ey:O,ez:I}=this,B=l(S*S),P=l(O*O),L=l(eo*l(I*I)),C=l(w*B),k=S+O,N=l(l(k*k)-B-P),q=C+P,z=q-L,W=C-P,H=l(N*z),Z=l(q*W),Q=l(N*W),ee=l(z*q);return new _(H,Z,ee,Q)}add(w){m(w);const{a:S,d:O}=e,{ex:I,ey:B,ez:P,et:L}=this,{ex:C,ey:k,ez:N,et:q}=w;if(S===BigInt(-1)){const Fb=l((B-I)*(k+C)),Lb=l((B+I)*(k-C)),Vl=l(Lb-Fb);if(Vl===zt)return this.double();const kb=l(P*eo*q),qb=l(L*eo*N),Mb=qb+kb,jb=Lb+Fb,zb=qb-kb,ND=l(Mb*Vl),CD=l(jb*zb),UD=l(Mb*zb),FD=l(Vl*jb);return new _(ND,CD,FD,UD)}const z=l(I*C),W=l(B*k),H=l(L*O*q),Z=l(P*N),Q=l((I+B)*(C+k)-z-W),ee=Z-H,se=Z+H,he=l(W-S*z),Ee=l(Q*ee),qn=l(se*he),Da=l(Q*he),RD=l(ee*se);return new _(Ee,qn,RD,Da)}subtract(w){return this.add(w.negate())}wNAF(w){return R.wNAFCached(this,w,_.normalizeZ)}multiply(w){const S=w;ki("scalar",S,dt,r);const{p:O,f:I}=this.wNAF(S);return _.normalizeZ([O,I])[0]}multiplyUnsafe(w,S=_.ZERO){const O=w;return ki("scalar",O,zt,r),O===zt?T:this.is0()||O===dt?this:R.wNAFCachedUnsafe(this,O,_.normalizeZ,S)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return R.unsafeLadder(this,r).is0()}toAffine(w){return A(this,w)}clearCofactor(){const{h:w}=e;return w===dt?this:this.multiplyUnsafe(w)}static fromHex(w,S=!1){const{d:O,a:I}=e,B=n.BYTES;w=gn("pointHex",w,B),Ja("zip215",S);const P=w.slice(),L=w[B-1];P[B-1]=L&-129;const C=Js(P),k=S?u:n.ORDER;ki("pointHex.y",C,zt,k);const N=l(C*C),q=l(N-dt),z=l(O*N-I);let{isValid:W,value:H}=d(q,z);if(!W)throw new Error("Point.fromHex: invalid y coordinate");const Z=(H&dt)===dt,Q=(L&128)!==0;if(!S&&H===zt&&Q)throw new Error("Point.fromHex: x=0 and x_0=1");return Q!==Z&&(H=l(-H)),_.fromAffine({x:H,y:C})}static fromPrivateKey(w){return D(w).point}toRawBytes(){const{x:w,y:S}=this.toAffine(),O=ec(S,n.BYTES);return O[O.length-1]|=w&dt?128:0,O}toHex(){return Qa(this.toRawBytes())}}_.BASE=new _(e.Gx,e.Gy,dt,l(e.Gx*e.Gy)),_.ZERO=new _(zt,dt,dt,zt);const{BASE:x,ZERO:T}=_,R=f2(_,a*8);function F(g){return Be(g,r)}function U(g){return F(Js(g))}function D(g){const w=n.BYTES;g=gn("private key",g,w);const S=gn("hashed private key",s(g),2*w),O=f(S.slice(0,w)),I=S.slice(w,2*w),B=U(O),P=x.multiply(B),L=P.toRawBytes();return{head:O,prefix:I,scalar:B,point:P,pointBytes:L}}function j(g){return D(g).pointBytes}function M(g=new Uint8Array,...w){const S=jf(...w);return U(s(p(S,gn("context",g),!!i)))}function E(g,w,S={}){g=gn("message",g),i&&(g=i(g));const{prefix:O,scalar:I,pointBytes:B}=D(w),P=M(S.context,O,g),L=x.multiply(P).toRawBytes(),C=M(S.context,L,B,g),k=F(P+C*I);ki("signature.s",k,zt,r);const N=jf(L,ec(k,n.BYTES));return gn("result",N,n.BYTES*2)}const b=g2;function v(g,w,S,O=b){const{context:I,zip215:B}=O,P=n.BYTES;g=gn("signature",g,2*P),w=gn("message",w),S=gn("publicKey",S,P),B!==void 0&&Ja("zip215",B),i&&(w=i(w));const L=Js(g.slice(P,2*P));let C,k,N;try{C=_.fromHex(S,B),k=_.fromHex(g.slice(0,P),B),N=x.multiplyUnsafe(L)}catch{return!1}if(!B&&C.isSmallOrder())return!1;const q=M(I,k.toRawBytes(),C.toRawBytes(),w);return k.add(C.multiplyUnsafe(q)).subtract(N).clearCofactor().equals(_.ZERO)}return x._setWindowSize(8),{CURVE:e,getPublicKey:j,sign:E,verify:v,ExtendedPoint:_,utils:{getExtendedPublicKey:D,randomPrivateKey:()=>o(n.BYTES),precompute(g=8,w=_.BASE){return w._setWindowSize(g),w.multiply(BigInt(3)),w}}}}BigInt(0),BigInt(1);const cc=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Jf=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const w2=BigInt(1),Qf=BigInt(2);BigInt(3);const m2=BigInt(5),v2=BigInt(8);function E2(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=cc,o=t*t%s*t%s,a=nn(o,Qf,s)*o%s,c=nn(a,w2,s)*t%s,u=nn(c,m2,s)*c%s,l=nn(u,e,s)*u%s,h=nn(l,n,s)*l%s,d=nn(h,r,s)*h%s,f=nn(d,i,s)*d%s,p=nn(f,i,s)*d%s,y=nn(p,e,s)*u%s;return{pow_p_5_8:nn(y,Qf,s)*t%s,b2:o}}function x2(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function _2(t,e){const n=cc,r=Be(e*e*e,n),i=Be(r*r*e,n),s=E2(t*i).pow_p_5_8;let o=Be(t*r*s,n);const a=Be(e*o*o,n),c=o,u=Be(o*Jf,n),l=a===t,h=a===Be(-t,n),d=a===Be(-t*Jf,n);return l&&(o=c),(h||d)&&(o=u),i2(o,n)&&(o=Be(-o,n)),{isValid:l||h,value:o}}const S2=Wf(cc,void 0,!0),I2={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:S2,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:v2,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Km,randomBytes:Cf,adjustScalarBytes:x2,uvRatio:_2},eh=y2(I2),O2="EdDSA",A2="JWT",to=".",no="base64url",th="utf8",nh="utf8",B2=":",D2="did",$2="key",rh="base58btc",T2="z",P2="K36",R2=32;function uc(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ih(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?uc(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function sh(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const n=ih(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return uc(n)}function N2(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,m=0,A=0,$=p.length;A!==$&&p[A]===0;)A++,y++;for(var _=($-A)*l+1>>>0,x=new Uint8Array(_);A!==$;){for(var T=p[A],R=0,F=_-1;(T!==0||R<m)&&F!==-1;F--,R++)T+=256*x[F]>>>0,x[F]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");m=R,A++}for(var U=_-m;U!==_&&x[U]===0;)U++;for(var D=c.repeat(y);U<_;++U)D+=t.charAt(x[U]);return D}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var m=0,A=0;p[y]===c;)m++,y++;for(var $=(p.length-y)*u+1>>>0,_=new Uint8Array($);p[y];){var x=n[p.charCodeAt(y)];if(x===255)return;for(var T=0,R=$-1;(x!==0||T<A)&&R!==-1;R--,T++)x+=a*_[R]>>>0,_[R]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");A=T,y++}if(p[y]!==" "){for(var F=$-A;F!==$&&_[F]===0;)F++;for(var U=new Uint8Array(m+($-F)),D=m;F!==$;)U[D++]=_[F++];return U}}}function f(p){var y=d(p);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var C2=N2,U2=C2;const oh=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},F2=t=>new TextEncoder().encode(t),L2=t=>new TextDecoder().decode(t);class k2{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class q2{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ah(this,e)}}class M2{constructor(e){this.decoders=e}or(e){return ah(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ah=(t,e)=>new M2({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class j2{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new k2(e,n,r),this.decoder=new q2(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ro=({name:t,prefix:e,encode:n,decode:r})=>new j2(t,e,n,r),qi=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=U2(n,e);return ro({prefix:t,name:e,encode:r,decode:s=>oh(i(s))})},z2=(t,e,n,r)=>{const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const h=i[t[l]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|h,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},V2=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},ke=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>ro({prefix:e,name:t,encode(i){return V2(i,r,n)},decode(i){return z2(i,r,n,t)}}),H2=ro({prefix:"\0",name:"identity",encode:t=>L2(t),decode:t=>F2(t)});var K2=Object.freeze({__proto__:null,identity:H2});const G2=ke({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var W2=Object.freeze({__proto__:null,base2:G2});const Z2=ke({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Y2=Object.freeze({__proto__:null,base8:Z2});const X2=qi({prefix:"9",name:"base10",alphabet:"0123456789"});var J2=Object.freeze({__proto__:null,base10:X2});const Q2=ke({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ev=ke({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var tv=Object.freeze({__proto__:null,base16:Q2,base16upper:ev});const nv=ke({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),rv=ke({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iv=ke({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sv=ke({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ov=ke({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),av=ke({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cv=ke({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uv=ke({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),lv=ke({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var fv=Object.freeze({__proto__:null,base32:nv,base32upper:rv,base32pad:iv,base32padupper:sv,base32hex:ov,base32hexupper:av,base32hexpad:cv,base32hexpadupper:uv,base32z:lv});const hv=qi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dv=qi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var pv=Object.freeze({__proto__:null,base36:hv,base36upper:dv});const gv=qi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bv=qi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var yv=Object.freeze({__proto__:null,base58btc:gv,base58flickr:bv});const wv=ke({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mv=ke({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vv=ke({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ev=ke({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var xv=Object.freeze({__proto__:null,base64:wv,base64pad:mv,base64url:vv,base64urlpad:Ev});const ch=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),_v=ch.reduce((t,e,n)=>(t[n]=e,t),[]),Sv=ch.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Iv(t){return t.reduce((e,n)=>(e+=_v[n],e),"")}function Ov(t){const e=[];for(const n of t){const r=Sv[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Av=ro({prefix:"\u{1F680}",name:"base256emoji",encode:Iv,decode:Ov});var Bv=Object.freeze({__proto__:null,base256emoji:Av}),Dv=lh,uh=128,$v=127,Tv=~$v,Pv=Math.pow(2,31);function lh(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Pv;)e[n++]=t&255|uh,t/=128;for(;t&Tv;)e[n++]=t&255|uh,t>>>=7;return e[n]=t|0,lh.bytes=n-r+1,e}var Rv=lc,Nv=128,fh=127;function lc(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw lc.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&fh)<<i:(o&fh)*Math.pow(2,i),i+=7}while(o>=Nv);return lc.bytes=s-r,n}var Cv=Math.pow(2,7),Uv=Math.pow(2,14),Fv=Math.pow(2,21),Lv=Math.pow(2,28),kv=Math.pow(2,35),qv=Math.pow(2,42),Mv=Math.pow(2,49),jv=Math.pow(2,56),zv=Math.pow(2,63),Vv=function(t){return t<Cv?1:t<Uv?2:t<Fv?3:t<Lv?4:t<kv?5:t<qv?6:t<Mv?7:t<jv?8:t<zv?9:10},Hv={encode:Dv,decode:Rv,encodingLength:Vv},hh=Hv;const dh=(t,e,n=0)=>(hh.encode(t,e,n),e),ph=t=>hh.encodingLength(t),fc=(t,e)=>{const n=e.byteLength,r=ph(t),i=r+ph(n),s=new Uint8Array(i+n);return dh(t,s,0),dh(n,s,r),s.set(e,i),new Kv(t,n,e,s)};class Kv{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}}const gh=({name:t,code:e,encode:n})=>new Gv(t,e,n);class Gv{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?fc(this.code,n):n.then(r=>fc(this.code,r))}else throw Error("Unknown type, must be binary type")}}const bh=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Wv=gh({name:"sha2-256",code:18,encode:bh("SHA-256")}),Zv=gh({name:"sha2-512",code:19,encode:bh("SHA-512")});var Yv=Object.freeze({__proto__:null,sha256:Wv,sha512:Zv});const yh=0,Xv="identity",wh=oh;var Jv=Object.freeze({__proto__:null,identity:{code:yh,name:Xv,encode:wh,digest:t=>fc(yh,wh(t))}});new TextEncoder,new TextDecoder;const mh={...K2,...W2,...Y2,...J2,...tv,...fv,...pv,...yv,...xv,...Bv};({...Yv,...Jv});function vh(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Eh=vh("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),hc=vh("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=ih(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),xh={utf8:Eh,"utf-8":Eh,hex:mh.base16,latin1:hc,ascii:hc,binary:hc,...mh};function io(t,e="utf8"){const n=xh[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function ri(t,e="utf8"){const n=xh[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?uc(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function _h(t){return ei(io(ri(t,no),th))}function so(t){return io(ri(Or(t),th),no)}function Sh(t){const e=ri(P2,rh),n=T2+io(sh([e,t]),rh);return[D2,$2,n].join(B2)}function Qv(t){return io(t,no)}function eE(t){return ri(t,no)}function tE(t){return ri([so(t.header),so(t.payload)].join(to),nh)}function nE(t){return[so(t.header),so(t.payload),Qv(t.signature)].join(to)}function dc(t){const e=t.split(to),n=_h(e[0]),r=_h(e[1]),i=eE(e[2]),s=ri(e.slice(0,2).join(to),nh);return{header:n,payload:r,signature:i,data:s}}function Ih(t=Cf(R2)){const e=eh.getPublicKey(t);return{secretKey:sh([t,e]),publicKey:e}}async function rE(t,e,n,r,i=K.fromMiliseconds(Date.now())){const s={alg:O2,typ:A2},o=Sh(r.publicKey),a=i+n,c={iss:o,sub:t,aud:e,iat:i,exp:a},u=tE({header:s,payload:c}),l=eh.sign(u,r.secretKey.slice(0,32));return nE({header:s,payload:c,signature:l})}var Oh=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},iE=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),sE=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),oE=function(){function t(e,n,r,i){this.name=e,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return t}(),aE=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),cE=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),uE=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,lE=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ah=3,fE=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",uE]],Bh=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function hE(t){return t?Dh(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new cE:typeof navigator<"u"?Dh(navigator.userAgent):gE()}function dE(t){return t!==""&&fE.reduce(function(e,n){var r=n[0],i=n[1];if(e)return e;var s=i.exec(t);return!!s&&[r,s]},!1)}function Dh(t){var e=dE(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new aE;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<Ah&&(i=Oh(Oh([],i,!0),bE(Ah-i.length),!0)):i=[];var s=i.join("."),o=pE(t),a=lE.exec(t);return a&&a[1]?new oE(n,s,o,a[1]):new iE(n,s,o)}function pE(t){for(var e=0,n=Bh.length;e<n;e++){var r=Bh[e],i=r[0],s=r[1],o=s.exec(t);if(o)return i}return null}function gE(){var t=typeof process<"u"&&process.version;return t?new sE(process.version.slice(1)):null}function bE(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var we={};Object.defineProperty(we,"__esModule",{value:!0}),we.getLocalStorage=we.getLocalStorageOrThrow=we.getCrypto=we.getCryptoOrThrow=$h=we.getLocation=we.getLocationOrThrow=pc=we.getNavigator=we.getNavigatorOrThrow=$r=we.getDocument=we.getDocumentOrThrow=we.getFromWindowOrThrow=we.getFromWindow=void 0;function Dr(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}we.getFromWindow=Dr;function ii(t){const e=Dr(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}we.getFromWindowOrThrow=ii;function yE(){return ii("document")}we.getDocumentOrThrow=yE;function wE(){return Dr("document")}var $r=we.getDocument=wE;function mE(){return ii("navigator")}we.getNavigatorOrThrow=mE;function vE(){return Dr("navigator")}var pc=we.getNavigator=vE;function EE(){return ii("location")}we.getLocationOrThrow=EE;function xE(){return Dr("location")}var $h=we.getLocation=xE;function _E(){return ii("crypto")}we.getCryptoOrThrow=_E;function SE(){return Dr("crypto")}we.getCrypto=SE;function IE(){return ii("localStorage")}we.getLocalStorageOrThrow=IE;function OE(){return Dr("localStorage")}we.getLocalStorage=OE;var gc={};Object.defineProperty(gc,"__esModule",{value:!0});var Th=gc.getWindowMetadata=void 0;const Ph=we;function AE(){let t,e;try{t=Ph.getDocumentOrThrow(),e=Ph.getLocationOrThrow()}catch{return null}function n(){const h=t.getElementsByTagName("link"),d=[];for(let f=0;f<h.length;f++){const p=h[f],y=p.getAttribute("rel");if(y&&y.toLowerCase().indexOf("icon")>-1){const m=p.getAttribute("href");if(m)if(m.toLowerCase().indexOf("https:")===-1&&m.toLowerCase().indexOf("http:")===-1&&m.indexOf("//")!==0){let A=e.protocol+"//"+e.host;if(m.indexOf("/")===0)A+=m;else{const $=e.pathname.split("/");$.pop();const _=$.join("/");A+=_+"/"+m}d.push(A)}else if(m.indexOf("//")===0){const A=e.protocol+m;d.push(A)}else d.push(m)}}return d}function r(...h){const d=t.getElementsByTagName("meta");for(let f=0;f<d.length;f++){const p=d[f],y=["itemprop","property","name"].map(m=>p.getAttribute(m)).filter(m=>m?h.includes(m):!1);if(y.length&&y){const m=p.getAttribute("content");if(m)return m}}return""}function i(){let h=r("name","og:site_name","og:title","twitter:title");return h||(h=t.title),h}function s(){return r("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,u=n();return{description:a,url:c,icons:u,name:o}}Th=gc.getWindowMetadata=AE;const BE="0.1.1";function DE(){return BE}class be extends Error{constructor(e,n={}){const r=(()=>{if(n.cause instanceof be){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),i=n.cause instanceof be&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${i??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${DE()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return Rh(this,e)}}function Rh(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?Rh(t.cause,e):e?null:t}const si=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function oo(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function oi(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function bn(t,...e){if(!oo(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Nh(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");oi(t.outputLen),oi(t.blockLen)}function ai(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ch(t,e){bn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function $E(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Hn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function bc(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function rn(t,e){return t<<32-e|t>>>e}const TE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function PE(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function RE(t){for(let e=0;e<t.length;e++)t[e]=PE(t[e]);return t}const Uh=TE?t=>t:RE,Fh=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",NE=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ci(t){if(bn(t),Fh)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=NE[t[n]];return e}const yn={_0:48,_9:57,A:65,F:70,a:97,f:102};function Lh(t){if(t>=yn._0&&t<=yn._9)return t-yn._0;if(t>=yn.A&&t<=yn.F)return t-(yn.A-10);if(t>=yn.a&&t<=yn.f)return t-(yn.a-10)}function ao(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Fh)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=Lh(t.charCodeAt(s)),a=Lh(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function yc(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function co(t){return typeof t=="string"&&(t=yc(t)),bn(t),t}function wn(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];bn(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class wc{}function uo(t){const e=r=>t().update(co(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function lo(t=32){if(si&&typeof si.getRandomValues=="function")return si.getRandomValues(new Uint8Array(t));if(si&&typeof si.randomBytes=="function")return Uint8Array.from(si.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function CE(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function UE(t,e,n){return t&e^~t&n}function FE(t,e,n){return t&e^t&n^e&n}class kh extends wc{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=bc(this.buffer)}update(e){ai(this),e=co(e),bn(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=bc(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ai(this),Ch(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,Hn(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;CE(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=bc(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const mn=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ke=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Ge=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),fo=BigInt(2**32-1),qh=BigInt(32);function LE(t,e=!1){return e?{h:Number(t&fo),l:Number(t>>qh&fo)}:{h:Number(t>>qh&fo)|0,l:Number(t&fo)|0}}function Mh(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=LE(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const jh=(t,e,n)=>t>>>n,zh=(t,e,n)=>t<<32-n|e>>>n,ui=(t,e,n)=>t>>>n|e<<32-n,li=(t,e,n)=>t<<32-n|e>>>n,ho=(t,e,n)=>t<<64-n|e>>>n-32,po=(t,e,n)=>t>>>n-32|e<<64-n,kE=(t,e,n)=>t<<n|e>>>32-n,qE=(t,e,n)=>e<<n|t>>>32-n,ME=(t,e,n)=>e<<n-32|t>>>64-n,jE=(t,e,n)=>t<<n-32|e>>>64-n;function vn(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const zE=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),VE=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,HE=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),KE=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,GE=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),WE=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,ZE=BigInt(0),Mi=BigInt(1),YE=BigInt(2),XE=BigInt(7),JE=BigInt(256),QE=BigInt(113),Vh=[],Hh=[],Kh=[];for(let t=0,e=Mi,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Vh.push(2*(5*r+n)),Hh.push((t+1)*(t+2)/2%64);let i=ZE;for(let s=0;s<7;s++)e=(e<<Mi^(e>>XE)*QE)%JE,e&YE&&(i^=Mi<<(Mi<<BigInt(s))-Mi);Kh.push(i)}const Gh=Mh(Kh,!0),e3=Gh[0],t3=Gh[1],Wh=(t,e,n)=>n>32?ME(t,e,n):kE(t,e,n),Zh=(t,e,n)=>n>32?jE(t,e,n):qE(t,e,n);function n3(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],h=Wh(u,l,1)^n[a],d=Zh(u,l,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=h,t[o+f+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=Hh[o],c=Wh(i,s,a),u=Zh(i,s,a),l=Vh[o];i=t[l],s=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=e3[r],t[1]^=t3[r]}Hn(n)}class mc extends wc{constructor(e,n,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,oi(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=$E(this.state)}clone(){return this._cloneInto()}keccak(){Uh(this.state32),n3(this.state32,this.rounds),Uh(this.state32),this.posOut=0,this.pos=0}update(e){ai(this),e=co(e),bn(e);const{blockLen:n,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ai(this,!1),bn(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return oi(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Ch(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Hn(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new mc(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const r3=(t,e,n)=>uo(()=>new mc(e,t,n)),i3=r3(1,136,256/8),s3=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kn=new Uint32Array(64);class o3 extends kh{constructor(e=32){super(64,e,8,!1),this.A=mn[0]|0,this.B=mn[1]|0,this.C=mn[2]|0,this.D=mn[3]|0,this.E=mn[4]|0,this.F=mn[5]|0,this.G=mn[6]|0,this.H=mn[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let h=0;h<16;h++,n+=4)Kn[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const d=Kn[h-15],f=Kn[h-2],p=rn(d,7)^rn(d,18)^d>>>3,y=rn(f,17)^rn(f,19)^f>>>10;Kn[h]=y+Kn[h-7]+p+Kn[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:u,H:l}=this;for(let h=0;h<64;h++){const d=rn(a,6)^rn(a,11)^rn(a,25),f=l+d+UE(a,c,u)+s3[h]+Kn[h]|0,y=(rn(r,2)^rn(r,13)^rn(r,22))+FE(r,i,s)|0;l=u,u=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+y|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,i,s,o,a,c,u,l)}roundClean(){Hn(Kn)}destroy(){this.set(0,0,0,0,0,0,0,0),Hn(this.buffer)}}const Yh=Mh(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),a3=Yh[0],c3=Yh[1],Gn=new Uint32Array(80),Wn=new Uint32Array(80);class Xh extends kh{constructor(e=64){super(128,e,16,!1),this.Ah=Ge[0]|0,this.Al=Ge[1]|0,this.Bh=Ge[2]|0,this.Bl=Ge[3]|0,this.Ch=Ge[4]|0,this.Cl=Ge[5]|0,this.Dh=Ge[6]|0,this.Dl=Ge[7]|0,this.Eh=Ge[8]|0,this.El=Ge[9]|0,this.Fh=Ge[10]|0,this.Fl=Ge[11]|0,this.Gh=Ge[12]|0,this.Gl=Ge[13]|0,this.Hh=Ge[14]|0,this.Hl=Ge[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:h,Fl:d,Gh:f,Gl:p,Hh:y,Hl:m}=this;return[e,n,r,i,s,o,a,c,u,l,h,d,f,p,y,m]}set(e,n,r,i,s,o,a,c,u,l,h,d,f,p,y,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=p|0,this.Hh=y|0,this.Hl=m|0}process(e,n){for(let _=0;_<16;_++,n+=4)Gn[_]=e.getUint32(n),Wn[_]=e.getUint32(n+=4);for(let _=16;_<80;_++){const x=Gn[_-15]|0,T=Wn[_-15]|0,R=ui(x,T,1)^ui(x,T,8)^jh(x,T,7),F=li(x,T,1)^li(x,T,8)^zh(x,T,7),U=Gn[_-2]|0,D=Wn[_-2]|0,j=ui(U,D,19)^ho(U,D,61)^jh(U,D,6),M=li(U,D,19)^po(U,D,61)^zh(U,D,6),E=HE(F,M,Wn[_-7],Wn[_-16]),b=KE(E,R,j,Gn[_-7],Gn[_-16]);Gn[_]=b|0,Wn[_]=E|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:h,El:d,Fh:f,Fl:p,Gh:y,Gl:m,Hh:A,Hl:$}=this;for(let _=0;_<80;_++){const x=ui(h,d,14)^ui(h,d,18)^ho(h,d,41),T=li(h,d,14)^li(h,d,18)^po(h,d,41),R=h&f^~h&y,F=d&p^~d&m,U=GE($,T,F,c3[_],Wn[_]),D=WE(U,A,x,R,a3[_],Gn[_]),j=U|0,M=ui(r,i,28)^ho(r,i,34)^ho(r,i,39),E=li(r,i,28)^po(r,i,34)^po(r,i,39),b=r&s^r&a^s&a,v=i&o^i&c^o&c;A=y|0,$=m|0,y=f|0,m=p|0,f=h|0,p=d|0,{h,l:d}=vn(u|0,l|0,D|0,j|0),u=a|0,l=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const g=zE(j,E,v);r=VE(g,D,M,b),i=g|0}({h:r,l:i}=vn(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=vn(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=vn(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=vn(this.Dh|0,this.Dl|0,u|0,l|0),{h,l:d}=vn(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:p}=vn(this.Fh|0,this.Fl|0,f|0,p|0),{h:y,l:m}=vn(this.Gh|0,this.Gl|0,y|0,m|0),{h:A,l:$}=vn(this.Hh|0,this.Hl|0,A|0,$|0),this.set(r,i,s,o,a,c,u,l,h,d,f,p,y,m,A,$)}roundClean(){Hn(Gn,Wn)}destroy(){Hn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class u3 extends Xh{constructor(){super(48),this.Ah=Ke[0]|0,this.Al=Ke[1]|0,this.Bh=Ke[2]|0,this.Bl=Ke[3]|0,this.Ch=Ke[4]|0,this.Cl=Ke[5]|0,this.Dh=Ke[6]|0,this.Dl=Ke[7]|0,this.Eh=Ke[8]|0,this.El=Ke[9]|0,this.Fh=Ke[10]|0,this.Fl=Ke[11]|0,this.Gh=Ke[12]|0,this.Gl=Ke[13]|0,this.Hh=Ke[14]|0,this.Hl=Ke[15]|0}}const fi=uo(()=>new o3),l3=uo(()=>new Xh),f3=uo(()=>new u3);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vc=BigInt(0),go=BigInt(1);function ji(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Zn(t){if(!ji(t))throw new Error("Uint8Array expected")}function zi(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function bo(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Jh(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?vc:BigInt("0x"+t)}const Qh=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",h3=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Tr(t){if(Zn(t),Qh)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=h3[t[n]];return e}const En={_0:48,_9:57,A:65,F:70,a:97,f:102};function ed(t){if(t>=En._0&&t<=En._9)return t-En._0;if(t>=En.A&&t<=En.F)return t-(En.A-10);if(t>=En.a&&t<=En.f)return t-(En.a-10)}function yo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Qh)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=ed(t.charCodeAt(s)),a=ed(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function nt(t){return Jh(Tr(t))}function td(t){return Zn(t),Jh(Tr(Uint8Array.from(t).reverse()))}function De(t,e){return yo(t.toString(16).padStart(e*2,"0"))}function nd(t,e){return De(t,e).reverse()}function We(t,e,n){let r;if(typeof e=="string")try{r=yo(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(ji(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function Se(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Zn(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function Ec(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const xc=t=>typeof t=="bigint"&&vc<=t;function _c(t,e,n){return xc(t)&&xc(e)&&xc(n)&&e<=t&&t<n}function hi(t,e,n,r){if(!_c(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Vi(t){let e;for(e=0;t>vc;t>>=go,e+=1);return e}function d3(t,e){return t>>BigInt(e)&go}const Pr=t=>(go<<BigInt(t))-go,Sc=t=>new Uint8Array(t),rd=t=>Uint8Array.from(t);function p3(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Sc(t),i=Sc(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...h)=>n(i,r,...h),c=(h=Sc(0))=>{i=a(rd([0]),h),r=a(),h.length!==0&&(i=a(rd([1]),h),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const d=[];for(;h<e;){r=a();const f=r.slice();d.push(f),h+=r.length}return Se(...d)};return(h,d)=>{o(),c(h);let f;for(;!(f=d(u()));)c();return o(),f}}const g3={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ji(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Hi(t,e,n={}){const r=(i,s,o)=>{const a=g3[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const id=()=>{throw new Error("not implemented")};function Ic(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}function b3(t,e){if(ld(t)>e)throw new L3({givenSize:ld(t),maxSize:e})}const xn={zero:48,nine:57,A:65,F:70,a:97,f:102};function sd(t){if(t>=xn.zero&&t<=xn.nine)return t-xn.zero;if(t>=xn.A&&t<=xn.F)return t-(xn.A-10);if(t>=xn.a&&t<=xn.f)return t-(xn.a-10)}function y3(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new k3({size:t.length,targetSize:r,type:"Bytes"});const i=new Uint8Array(r);for(let s=0;s<r;s++){const o=n==="right";i[o?s:r-s-1]=t[o?s:t.length-s-1]}return i}function Oc(t,e){if(Sn(t)>e)throw new B3({givenSize:Sn(t),maxSize:e})}function w3(t,e){if(typeof e=="number"&&e>0&&e>Sn(t)-1)throw new ud({offset:e,position:"start",size:Sn(t)})}function m3(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Sn(t)!==n-e)throw new ud({offset:n,position:"end",size:Sn(t)})}function od(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const i=t.replace("0x","");if(i.length>r*2)throw new D3({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const v3="#__bigint";function Ac(t,e,n){return JSON.stringify(t,(r,i)=>typeof e=="function"?e(r,i):typeof i=="bigint"?i.toString()+v3:i,n)}const E3=new TextEncoder,x3=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _3(t,e={}){const{strict:n=!1}=e;if(!t)throw new ad(t);if(typeof t!="string")throw new ad(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new cd(t);if(!t.startsWith("0x"))throw new cd(t)}function Bc(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Dc(t){return t instanceof Uint8Array?Ki(t):Array.isArray(t)?Ki(new Uint8Array(t)):t}function S3(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Oc(n,e.size),mo(n,e.size)):n}function Ki(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=x3[t[i]];const r=`0x${n}`;return typeof e.size=="number"?(Oc(r,e.size),$c(r,e.size)):r}function wo(t,e={}){const{signed:n,size:r}=e,i=BigInt(t);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&i>s||i<o){const u=typeof t=="bigint"?"n":"";throw new A3({max:s?`${s}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${t}${u}`})}const c=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?mo(c,r):c}function I3(t,e={}){return Ki(E3.encode(t),e)}function mo(t,e){return od(t,{dir:"left",size:e})}function $c(t,e){return od(t,{dir:"right",size:e})}function _n(t,e,n,r={}){const{strict:i}=r;w3(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return i&&m3(s,e,n),s}function Sn(t){return Math.ceil((t.length-2)/2)}function O3(t,e={}){const{strict:n=!1}=e;try{return _3(t,{strict:n}),!0}catch{return!1}}class A3 extends be{constructor({max:e,min:n,signed:r,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class ad extends be{constructor(e){super(`Value \`${typeof e=="object"?Ac(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class cd extends be{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class B3 extends be{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class ud extends be{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class D3 extends be{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}const $3=new TextEncoder;function T3(t){if(!(t instanceof Uint8Array)){if(!t)throw new vo(t);if(typeof t!="object")throw new vo(t);if(!("BYTES_PER_ELEMENT"in t))throw new vo(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new vo(t)}}function P3(t){return t instanceof Uint8Array?t:typeof t=="string"?N3(t):R3(t)}function R3(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function N3(t,e={}){const{size:n}=e;let r=t;n&&(Oc(t,n),r=$c(t,n));let i=r.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const u=sd(i.charCodeAt(c++)),l=sd(i.charCodeAt(c++));if(u===void 0||l===void 0)throw new be(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=u*16+l}return o}function C3(t,e={}){const{size:n}=e,r=$3.encode(t);return typeof n=="number"?(b3(r,n),U3(r,n)):r}function U3(t,e){return y3(t,{dir:"right",size:e})}function ld(t){return t.length}function F3(t){try{return T3(t),!0}catch{return!1}}class vo extends be{constructor(e){super(`Value \`${typeof e=="object"?Ac(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class L3 extends be{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class k3 extends be{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function fd(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=i3(P3(t));return n==="Bytes"?r:Ki(r)}class q3 extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Tc={checksum:new q3(8192)}.checksum;function hd(t,e={}){const{compressed:n}=e,{prefix:r,x:i,y:s}=t;if(n===!1||typeof i=="bigint"&&typeof s=="bigint"){if(r!==4)throw new pd({prefix:r,cause:new K3});return}if(n===!0||typeof i=="bigint"&&typeof s>"u"){if(r!==3&&r!==2)throw new pd({prefix:r,cause:new H3});return}throw new V3({publicKey:t})}function M3(t){const e=(()=>{if(O3(t))return dd(t);if(F3(t))return j3(t);const{prefix:n,x:r,y:i}=t;return typeof r=="bigint"&&typeof i=="bigint"?{prefix:n??4,x:r,y:i}:{prefix:n,x:r}})();return hd(e),e}function j3(t){return dd(Ki(t))}function dd(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new G3({publicKey:t});if(t.length===130){const r=BigInt(_n(t,0,32)),i=BigInt(_n(t,32,64));return{prefix:4,x:r,y:i}}if(t.length===132){const r=Number(_n(t,0,1)),i=BigInt(_n(t,1,33)),s=BigInt(_n(t,33,65));return{prefix:r,x:i,y:s}}const e=Number(_n(t,0,1)),n=BigInt(_n(t,1,33));return{prefix:e,x:n}}function z3(t,e={}){hd(t);const{prefix:n,x:r,y:i}=t,{includePrefix:s=!0}=e;return Bc(s?wo(n,{size:1}):"0x",wo(r,{size:32}),typeof i=="bigint"?wo(i,{size:32}):"0x")}class V3 extends be{constructor({publicKey:e}){super(`Value \`${Ac(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class pd extends be{constructor({prefix:e,cause:n}){super(`Prefix "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class H3 extends be{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class K3 extends be{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class G3 extends be{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${Sn(Dc(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}const W3=/^0x[a-fA-F0-9]{40}$/;function Pc(t,e={}){const{strict:n=!0}=e;if(!W3.test(t))throw new bd({address:t,cause:new X3});if(n){if(t.toLowerCase()===t)return;if(gd(t)!==t)throw new bd({address:t,cause:new J3})}}function gd(t){if(Tc.has(t))return Tc.get(t);Pc(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=fd(C3(e),{as:"Bytes"}),r=e.split("");for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&r[s]&&(r[s]=r[s].toUpperCase()),(n[s>>1]&15)>=8&&r[s+1]&&(r[s+1]=r[s+1].toUpperCase());const i=`0x${r.join("")}`;return Tc.set(t,i),i}function Z3(t,e={}){const{checksum:n=!1}=e;return Pc(t),n?gd(t):t}function Y3(t,e={}){const n=fd(`0x${z3(t).slice(4)}`).substring(26);return Z3(`0x${n}`,e)}class bd extends be{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class X3 extends be{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class J3 extends be{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const Q3=/^(.*)\[([0-9]*)\]$/,e8=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,t8=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Rc(t,e){if(t.length!==e.length)throw new r8({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const i=t[r],s=e[r];n.push(Rc.encode(i,s))}return Bc(...n)}(function(t){function e(n,r,i=!1){if(n==="address"){const c=r;return Pc(c),mo(c.toLowerCase(),i?32:0)}if(n==="string")return I3(r);if(n==="bytes")return r;if(n==="bool")return mo(S3(r),i?32:1);const s=n.match(t8);if(s){const[c,u,l="256"]=s,h=Number.parseInt(l,10)/8;return wo(r,{size:i?32:h,signed:u==="int"})}const o=n.match(e8);if(o){const[c,u]=o;if(Number.parseInt(u,10)!==(r.length-2)/2)throw new n8({expectedSize:Number.parseInt(u,10),value:r});return $c(r,i?32:0)}const a=n.match(Q3);if(a&&Array.isArray(r)){const[c,u]=a,l=[];for(let h=0;h<r.length;h++)l.push(e(u,r[h],!0));return l.length===0?"0x":Bc(...l)}throw new i8(n)}t.encode=e})(Rc||(Rc={}));class n8 extends be{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Sn(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class r8 extends be{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class i8 extends be{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class yd extends wc{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Nh(e);const r=co(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Hn(s)}update(e){return ai(this),this.iHash.update(e),this}digestInto(e){ai(this),bn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Nc=(t,e,n)=>new yd(t,e).update(n).digest();Nc.create=(t,e)=>new yd(t,e);const pt=BigInt(0),rt=BigInt(1),Rr=BigInt(2),s8=BigInt(3),wd=BigInt(4),md=BigInt(5),vd=BigInt(8);function it(t,e){const n=t%e;return n>=pt?n:e+n}function Pt(t,e,n){let r=t;for(;e-- >pt;)r*=r,r%=n;return r}function Cc(t,e){if(t===pt)throw new Error("invert: expected non-zero number");if(e<=pt)throw new Error("invert: expected positive modulus, got "+e);let n=it(t,e),r=e,i=pt,s=rt;for(;n!==pt;){const a=r/n,c=r%n,u=i-s*a;r=n,n=c,i=s,s=u}if(r!==rt)throw new Error("invert: does not exist");return it(i,e)}function Ed(t,e){const n=(t.ORDER+rt)/wd,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function o8(t,e){const n=(t.ORDER-md)/vd,r=t.mul(e,Rr),i=t.pow(r,n),s=t.mul(e,i),o=t.mul(t.mul(s,Rr),i),a=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function a8(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-rt,n=0;for(;e%Rr===pt;)e/=Rr,n++;let r=Rr;const i=Yn(t);for(;xo(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Ed;let s=i.pow(r,e);const o=(e+rt)/Rr;return function(c,u){if(c.is0(u))return u;if(xo(c,u)!==1)throw new Error("Cannot find square root");let l=n,h=c.mul(c.ONE,s),d=c.pow(u,e),f=c.pow(u,o);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let p=1,y=c.sqr(d);for(;!c.eql(y,c.ONE);)if(p++,y=c.sqr(y),p===l)throw new Error("Cannot find square root");const m=rt<<BigInt(l-p-1),A=c.pow(h,m);l=p,h=c.sqr(A),d=c.mul(d,h),f=c.mul(f,A)}return f}}function c8(t){return t%wd===s8?Ed:t%vd===md?o8:a8(t)}const u8=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function xd(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=u8.reduce((r,i)=>(r[i]="function",r),e);return Hi(t,n)}function Eo(t,e,n){if(n<pt)throw new Error("invalid exponent, negatives unsupported");if(n===pt)return t.ONE;if(n===rt)return e;let r=t.ONE,i=e;for(;n>pt;)n&rt&&(r=t.mul(r,i)),i=t.sqr(i),n>>=rt;return r}function Nr(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),s),r}function xo(t,e){const n=(t.ORDER-rt)/Rr,r=t.pow(e,n),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function _d(t,e){e!==void 0&&oi(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Yn(t,e,n=!1,r={}){if(t<=pt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=_d(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:Pr(i),ZERO:pt,ONE:rt,create:c=>it(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return pt<=c&&c<t},is0:c=>c===pt,isOdd:c=>(c&rt)===rt,neg:c=>it(-c,t),eql:(c,u)=>c===u,sqr:c=>it(c*c,t),add:(c,u)=>it(c+u,t),sub:(c,u)=>it(c-u,t),mul:(c,u)=>it(c*u,t),pow:(c,u)=>Eo(a,c,u),div:(c,u)=>it(c*Cc(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Cc(c,t),sqrt:r.sqrt||(c=>(o||(o=c8(t)),o(a,c))),toBytes:c=>n?nd(c,s):De(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?td(c):nt(c)},invertBatch:c=>Nr(a,c),cmov:(c,u,l)=>l?u:c});return Object.freeze(a)}function Sd(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Uc(t){const e=Sd(t);return e+Math.ceil(e/2)}function Id(t,e,n=!1){const r=t.length,i=Sd(e),s=Uc(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?td(t):nt(t),a=it(o,e-rt)+rt;return n?nd(a,i):De(a,i)}const Od=BigInt(0),Fc=BigInt(1);function Lc(t,e){const n=e.negate();return t?n:e}function Ad(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function kc(t,e){Ad(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),i=2**t,s=Pr(t),o=BigInt(t);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function Bd(t,e,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(t&i),c=t>>o;a>r&&(a-=s,c+=Fc);const u=e*r,l=u+Math.abs(a)-1,h=a===0,d=a<0,f=e%2!==0;return{nextN:c,offset:l,isZero:h,isNeg:d,isNegF:f,offsetF:u}}function l8(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function f8(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const qc=new WeakMap,Dd=new WeakMap;function Mc(t){return Dd.get(t)||1}function h8(t,e){return{constTimeNegate:Lc,hasPrecomputes(n){return Mc(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>Od;)r&Fc&&(i=i.add(s)),s=s.double(),r>>=Fc;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=kc(r,e),o=[];let a=n,c=a;for(let u=0;u<i;u++){c=a,o.push(c);for(let l=1;l<s;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){let s=t.ZERO,o=t.BASE;const a=kc(n,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:h,isNeg:d,isNegF:f,offsetF:p}=Bd(i,c,a);i=u,h?o=o.add(Lc(f,r[p])):s=s.add(Lc(d,r[l]))}return{p:s,f:o}},wNAFUnsafe(n,r,i,s=t.ZERO){const o=kc(n,e);for(let a=0;a<o.windows&&i!==Od;a++){const{nextN:c,offset:u,isZero:l,isNeg:h}=Bd(i,a,o);if(i=c,!l){const d=r[u];s=s.add(h?d.negate():d)}}return s},getPrecomputes(n,r,i){let s=qc.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&qc.set(r,i(s))),s},wNAFCached(n,r,i){const s=Mc(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=Mc(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){Ad(r,e),Dd.set(n,r),qc.delete(n)}}}function d8(t,e,n,r){l8(n,t),f8(r,e);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Vi(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=Pr(c),l=new Array(Number(u)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let d=o;for(let f=h;f>=0;f-=c){l.fill(o);for(let y=0;y<s;y++){const m=r[y],A=Number(m>>BigInt(f)&u);l[A]=l[A].add(n[y])}let p=o;for(let y=l.length-1,m=o;y>0;y--)m=m.add(l[y]),p=p.add(m);if(d=d.add(p),f!==0)for(let y=0;y<c;y++)d=d.double()}return d}function $d(t){return xd(t.Fp),Hi(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({..._d(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function Td(t){t.lowS!==void 0&&zi("lowS",t.lowS),t.prehash!==void 0&&zi("prehash",t.prehash)}function p8(t){const e=$d(t);Hi(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class g8 extends Error{constructor(e=""){super(e)}}const In={Err:g8,_tlv:{encode:(t,e)=>{const{Err:n}=In;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=bo(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?bo(i.length/2|128):"";return bo(t)+s+i+e},decode(t,e){const{Err:n}=In;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=In;if(t<Vt)throw new e("integer: negative integers are not allowed");let n=bo(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=In;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return nt(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=In,i=We("signature",t),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=In,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}};function jc(t,e){return Tr(De(t,e))}const Vt=BigInt(0),ge=BigInt(1),Xn=BigInt(2),Gi=BigInt(3),zc=BigInt(4);function Vc(t){const e=p8(t),{Fp:n}=e,r=Yn(e.n,e.nBitLength),i=e.toBytes||((_,x,T)=>{const R=x.toAffine();return Se(Uint8Array.from([4]),n.toBytes(R.x),n.toBytes(R.y))}),s=e.fromBytes||(_=>{const x=_.subarray(1),T=n.fromBytes(x.subarray(0,n.BYTES)),R=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:T,y:R}});function o(_){const{a:x,b:T}=e,R=n.sqr(_),F=n.mul(R,_);return n.add(n.add(F,n.mul(_,x)),T)}function a(_,x){const T=n.sqr(x),R=o(_);return n.eql(T,R)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,Gi),zc),u=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,u)))throw new Error("bad curve params: a or b");function l(_){return _c(_,ge,e.n)}function h(_){const{allowedPrivateKeyLengths:x,nByteLength:T,wrapPrivateKey:R,n:F}=e;if(x&&typeof _!="bigint"){if(ji(_)&&(_=Tr(_)),typeof _!="string"||!x.includes(_.length))throw new Error("invalid private key");_=_.padStart(T*2,"0")}let U;try{U=typeof _=="bigint"?_:nt(We("private key",_,T))}catch{throw new Error("invalid private key, expected hex or "+T+" bytes, got "+typeof _)}return R&&(U=it(U,F)),hi("private key",U,ge,F),U}function d(_){if(!(_ instanceof y))throw new Error("ProjectivePoint expected")}const f=Ic((_,x)=>{const{px:T,py:R,pz:F}=_;if(n.eql(F,n.ONE))return{x:T,y:R};const U=_.is0();x==null&&(x=U?n.ONE:n.inv(F));const D=n.mul(T,x),j=n.mul(R,x),M=n.mul(F,x);if(U)return{x:n.ZERO,y:n.ZERO};if(!n.eql(M,n.ONE))throw new Error("invZ was invalid");return{x:D,y:j}}),p=Ic(_=>{if(_.is0()){if(e.allowInfinityPoint&&!n.is0(_.py))return;throw new Error("bad point: ZERO")}const{x,y:T}=_.toAffine();if(!n.isValid(x)||!n.isValid(T))throw new Error("bad point: x or y not FE");if(!a(x,T))throw new Error("bad point: equation left != right");if(!_.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class y{constructor(x,T,R){if(x==null||!n.isValid(x))throw new Error("x required");if(T==null||!n.isValid(T)||n.is0(T))throw new Error("y required");if(R==null||!n.isValid(R))throw new Error("z required");this.px=x,this.py=T,this.pz=R,Object.freeze(this)}static fromAffine(x){const{x:T,y:R}=x||{};if(!x||!n.isValid(T)||!n.isValid(R))throw new Error("invalid affine point");if(x instanceof y)throw new Error("projective point not allowed");const F=U=>n.eql(U,n.ZERO);return F(T)&&F(R)?y.ZERO:new y(T,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const T=Nr(n,x.map(R=>R.pz));return x.map((R,F)=>R.toAffine(T[F])).map(y.fromAffine)}static fromHex(x){const T=y.fromAffine(s(We("pointHex",x)));return T.assertValidity(),T}static fromPrivateKey(x){return y.BASE.multiply(h(x))}static msm(x,T){return d8(y,r,x,T)}_setWindowSize(x){$.setWindowSize(this,x)}assertValidity(){p(this)}hasEvenY(){const{y:x}=this.toAffine();if(n.isOdd)return!n.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){d(x);const{px:T,py:R,pz:F}=this,{px:U,py:D,pz:j}=x,M=n.eql(n.mul(T,j),n.mul(U,F)),E=n.eql(n.mul(R,j),n.mul(D,F));return M&&E}negate(){return new y(this.px,n.neg(this.py),this.pz)}double(){const{a:x,b:T}=e,R=n.mul(T,Gi),{px:F,py:U,pz:D}=this;let j=n.ZERO,M=n.ZERO,E=n.ZERO,b=n.mul(F,F),v=n.mul(U,U),g=n.mul(D,D),w=n.mul(F,U);return w=n.add(w,w),E=n.mul(F,D),E=n.add(E,E),j=n.mul(x,E),M=n.mul(R,g),M=n.add(j,M),j=n.sub(v,M),M=n.add(v,M),M=n.mul(j,M),j=n.mul(w,j),E=n.mul(R,E),g=n.mul(x,g),w=n.sub(b,g),w=n.mul(x,w),w=n.add(w,E),E=n.add(b,b),b=n.add(E,b),b=n.add(b,g),b=n.mul(b,w),M=n.add(M,b),g=n.mul(U,D),g=n.add(g,g),b=n.mul(g,w),j=n.sub(j,b),E=n.mul(g,v),E=n.add(E,E),E=n.add(E,E),new y(j,M,E)}add(x){d(x);const{px:T,py:R,pz:F}=this,{px:U,py:D,pz:j}=x;let M=n.ZERO,E=n.ZERO,b=n.ZERO;const v=e.a,g=n.mul(e.b,Gi);let w=n.mul(T,U),S=n.mul(R,D),O=n.mul(F,j),I=n.add(T,R),B=n.add(U,D);I=n.mul(I,B),B=n.add(w,S),I=n.sub(I,B),B=n.add(T,F);let P=n.add(U,j);return B=n.mul(B,P),P=n.add(w,O),B=n.sub(B,P),P=n.add(R,F),M=n.add(D,j),P=n.mul(P,M),M=n.add(S,O),P=n.sub(P,M),b=n.mul(v,B),M=n.mul(g,O),b=n.add(M,b),M=n.sub(S,b),b=n.add(S,b),E=n.mul(M,b),S=n.add(w,w),S=n.add(S,w),O=n.mul(v,O),B=n.mul(g,B),S=n.add(S,O),O=n.sub(w,O),O=n.mul(v,O),B=n.add(B,O),w=n.mul(S,B),E=n.add(E,w),w=n.mul(P,B),M=n.mul(I,M),M=n.sub(M,w),w=n.mul(I,S),b=n.mul(P,b),b=n.add(b,w),new y(M,E,b)}subtract(x){return this.add(x.negate())}is0(){return this.equals(y.ZERO)}wNAF(x){return $.wNAFCached(this,x,y.normalizeZ)}multiplyUnsafe(x){const{endo:T,n:R}=e;hi("scalar",x,Vt,R);const F=y.ZERO;if(x===Vt)return F;if(this.is0()||x===ge)return this;if(!T||$.hasPrecomputes(this))return $.wNAFCachedUnsafe(this,x,y.normalizeZ);let{k1neg:U,k1:D,k2neg:j,k2:M}=T.splitScalar(x),E=F,b=F,v=this;for(;D>Vt||M>Vt;)D&ge&&(E=E.add(v)),M&ge&&(b=b.add(v)),v=v.double(),D>>=ge,M>>=ge;return U&&(E=E.negate()),j&&(b=b.negate()),b=new y(n.mul(b.px,T.beta),b.py,b.pz),E.add(b)}multiply(x){const{endo:T,n:R}=e;hi("scalar",x,ge,R);let F,U;if(T){const{k1neg:D,k1:j,k2neg:M,k2:E}=T.splitScalar(x);let{p:b,f:v}=this.wNAF(j),{p:g,f:w}=this.wNAF(E);b=$.constTimeNegate(D,b),g=$.constTimeNegate(M,g),g=new y(n.mul(g.px,T.beta),g.py,g.pz),F=b.add(g),U=v.add(w)}else{const{p:D,f:j}=this.wNAF(x);F=D,U=j}return y.normalizeZ([F,U])[0]}multiplyAndAddUnsafe(x,T,R){const F=y.BASE,U=(j,M)=>M===Vt||M===ge||!j.equals(F)?j.multiplyUnsafe(M):j.multiply(M),D=U(this,T).add(U(x,R));return D.is0()?void 0:D}toAffine(x){return f(this,x)}isTorsionFree(){const{h:x,isTorsionFree:T}=e;if(x===ge)return!0;if(T)return T(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:T}=e;return x===ge?this:T?T(y,this):this.multiplyUnsafe(e.h)}toRawBytes(x=!0){return zi("isCompressed",x),this.assertValidity(),i(y,this,x)}toHex(x=!0){return zi("isCompressed",x),Tr(this.toRawBytes(x))}}y.BASE=new y(e.Gx,e.Gy,n.ONE),y.ZERO=new y(n.ZERO,n.ONE,n.ZERO);const{endo:m,nBitLength:A}=e,$=h8(y,m?Math.ceil(A/2):A);return{CURVE:e,ProjectivePoint:y,normPrivateKeyToScalar:h,weierstrassEquation:o,isWithinCurveOrder:l}}function b8(t){const e=$d(t);return Hi(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function y8(t){const e=b8(t),{Fp:n,n:r,nByteLength:i,nBitLength:s}=e,o=n.BYTES+1,a=2*n.BYTES+1;function c(g){return it(g,r)}function u(g){return Cc(g,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:h,weierstrassEquation:d,isWithinCurveOrder:f}=Vc({...e,toBytes(g,w,S){const O=w.toAffine(),I=n.toBytes(O.x),B=Se;return zi("isCompressed",S),S?B(Uint8Array.from([w.hasEvenY()?2:3]),I):B(Uint8Array.from([4]),I,n.toBytes(O.y))},fromBytes(g){const w=g.length,S=g[0],O=g.subarray(1);if(w===o&&(S===2||S===3)){const I=nt(O);if(!_c(I,ge,n.ORDER))throw new Error("Point is not on curve");const B=d(I);let P;try{P=n.sqrt(B)}catch(k){const N=k instanceof Error?": "+k.message:"";throw new Error("Point is not on curve"+N)}const L=(P&ge)===ge;return(S&1)===1!==L&&(P=n.neg(P)),{x:I,y:P}}else if(w===a&&S===4){const I=n.fromBytes(O.subarray(0,n.BYTES)),B=n.fromBytes(O.subarray(n.BYTES,2*n.BYTES));return{x:I,y:B}}else{const I=o,B=a;throw new Error("invalid Point, expected length of "+I+", or uncompressed "+B+", got "+w)}}});function p(g){const w=r>>ge;return g>w}function y(g){return p(g)?c(-g):g}const m=(g,w,S)=>nt(g.slice(w,S));class A{constructor(w,S,O){hi("r",w,ge,r),hi("s",S,ge,r),this.r=w,this.s=S,O!=null&&(this.recovery=O),Object.freeze(this)}static fromCompact(w){const S=i;return w=We("compactSignature",w,S*2),new A(m(w,0,S),m(w,S,2*S))}static fromDER(w){const{r:S,s:O}=In.toSig(We("DER",w));return new A(S,O)}assertValidity(){}addRecoveryBit(w){return new A(this.r,this.s,w)}recoverPublicKey(w){const{r:S,s:O,recovery:I}=this,B=F(We("msgHash",w));if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");const P=I===2||I===3?S+e.n:S;if(P>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=(I&1)===0?"02":"03",C=l.fromHex(L+jc(P,n.BYTES)),k=u(P),N=c(-B*k),q=c(O*k),z=l.BASE.multiplyAndAddUnsafe(C,N,q);if(!z)throw new Error("point at infinify");return z.assertValidity(),z}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return yo(this.toDERHex())}toDERHex(){return In.hexFromSig(this)}toCompactRawBytes(){return yo(this.toCompactHex())}toCompactHex(){const w=i;return jc(this.r,w)+jc(this.s,w)}}const $={isValidPrivateKey(g){try{return h(g),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const g=Uc(e.n);return Id(e.randomBytes(g),e.n)},precompute(g=8,w=l.BASE){return w._setWindowSize(g),w.multiply(BigInt(3)),w}};function _(g,w=!0){return l.fromPrivateKey(g).toRawBytes(w)}function x(g){if(typeof g=="bigint")return!1;if(g instanceof l)return!0;const S=We("key",g).length,O=n.BYTES,I=O+1,B=2*O+1;if(!(e.allowedPrivateKeyLengths||i===I))return S===I||S===B}function T(g,w,S=!0){if(x(g)===!0)throw new Error("first arg must be private key");if(x(w)===!1)throw new Error("second arg must be public key");return l.fromHex(w).multiply(h(g)).toRawBytes(S)}const R=e.bits2int||function(g){if(g.length>8192)throw new Error("input is too large");const w=nt(g),S=g.length*8-s;return S>0?w>>BigInt(S):w},F=e.bits2int_modN||function(g){return c(R(g))},U=Pr(s);function D(g){return hi("num < 2^"+s,g,Vt,U),De(g,i)}function j(g,w,S=M){if(["recovered","canonical"].some(H=>H in S))throw new Error("sign() legacy options not supported");const{hash:O,randomBytes:I}=e;let{lowS:B,prehash:P,extraEntropy:L}=S;B==null&&(B=!0),g=We("msgHash",g),Td(S),P&&(g=We("prehashed msgHash",O(g)));const C=F(g),k=h(w),N=[D(k),D(C)];if(L!=null&&L!==!1){const H=L===!0?I(n.BYTES):L;N.push(We("extraEntropy",H))}const q=Se(...N),z=C;function W(H){const Z=R(H);if(!f(Z))return;const Q=u(Z),ee=l.BASE.multiply(Z).toAffine(),se=c(ee.x);if(se===Vt)return;const he=c(Q*c(z+se*k));if(he===Vt)return;let Ee=(ee.x===se?0:2)|Number(ee.y&ge),qn=he;return B&&p(he)&&(qn=y(he),Ee^=1),new A(se,qn,Ee)}return{seed:q,k2sig:W}}const M={lowS:e.lowS,prehash:!1},E={lowS:e.lowS,prehash:!1};function b(g,w,S=M){const{seed:O,k2sig:I}=j(g,w,S),B=e;return p3(B.hash.outputLen,B.nByteLength,B.hmac)(O,I)}l.BASE._setWindowSize(8);function v(g,w,S,O=E){const I=g;w=We("msgHash",w),S=We("publicKey",S);const{lowS:B,prehash:P,format:L}=O;if(Td(O),"strict"in O)throw new Error("options.strict was renamed to lowS");if(L!==void 0&&L!=="compact"&&L!=="der")throw new Error("format must be compact or der");const C=typeof I=="string"||ji(I),k=!C&&!L&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!C&&!k)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let N,q;try{if(k&&(N=new A(I.r,I.s)),C){try{L!=="compact"&&(N=A.fromDER(I))}catch(Ee){if(!(Ee instanceof In.Err))throw Ee}!N&&L!=="der"&&(N=A.fromCompact(I))}q=l.fromHex(S)}catch{return!1}if(!N||B&&N.hasHighS())return!1;P&&(w=e.hash(w));const{r:z,s:W}=N,H=F(w),Z=u(W),Q=c(H*Z),ee=c(z*Z),se=l.BASE.multiplyAndAddUnsafe(q,Q,ee)?.toAffine();return se?c(se.x)===z:!1}return{CURVE:e,getPublicKey:_,getSharedSecret:T,sign:b,verify:v,ProjectivePoint:l,Signature:A,utils:$}}function w8(t,e){const n=t.ORDER;let r=Vt;for(let p=n-ge;p%Xn===Vt;p/=Xn)r+=ge;const i=r,s=Xn<<i-ge-ge,o=s*Xn,a=(n-ge)/o,c=(a-ge)/Xn,u=o-ge,l=s,h=t.pow(e,a),d=t.pow(e,(a+ge)/Xn);let f=(p,y)=>{let m=h,A=t.pow(y,u),$=t.sqr(A);$=t.mul($,y);let _=t.mul(p,$);_=t.pow(_,c),_=t.mul(_,A),A=t.mul(_,y),$=t.mul(_,p);let x=t.mul($,A);_=t.pow(x,l);let T=t.eql(_,t.ONE);A=t.mul($,d),_=t.mul(x,m),$=t.cmov(A,$,T),x=t.cmov(_,x,T);for(let R=i;R>ge;R--){let F=R-Xn;F=Xn<<F-ge;let U=t.pow(x,F);const D=t.eql(U,t.ONE);A=t.mul($,m),m=t.mul(m,m),U=t.mul(x,m),$=t.cmov(A,$,D),x=t.cmov(U,x,D)}return{isValid:T,value:$}};if(t.ORDER%zc===Gi){const p=(t.ORDER-Gi)/zc,y=t.sqrt(t.neg(e));f=(m,A)=>{let $=t.sqr(A);const _=t.mul(m,A);$=t.mul($,_);let x=t.pow($,p);x=t.mul(x,_);const T=t.mul(x,y),R=t.mul(t.sqr(x),A),F=t.eql(R,m);let U=t.cmov(T,x,F);return{isValid:F,value:U}}}return f}function Pd(t,e){if(xd(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=w8(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,o,a,c,u,l,h;i=t.sqr(r),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),u=t.sqr(a),c=t.mul(u,e.A),s=t.add(s,c),s=t.mul(s,o),u=t.mul(u,a),c=t.mul(u,e.B),s=t.add(s,c),l=t.mul(i,o);const{isValid:d,value:f}=n(s,u);h=t.mul(i,r),h=t.mul(h,f),l=t.cmov(l,o,d),h=t.cmov(h,f,d);const p=t.isOdd(r)===t.isOdd(h);h=t.cmov(t.neg(h),h,p);const y=Nr(t,[a],!0)[0];return l=t.mul(l,y),{x:l,y:h}}}function m8(t){return{hash:t,hmac:(e,...n)=>Nc(t,e,wn(...n)),randomBytes:lo}}function _o(t,e){const n=r=>y8({...t,...m8(r)});return{...n(e),create:n}}const v8=nt;function Jn(t,e){if(Wi(t),Wi(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=t&255,t>>>=8;return new Uint8Array(n)}function E8(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function Wi(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function x8(t,e,n,r){Zn(t),Zn(e),Wi(n),e.length>255&&(e=r(Se(Ec("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=r,o=Math.ceil(n/i);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=Se(e,Jn(e.length,1)),c=Jn(0,s),u=Jn(n,2),l=new Array(o),h=r(Se(c,t,u,Jn(0,1),a));l[0]=r(Se(h,Jn(1,1),a));for(let f=1;f<=o;f++){const p=[E8(h,l[f-1]),Jn(f+1,1),a];l[f]=r(Se(...p))}return Se(...l).slice(0,n)}function _8(t,e,n,r,i){if(Zn(t),Zn(e),Wi(n),e.length>255){const s=Math.ceil(2*r/8);e=i.create({dkLen:s}).update(Ec("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(t).update(Jn(n,2)).update(e).update(Jn(e.length,1)).digest()}function Rd(t,e,n){Hi(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:s,hash:o,expand:a,DST:c}=n;Zn(t),Wi(e);const u=typeof c=="string"?Ec(c):c,l=r.toString(2).length,h=Math.ceil((l+i)/8),d=e*s*h;let f;if(a==="xmd")f=x8(t,u,d,o);else if(a==="xof")f=_8(t,u,d,i,o);else if(a==="_internal_pass")f=t;else throw new Error('expand must be "xmd" or "xof"');const p=new Array(e);for(let y=0;y<e;y++){const m=new Array(s);for(let A=0;A<s;A++){const $=h*(A+y*s),_=f.subarray($,$+h);m[A]=it(v8(_),r)}p[y]=m}return p}function Nd(t,e){const n=e.map(r=>Array.from(r).reverse());return(r,i)=>{const[s,o,a,c]=n.map(h=>h.reduce((d,f)=>t.add(t.mul(d,r),f))),[u,l]=Nr(t,[o,c],!0);return r=t.mul(s,u),i=t.mul(i,t.mul(a,l)),{x:r,y:i}}}function Cd(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function r(s){return t.fromAffine(e(s))}function i(s){const o=s.clearCofactor();return o.equals(t.ZERO)?t.ZERO:(o.assertValidity(),o)}return{defaults:n,hashToCurve(s,o){const a=Rd(s,2,{...n,DST:n.DST,...o}),c=r(a[0]),u=r(a[1]);return i(c.add(u))},encodeToCurve(s,o){const a=Rd(s,1,{...n,DST:n.encodeDST,...o});return i(r(a[0]))},mapToCurve(s){if(!Array.isArray(s))throw new Error("expected array of bigints");for(const o of s)if(typeof o!="bigint")throw new Error("expected array of bigints");return i(r(s))}}}const Ud=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Fd=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),S8=BigInt(0),I8=BigInt(1),Hc=BigInt(2),Ld=(t,e)=>(t+e/Hc)/e;function O8(t){const e=Ud,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,h=Pt(l,n,e)*l%e,d=Pt(h,n,e)*l%e,f=Pt(d,Hc,e)*u%e,p=Pt(f,i,e)*f%e,y=Pt(p,s,e)*p%e,m=Pt(y,a,e)*y%e,A=Pt(m,c,e)*m%e,$=Pt(A,a,e)*y%e,_=Pt($,n,e)*l%e,x=Pt(_,o,e)*p%e,T=Pt(x,r,e)*u%e,R=Pt(T,Hc,e);if(!Kc.eql(Kc.sqr(R),t))throw new Error("Cannot find square root");return R}const Kc=Yn(Ud,void 0,void 0,{sqrt:O8}),A8=_o({a:S8,b:BigInt(7),Fp:Kc,n:Fd,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Fd,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-I8*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=Ld(s*t,e),c=Ld(-r*t,e);let u=it(t-a*n-c*i,e),l=it(-a*r-c*s,e);const h=u>o,d=l>o;if(h&&(u=e-u),d&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:u,k2neg:d,k2:l}}}},fi);function B8(t){if(t.length!==130&&t.length!==132)throw new $8({signature:t});const e=BigInt(_n(t,0,32)),n=BigInt(_n(t,32,64)),r=(()=>{const i=+`0x${t.slice(130)}`;if(!Number.isNaN(i))try{return D8(i)}catch{throw new T8({value:i})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function D8(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new P8({value:t})}class $8 extends be{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Sn(Dc(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class T8 extends be{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class P8 extends be{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}Object.freeze({1:0n,2:1n,3:2n,4:3n,5:4n,6:5n,7:6n,8:7n,9:8n,A:9n,B:10n,C:11n,D:12n,E:13n,F:14n,G:15n,H:16n,J:17n,K:18n,L:19n,M:20n,N:21n,P:22n,Q:23n,R:24n,S:25n,T:26n,U:27n,V:28n,W:29n,X:30n,Y:31n,Z:32n,a:33n,b:34n,c:35n,d:36n,e:37n,f:38n,g:39n,h:40n,i:41n,j:42n,k:43n,m:44n,n:45n,o:46n,p:47n,q:48n,r:49n,s:50n,t:51n,u:52n,v:53n,w:54n,x:55n,y:56n,z:57n}),Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((t,e)=>[e,t.charCodeAt(0)]),{...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((t,e)=>[t.charCodeAt(0),e]))},mn.slice();const R8=BigInt(0),So=BigInt(1),kd=BigInt(2),di=BigInt(3);function N8(t){const e=[];for(;t>So;t>>=So)(t&So)===R8?e.unshift(0):(t&di)===di?(e.unshift(-1),t+=So):e.unshift(1);return e}function C8(t){const{Fp:e,Fr:n,Fp2:r,Fp6:i,Fp12:s}=t.fields,o=t.params.xNegative,a=t.params.twistType,c=Vc({n:n.ORDER,...t.G1}),u=Object.assign(c,Cd(c.ProjectivePoint,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),l=Vc({n:n.ORDER,...t.G2}),h=Object.assign(l,Cd(l.ProjectivePoint,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults}));let d;if(a==="multiplicative")d=(C,k,N,q,z,W)=>s.mul014(q,C,r.mul(k,z),r.mul(N,W));else if(a==="divisive")d=(C,k,N,q,z,W)=>s.mul034(q,r.mul(N,W),r.mul(k,z),C);else throw new Error("bls: unknown twist type");const f=r.div(r.ONE,r.mul(r.ONE,kd));function p(C,k,N,q){const z=r.sqr(N),W=r.sqr(q),H=r.mulByB(r.mul(W,di)),Z=r.mul(H,di),Q=r.sub(r.sub(r.sqr(r.add(N,q)),W),z),ee=r.sub(H,z),se=r.mul(r.sqr(k),di),he=r.neg(Q);return C.push([ee,se,he]),k=r.mul(r.mul(r.mul(r.sub(z,Z),k),N),f),N=r.sub(r.sqr(r.mul(r.add(z,Z),f)),r.mul(r.sqr(H),di)),q=r.mul(z,Q),{Rx:k,Ry:N,Rz:q}}function y(C,k,N,q,z,W){const H=r.sub(N,r.mul(W,q)),Z=r.sub(k,r.mul(z,q)),Q=r.sub(r.mul(H,z),r.mul(Z,W)),ee=r.neg(H),se=Z;C.push([Q,ee,se]);const he=r.sqr(Z),Ee=r.mul(he,Z),qn=r.mul(he,k),Da=r.add(r.sub(Ee,r.mul(qn,kd)),r.mul(r.sqr(H),q));return k=r.mul(Z,Da),N=r.sub(r.mul(r.sub(qn,Da),H),r.mul(Ee,N)),q=r.mul(q,Ee),{Rx:k,Ry:N,Rz:q}}const m=N8(t.params.ateLoopSize),A=Ic(C=>{const k=C,{x:N,y:q}=k.toAffine(),z=N,W=q,H=r.neg(q);let Z=z,Q=W,ee=r.ONE;const se=[];for(const he of m){const Ee=[];({Rx:Z,Ry:Q,Rz:ee}=p(Ee,Z,Q,ee)),he&&({Rx:Z,Ry:Q,Rz:ee}=y(Ee,Z,Q,ee,z,he===-1?H:W)),se.push(Ee)}if(t.postPrecompute){const he=se[se.length-1];t.postPrecompute(Z,Q,ee,z,W,y.bind(null,he))}return se});function $(C,k=!1){let N=s.ONE;if(C.length){const q=C[0][0].length;for(let z=0;z<q;z++){N=s.sqr(N);for(const[W,H,Z]of C)for(const[Q,ee,se]of W[z])N=d(Q,ee,se,N,H,Z)}}return o&&(N=s.conjugate(N)),k?s.finalExponentiate(N):N}function _(C,k=!0){const N=[];u.ProjectivePoint.normalizeZ(C.map(({g1:q})=>q)),h.ProjectivePoint.normalizeZ(C.map(({g2:q})=>q));for(const{g1:q,g2:z}of C){if(q.equals(u.ProjectivePoint.ZERO)||z.equals(h.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");q.assertValidity(),z.assertValidity();const W=q.toAffine();N.push([A(z),W.x,W.y])}return $(N,k)}function x(C,k,N=!0){return _([{g1:C,g2:k}],N)}const T={randomPrivateKey:()=>{const C=Uc(n.ORDER);return Id(t.randomBytes(C),n.ORDER)},calcPairingPrecomputes:A},{ShortSignature:R}=t.G1,{Signature:F}=t.G2;function U(C){return C instanceof u.ProjectivePoint?C:u.ProjectivePoint.fromHex(C)}function D(C,k){return C instanceof u.ProjectivePoint?C:u.hashToCurve(We("point",C),k)}function j(C){return C instanceof h.ProjectivePoint?C:F.fromHex(C)}function M(C,k){return C instanceof h.ProjectivePoint?C:h.hashToCurve(We("point",C),k)}function E(C){return u.ProjectivePoint.fromPrivateKey(C).toRawBytes(!0)}function b(C){return h.ProjectivePoint.fromPrivateKey(C).toRawBytes(!0)}function v(C,k,N){const q=M(C,N);q.assertValidity();const z=q.multiply(u.normPrivateKeyToScalar(k));return C instanceof h.ProjectivePoint?z:F.toRawBytes(z)}function g(C,k,N){const q=D(C,N);q.assertValidity();const z=q.multiply(u.normPrivateKeyToScalar(k));return C instanceof u.ProjectivePoint?z:R.toRawBytes(z)}function w(C,k,N,q){const z=U(N),W=M(k,q),H=u.ProjectivePoint.BASE,Z=j(C),Q=_([{g1:z.negate(),g2:W},{g1:H,g2:Z}]);return s.eql(Q,s.ONE)}function S(C,k,N,q){const z=j(N),W=D(k,q),H=h.ProjectivePoint.BASE,Z=U(C),Q=_([{g1:W,g2:z},{g1:Z,g2:H.negate()}]);return s.eql(Q,s.ONE)}function O(C){if(!Array.isArray(C)||C.length===0)throw new Error("expected non-empty array")}function I(C){O(C);const N=C.map(U).reduce((q,z)=>q.add(z),u.ProjectivePoint.ZERO);return C[0]instanceof u.ProjectivePoint?(N.assertValidity(),N):N.toRawBytes(!0)}function B(C){O(C);const N=C.map(j).reduce((q,z)=>q.add(z),h.ProjectivePoint.ZERO);return C[0]instanceof h.ProjectivePoint?(N.assertValidity(),N):F.toRawBytes(N)}function P(C){O(C);const N=C.map(U).reduce((q,z)=>q.add(z),u.ProjectivePoint.ZERO);return C[0]instanceof u.ProjectivePoint?(N.assertValidity(),N):R.toRawBytes(N)}function L(C,k,N,q){if(O(k),N.length!==k.length)throw new Error("amount of public keys and messages should be equal");const z=j(C),W=k.map(ee=>M(ee,q)),H=N.map(U),Z=new Map;for(let ee=0;ee<H.length;ee++){const se=H[ee],he=W[ee];let Ee=Z.get(he);Ee===void 0&&(Ee=[],Z.set(he,Ee)),Ee.push(se)}const Q=[];try{for(const[ee,se]of Z){const he=se.reduce((Ee,qn)=>Ee.add(qn));Q.push({g1:he,g2:ee})}return Q.push({g1:u.ProjectivePoint.BASE.negate(),g2:z}),s.eql(_(Q),s.ONE)}catch{return!1}}return u.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:E,getPublicKeyForShortSignatures:b,sign:v,signShortSignature:g,verify:w,verifyBatch:L,verifyShortSignature:S,aggregatePublicKeys:I,aggregateSignatures:B,aggregateShortSignatures:P,millerLoopBatch:$,pairing:x,pairingBatch:_,G1:u,G2:h,Signature:F,ShortSignature:R,fields:{Fr:n,Fp:e,Fp2:r,Fp6:i,Fp12:s},params:{ateLoopSize:t.params.ateLoopSize,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:T}}const U8=BigInt(0),pi=BigInt(1),On=BigInt(2),qd=BigInt(3);function Gc(t,e,n,r,i=1,s){const o=BigInt(s===void 0?r:s),a=n**BigInt(r),c=[];for(let u=0;u<i;u++){const l=BigInt(u+1),h=[];for(let d=0,f=pi;d<r;d++){const p=(l*f-l)/o%a;h.push(t.pow(e,p)),f*=n}c.push(h)}return c}function F8(t,e,n){const r=e.pow(n,(t.ORDER-pi)/qd),i=e.pow(n,(t.ORDER-pi)/On);function s(d,f){const p=e.mul(e.frobeniusMap(d,1),r),y=e.mul(e.frobeniusMap(f,1),i);return[p,y]}const o=e.pow(n,(t.ORDER**On-pi)/qd),a=e.pow(n,(t.ORDER**On-pi)/On);if(!e.eql(a,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function c(d,f){return[e.mul(d,o),e.neg(f)]}const u=d=>(f,p)=>{const y=p.toAffine(),m=d(y.x,y.y);return f.fromAffine({x:m[0],y:m[1]})},l=u(s),h=u(c);return{psi:s,psi2:c,G2psi:l,G2psi2:h,PSI_X:r,PSI_Y:i,PSI2_X:o,PSI2_Y:a}}function L8(t){const{ORDER:e}=t,n=Yn(e),r=n.create(t.NONRESIDUE||BigInt(-1)),i=n.div(n.ONE,On),s=Gc(n,r,n.ORDER,2)[0],o=({c0:E,c1:b},{c0:v,c1:g})=>({c0:n.add(E,v),c1:n.add(b,g)}),a=({c0:E,c1:b},{c0:v,c1:g})=>({c0:n.sub(E,v),c1:n.sub(b,g)}),c=({c0:E,c1:b},v)=>{if(typeof v=="bigint")return{c0:n.mul(E,v),c1:n.mul(b,v)};const{c0:g,c1:w}=v;let S=n.mul(E,g),O=n.mul(b,w);const I=n.sub(S,O),B=n.sub(n.mul(n.add(E,b),n.add(g,w)),n.add(S,O));return{c0:I,c1:B}},u=({c0:E,c1:b})=>{const v=n.add(E,b),g=n.sub(E,b),w=n.add(E,E);return{c0:n.mul(v,g),c1:n.mul(w,b)}},l=E=>{if(E.length!==2)throw new Error("invalid tuple");const b=E.map(v=>n.create(v));return{c0:b[0],c1:b[1]}},h=e*e,d=l(t.FP2_NONRESIDUE),f={ORDER:h,isLE:n.isLE,NONRESIDUE:d,BITS:Vi(h),BYTES:Math.ceil(Vi(h)/8),MASK:Pr(Vi(h)),ZERO:{c0:n.ZERO,c1:n.ZERO},ONE:{c0:n.ONE,c1:n.ZERO},create:E=>E,isValid:({c0:E,c1:b})=>typeof E=="bigint"&&typeof b=="bigint",is0:({c0:E,c1:b})=>n.is0(E)&&n.is0(b),eql:({c0:E,c1:b},{c0:v,c1:g})=>n.eql(E,v)&&n.eql(b,g),neg:({c0:E,c1:b})=>({c0:n.neg(E),c1:n.neg(b)}),pow:(E,b)=>Eo(f,E,b),invertBatch:E=>Nr(f,E),add:o,sub:a,mul:c,sqr:u,addN:o,subN:a,mulN:c,sqrN:u,div:(E,b)=>f.mul(E,typeof b=="bigint"?n.inv(n.create(b)):f.inv(b)),inv:({c0:E,c1:b})=>{const v=n.inv(n.create(E*E+b*b));return{c0:n.mul(v,n.create(E)),c1:n.mul(v,n.create(-b))}},sqrt:E=>{if(t.Fp2sqrt)return t.Fp2sqrt(E);const{c0:b,c1:v}=E;if(n.is0(v))return xo(n,b)===1?f.create({c0:n.sqrt(b),c1:n.ZERO}):f.create({c0:n.ZERO,c1:n.sqrt(n.div(b,r))});const g=n.sqrt(n.sub(n.sqr(b),n.mul(n.sqr(v),r)));let w=n.mul(n.add(g,b),i);xo(n,w)===-1&&(w=n.sub(w,g));const O=n.sqrt(w),I=f.create({c0:O,c1:n.div(n.mul(v,i),O)});if(!f.eql(f.sqr(I),E))throw new Error("Cannot find square root");const B=I,P=f.neg(B),{re:L,im:C}=f.reim(B),{re:k,im:N}=f.reim(P);return C>N||C===N&&L>k?B:P},isOdd:E=>{const{re:b,im:v}=f.reim(E),g=b%On,w=b===U8,S=v%On;return BigInt(g||w&&S)==pi},fromBytes(E){if(E.length!==f.BYTES)throw new Error("fromBytes invalid length="+E.length);return{c0:n.fromBytes(E.subarray(0,n.BYTES)),c1:n.fromBytes(E.subarray(n.BYTES))}},toBytes:({c0:E,c1:b})=>Se(n.toBytes(E),n.toBytes(b)),cmov:({c0:E,c1:b},{c0:v,c1:g},w)=>({c0:n.cmov(E,v,w),c1:n.cmov(b,g,w)}),reim:({c0:E,c1:b})=>({re:E,im:b}),mulByNonresidue:({c0:E,c1:b})=>f.mul({c0:E,c1:b},d),mulByB:t.Fp2mulByB,fromBigTuple:l,frobeniusMap:({c0:E,c1:b},v)=>({c0:E,c1:n.mul(b,s[v%2])})},p=({c0:E,c1:b,c2:v},{c0:g,c1:w,c2:S})=>({c0:f.add(E,g),c1:f.add(b,w),c2:f.add(v,S)}),y=({c0:E,c1:b,c2:v},{c0:g,c1:w,c2:S})=>({c0:f.sub(E,g),c1:f.sub(b,w),c2:f.sub(v,S)}),m=({c0:E,c1:b,c2:v},g)=>{if(typeof g=="bigint")return{c0:f.mul(E,g),c1:f.mul(b,g),c2:f.mul(v,g)};const{c0:w,c1:S,c2:O}=g,I=f.mul(E,w),B=f.mul(b,S),P=f.mul(v,O);return{c0:f.add(I,f.mulByNonresidue(f.sub(f.mul(f.add(b,v),f.add(S,O)),f.add(B,P)))),c1:f.add(f.sub(f.mul(f.add(E,b),f.add(w,S)),f.add(I,B)),f.mulByNonresidue(P)),c2:f.sub(f.add(B,f.mul(f.add(E,v),f.add(w,O))),f.add(I,P))}},A=({c0:E,c1:b,c2:v})=>{let g=f.sqr(E),w=f.mul(f.mul(E,b),On),S=f.mul(f.mul(b,v),On),O=f.sqr(v);return{c0:f.add(f.mulByNonresidue(S),g),c1:f.add(f.mulByNonresidue(O),w),c2:f.sub(f.sub(f.add(f.add(w,f.sqr(f.add(f.sub(E,b),v))),S),g),O)}},[$,_]=Gc(f,d,n.ORDER,6,2,3),x={ORDER:f.ORDER,isLE:f.isLE,BITS:3*f.BITS,BYTES:3*f.BYTES,MASK:Pr(3*f.BITS),ZERO:{c0:f.ZERO,c1:f.ZERO,c2:f.ZERO},ONE:{c0:f.ONE,c1:f.ZERO,c2:f.ZERO},create:E=>E,isValid:({c0:E,c1:b,c2:v})=>f.isValid(E)&&f.isValid(b)&&f.isValid(v),is0:({c0:E,c1:b,c2:v})=>f.is0(E)&&f.is0(b)&&f.is0(v),neg:({c0:E,c1:b,c2:v})=>({c0:f.neg(E),c1:f.neg(b),c2:f.neg(v)}),eql:({c0:E,c1:b,c2:v},{c0:g,c1:w,c2:S})=>f.eql(E,g)&&f.eql(b,w)&&f.eql(v,S),sqrt:id,div:(E,b)=>x.mul(E,typeof b=="bigint"?n.inv(n.create(b)):x.inv(b)),pow:(E,b)=>Eo(x,E,b),invertBatch:E=>Nr(x,E),add:p,sub:y,mul:m,sqr:A,addN:p,subN:y,mulN:m,sqrN:A,inv:({c0:E,c1:b,c2:v})=>{let g=f.sub(f.sqr(E),f.mulByNonresidue(f.mul(v,b))),w=f.sub(f.mulByNonresidue(f.sqr(v)),f.mul(E,b)),S=f.sub(f.sqr(b),f.mul(E,v)),O=f.inv(f.add(f.mulByNonresidue(f.add(f.mul(v,w),f.mul(b,S))),f.mul(E,g)));return{c0:f.mul(O,g),c1:f.mul(O,w),c2:f.mul(O,S)}},fromBytes:E=>{if(E.length!==x.BYTES)throw new Error("fromBytes invalid length="+E.length);return{c0:f.fromBytes(E.subarray(0,f.BYTES)),c1:f.fromBytes(E.subarray(f.BYTES,2*f.BYTES)),c2:f.fromBytes(E.subarray(2*f.BYTES))}},toBytes:({c0:E,c1:b,c2:v})=>Se(f.toBytes(E),f.toBytes(b),f.toBytes(v)),cmov:({c0:E,c1:b,c2:v},{c0:g,c1:w,c2:S},O)=>({c0:f.cmov(E,g,O),c1:f.cmov(b,w,O),c2:f.cmov(v,S,O)}),fromBigSix:E=>{if(!Array.isArray(E)||E.length!==6)throw new Error("invalid Fp6 usage");return{c0:f.fromBigTuple(E.slice(0,2)),c1:f.fromBigTuple(E.slice(2,4)),c2:f.fromBigTuple(E.slice(4,6))}},frobeniusMap:({c0:E,c1:b,c2:v},g)=>({c0:f.frobeniusMap(E,g),c1:f.mul(f.frobeniusMap(b,g),$[g%6]),c2:f.mul(f.frobeniusMap(v,g),_[g%6])}),mulByFp2:({c0:E,c1:b,c2:v},g)=>({c0:f.mul(E,g),c1:f.mul(b,g),c2:f.mul(v,g)}),mulByNonresidue:({c0:E,c1:b,c2:v})=>({c0:f.mulByNonresidue(v),c1:E,c2:b}),mul1:({c0:E,c1:b,c2:v},g)=>({c0:f.mulByNonresidue(f.mul(v,g)),c1:f.mul(E,g),c2:f.mul(b,g)}),mul01({c0:E,c1:b,c2:v},g,w){let S=f.mul(E,g),O=f.mul(b,w);return{c0:f.add(f.mulByNonresidue(f.sub(f.mul(f.add(b,v),w),O)),S),c1:f.sub(f.sub(f.mul(f.add(g,w),f.add(E,b)),S),O),c2:f.add(f.sub(f.mul(f.add(E,v),g),S),O)}}},T=Gc(f,d,n.ORDER,12,1,6)[0],R=({c0:E,c1:b},{c0:v,c1:g})=>({c0:x.add(E,v),c1:x.add(b,g)}),F=({c0:E,c1:b},{c0:v,c1:g})=>({c0:x.sub(E,v),c1:x.sub(b,g)}),U=({c0:E,c1:b},v)=>{if(typeof v=="bigint")return{c0:x.mul(E,v),c1:x.mul(b,v)};let{c0:g,c1:w}=v,S=x.mul(E,g),O=x.mul(b,w);return{c0:x.add(S,x.mulByNonresidue(O)),c1:x.sub(x.mul(x.add(E,b),x.add(g,w)),x.add(S,O))}},D=({c0:E,c1:b})=>{let v=x.mul(E,b);return{c0:x.sub(x.sub(x.mul(x.add(x.mulByNonresidue(b),E),x.add(E,b)),v),x.mulByNonresidue(v)),c1:x.add(v,v)}};function j(E,b){const v=f.sqr(E),g=f.sqr(b);return{first:f.add(f.mulByNonresidue(g),v),second:f.sub(f.sub(f.sqr(f.add(E,b)),v),g)}}const M={ORDER:f.ORDER,isLE:x.isLE,BITS:2*x.BITS,BYTES:2*x.BYTES,MASK:Pr(2*x.BITS),ZERO:{c0:x.ZERO,c1:x.ZERO},ONE:{c0:x.ONE,c1:x.ZERO},create:E=>E,isValid:({c0:E,c1:b})=>x.isValid(E)&&x.isValid(b),is0:({c0:E,c1:b})=>x.is0(E)&&x.is0(b),neg:({c0:E,c1:b})=>({c0:x.neg(E),c1:x.neg(b)}),eql:({c0:E,c1:b},{c0:v,c1:g})=>x.eql(E,v)&&x.eql(b,g),sqrt:id,inv:({c0:E,c1:b})=>{let v=x.inv(x.sub(x.sqr(E),x.mulByNonresidue(x.sqr(b))));return{c0:x.mul(E,v),c1:x.neg(x.mul(b,v))}},div:(E,b)=>M.mul(E,typeof b=="bigint"?n.inv(n.create(b)):M.inv(b)),pow:(E,b)=>Eo(M,E,b),invertBatch:E=>Nr(M,E),add:R,sub:F,mul:U,sqr:D,addN:R,subN:F,mulN:U,sqrN:D,fromBytes:E=>{if(E.length!==M.BYTES)throw new Error("fromBytes invalid length="+E.length);return{c0:x.fromBytes(E.subarray(0,x.BYTES)),c1:x.fromBytes(E.subarray(x.BYTES))}},toBytes:({c0:E,c1:b})=>Se(x.toBytes(E),x.toBytes(b)),cmov:({c0:E,c1:b},{c0:v,c1:g},w)=>({c0:x.cmov(E,v,w),c1:x.cmov(b,g,w)}),fromBigTwelve:E=>({c0:x.fromBigSix(E.slice(0,6)),c1:x.fromBigSix(E.slice(6,12))}),frobeniusMap(E,b){const{c0:v,c1:g,c2:w}=x.frobeniusMap(E.c1,b),S=T[b%12];return{c0:x.frobeniusMap(E.c0,b),c1:x.create({c0:f.mul(v,S),c1:f.mul(g,S),c2:f.mul(w,S)})}},mulByFp2:({c0:E,c1:b},v)=>({c0:x.mulByFp2(E,v),c1:x.mulByFp2(b,v)}),conjugate:({c0:E,c1:b})=>({c0:E,c1:x.neg(b)}),mul014:({c0:E,c1:b},v,g,w)=>{let S=x.mul01(E,v,g),O=x.mul1(b,w);return{c0:x.add(x.mulByNonresidue(O),S),c1:x.sub(x.sub(x.mul01(x.add(b,E),v,f.add(g,w)),S),O)}},mul034:({c0:E,c1:b},v,g,w)=>{const S=x.create({c0:f.mul(E.c0,v),c1:f.mul(E.c1,v),c2:f.mul(E.c2,v)}),O=x.mul01(b,g,w),I=x.mul01(x.add(E,b),f.add(v,g),w);return{c0:x.add(x.mulByNonresidue(O),S),c1:x.sub(I,x.add(S,O))}},_cyclotomicSquare:t.Fp12cyclotomicSquare,_cyclotomicExp:t.Fp12cyclotomicExp,finalExponentiate:t.Fp12finalExponentiate};return{Fp:n,Fp2:f,Fp6:x,Fp4Square:j,Fp12:M}}const st=BigInt(0),Io=BigInt(1),Ce=BigInt(2),Oo=BigInt(3),Zi=BigInt(4),Qn=BigInt("0xd201000000010000"),k8=Vi(Qn),{Fp:X,Fp2:J,Fp6:Wc,Fp4Square:Zc,Fp12:ie}=L8({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[Io,Io],Fp2mulByB:({c0:t,c1:e})=>{const n=X.mul(t,Zi),r=X.mul(e,Zi);return{c0:X.sub(n,r),c1:X.add(n,r)}},Fp12cyclotomicSquare:({c0:t,c1:e})=>{const{c0:n,c1:r,c2:i}=t,{c0:s,c1:o,c2:a}=e,{first:c,second:u}=Zc(n,o),{first:l,second:h}=Zc(s,i),{first:d,second:f}=Zc(r,a),p=J.mulByNonresidue(f);return{c0:Wc.create({c0:J.add(J.mul(J.sub(c,n),Ce),c),c1:J.add(J.mul(J.sub(l,r),Ce),l),c2:J.add(J.mul(J.sub(d,i),Ce),d)}),c1:Wc.create({c0:J.add(J.mul(J.add(p,s),Ce),p),c1:J.add(J.mul(J.add(u,o),Ce),u),c2:J.add(J.mul(J.add(h,a),Ce),h)})}},Fp12cyclotomicExp(t,e){let n=ie.ONE;for(let r=k8-1;r>=0;r--)n=ie._cyclotomicSquare(n),d3(e,r)&&(n=ie.mul(n,t));return n},Fp12finalExponentiate:t=>{const e=Qn,n=ie.div(ie.frobeniusMap(t,6),t),r=ie.mul(ie.frobeniusMap(n,2),n),i=ie.conjugate(ie._cyclotomicExp(r,e)),s=ie.mul(ie.conjugate(ie._cyclotomicSquare(r)),i),o=ie.conjugate(ie._cyclotomicExp(s,e)),a=ie.conjugate(ie._cyclotomicExp(o,e)),c=ie.mul(ie.conjugate(ie._cyclotomicExp(a,e)),ie._cyclotomicSquare(i)),u=ie.conjugate(ie._cyclotomicExp(c,e)),l=ie.frobeniusMap(ie.mul(i,a),2),h=ie.frobeniusMap(ie.mul(o,r),3),d=ie.frobeniusMap(ie.mul(c,ie.conjugate(r)),1),f=ie.mul(ie.mul(u,ie.conjugate(s)),r);return ie.mul(ie.mul(ie.mul(l,h),d),f)}}),Md=Yn(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),q8=Nd(J,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>J.fromBigTuple(e.map(BigInt))))),M8=Nd(X,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),j8=Pd(J,{A:J.create({c0:X.create(st),c1:X.create(BigInt(240))}),B:J.create({c0:X.create(BigInt(1012)),c1:X.create(BigInt(1012))}),Z:J.create({c0:X.create(BigInt(-2)),c1:X.create(BigInt(-1))})}),z8=Pd(X,{A:X.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:X.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:X.create(BigInt(11))}),{G2psi:jd,G2psi2:V8}=F8(X,J,J.div(J.ONE,J.NONRESIDUE)),Yc=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:X.ORDER,m:2,k:128,expand:"xmd",hash:fi}),Ao=Yi(X.toBytes(st),{infinity:!0,compressed:!0});function Bo(t){t=t.slice();const e=t[0]&224,n=!!(e>>7&1),r=!!(e>>6&1),i=!!(e>>5&1);return t[0]&=31,{compressed:n,infinity:r,sort:i,value:t}}function Yi(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function zd(t){t.assertValidity();const e=t.equals(Ht.G1.ProjectivePoint.ZERO),{x:n,y:r}=t.toAffine();if(e)return Ao.slice();const i=X.ORDER,s=!!(r*Ce/i);return Yi(De(n,X.BYTES),{compressed:!0,sort:s})}function Vd(t){t.assertValidity();const e=X.BYTES;if(t.equals(