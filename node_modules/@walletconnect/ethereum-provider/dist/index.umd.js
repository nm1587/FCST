(function(ns,Cn){typeof exports=="object"&&typeof module<"u"?Cn(exports):typeof define=="function"&&define.amd?define(["exports"],Cn):(ns=typeof globalThis<"u"?globalThis:ns||self,Cn(ns["@walletconnect/ethereum-provider"]={}))})(this,function(ns){"use strict";var Cn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function BE(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Bn={exports:{}},yd=typeof Reflect=="object"?Reflect:null,ME=yd&&typeof yd.apply=="function"?yd.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},h2;yd&&typeof yd.ownKeys=="function"?h2=yd.ownKeys:Object.getOwnPropertySymbols?h2=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:h2=function(t){return Object.getOwnPropertyNames(t)};function KB(e){console&&console.warn&&console.warn(e)}var DE=Number.isNaN||function(t){return t!==t};function Nt(){Nt.init.call(this)}Bn.exports=Nt,Bn.exports.once=QB,Nt.EventEmitter=Nt,Nt.prototype._events=void 0,Nt.prototype._eventsCount=0,Nt.prototype._maxListeners=void 0;var UE=10;function p2(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Nt,"defaultMaxListeners",{enumerable:!0,get:function(){return UE},set:function(e){if(typeof e!="number"||e<0||DE(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");UE=e}}),Nt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Nt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||DE(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function LE(e){return e._maxListeners===void 0?Nt.defaultMaxListeners:e._maxListeners}Nt.prototype.getMaxListeners=function(){return LE(this)},Nt.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[t];if(c===void 0)return!1;if(typeof c=="function")ME(c,this,n);else for(var l=c.length,u=VE(c,l),r=0;r<l;++r)ME(u[r],this,n);return!0};function FE(e,t,n,r){var i,s,o;if(p2(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),o===void 0)o=s[t]=n,++e._eventsCount;else if(typeof o=="function"?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=LE(e),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,KB(a)}return e}Nt.prototype.addListener=function(t,n){return FE(this,t,n,!1)},Nt.prototype.on=Nt.prototype.addListener,Nt.prototype.prependListener=function(t,n){return FE(this,t,n,!0)};function YB(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function HE(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=YB.bind(r);return i.listener=n,r.wrapFn=i,i}Nt.prototype.once=function(t,n){return p2(n),this.on(t,HE(this,t,n)),this},Nt.prototype.prependOnceListener=function(t,n){return p2(n),this.prependListener(t,HE(this,t,n)),this},Nt.prototype.removeListener=function(t,n){var r,i,s,o,a;if(p2(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():XB(r,s),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,a||n)}return this},Nt.prototype.off=Nt.prototype.removeListener,Nt.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function jE(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?JB(i):VE(i,i.length)}Nt.prototype.listeners=function(t){return jE(this,t,!0)},Nt.prototype.rawListeners=function(t){return jE(this,t,!1)},Nt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):zE.call(e,t)},Nt.prototype.listenerCount=zE;function zE(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Nt.prototype.eventNames=function(){return this._eventsCount>0?h2(this._events):[]};function VE(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function XB(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function JB(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function QB(e,t){return new Promise(function(n,r){function i(o){e.removeListener(t,s),r(o)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}ZE(e,t,s,{once:!0}),t!=="error"&&eM(e,i,{once:!0})})}function eM(e,t,n){typeof e.on=="function"&&ZE(e,"error",t,n)}function ZE(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(s){r.once&&e.removeEventListener(t,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var WE=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},tM=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),nM=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),rM=function(){function e(t,n,r,i){this.name=t,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return e}(),iM=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),sM=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),oM=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,aM=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,qE=3,cM=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",oM]],GE=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function lM(e){return e?KE(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new sM:typeof navigator<"u"?KE(navigator.userAgent):fM()}function uM(e){return e!==""&&cM.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var s=i.exec(e);return!!s&&[r,s]},!1)}function KE(e){var t=uM(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new iM;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<qE&&(i=WE(WE([],i,!0),hM(qE-i.length),!0)):i=[];var s=i.join("."),o=dM(e),a=aM.exec(e);return a&&a[1]?new rM(n,s,o,a[1]):new tM(n,s,o)}function dM(e){for(var t=0,n=GE.length;t<n;t++){var r=GE[t],i=r[0],s=r[1],o=s.exec(e);if(o)return i}return null}function fM(){var e=typeof process<"u"&&process.version;return e?new nM(process.version.slice(1)):null}function hM(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}var be={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var jw=function(e,t){return jw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},jw(e,t)};function pM(e,t){jw(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var zw=function(){return zw=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},zw.apply(this,arguments)};function gM(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function mM(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function yM(e,t){return function(n,r){t(n,r,e)}}function wM(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function bM(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function vM(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function EM(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function AM(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Vw(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function YE(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function xM(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(YE(arguments[t]));return e}function CM(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function gf(e){return this instanceof gf?(this.v=e,this):new gf(e)}function _M(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){h.value instanceof gf?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function SM(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:gf(e[i](o)),done:i==="return"}:s?s(o):o}:s}}function IM(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Vw=="function"?Vw(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function $M(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function TM(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function NM(e){return e&&e.__esModule?e:{default:e}}function PM(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function OM(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}var RM=Object.freeze({__proto__:null,__extends:pM,get __assign(){return zw},__rest:gM,__decorate:mM,__param:yM,__metadata:wM,__awaiter:bM,__generator:vM,__createBinding:EM,__exportStar:AM,__values:Vw,__read:YE,__spread:xM,__spreadArrays:CM,__await:gf,__asyncGenerator:_M,__asyncDelegator:SM,__asyncValues:IM,__makeTemplateObject:$M,__importStar:TM,__importDefault:NM,__classPrivateFieldGet:PM,__classPrivateFieldSet:OM}),g2=BE(RM),Zw={},mf={},XE;function kM(){if(XE)return mf;XE=1,Object.defineProperty(mf,"__esModule",{value:!0}),mf.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return mf.delay=e,mf}var Ul={},Ww={},Ll={},JE;function BM(){return JE||(JE=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.ONE_THOUSAND=Ll.ONE_HUNDRED=void 0,Ll.ONE_HUNDRED=100,Ll.ONE_THOUSAND=1e3),Ll}var qw={},QE;function MM(){return QE||(QE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(qw)),qw}var eA;function tA(){return eA||(eA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=g2;t.__exportStar(BM(),e),t.__exportStar(MM(),e)}(Ww)),Ww}var nA;function DM(){if(nA)return Ul;nA=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.fromMiliseconds=Ul.toMiliseconds=void 0;const e=tA();function t(r){return r*e.ONE_THOUSAND}Ul.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return Ul.fromMiliseconds=n,Ul}var rA;function UM(){return rA||(rA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=g2;t.__exportStar(kM(),e),t.__exportStar(DM(),e)}(Zw)),Zw}var wd={},iA;function LM(){if(iA)return wd;iA=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return wd.Watch=e,wd.default=e,wd}var Gw={},yf={},sA;function FM(){if(sA)return yf;sA=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.IWatch=void 0;class e{}return yf.IWatch=e,yf}var oA;function HM(){return oA||(oA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),g2.__exportStar(FM(),e)}(Gw)),Gw}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=g2;t.__exportStar(UM(),e),t.__exportStar(LM(),e),t.__exportStar(HM(),e),t.__exportStar(tA(),e)})(be);var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.getLocalStorage=Ut.getLocalStorageOrThrow=Ut.getCrypto=Ut.getCryptoOrThrow=aA=Ut.getLocation=Ut.getLocationOrThrow=Kw=Ut.getNavigator=Ut.getNavigatorOrThrow=Hl=Ut.getDocument=Ut.getDocumentOrThrow=Ut.getFromWindowOrThrow=Ut.getFromWindow=void 0;function Fl(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}Ut.getFromWindow=Fl;function bd(e){const t=Fl(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Ut.getFromWindowOrThrow=bd;function jM(){return bd("document")}Ut.getDocumentOrThrow=jM;function zM(){return Fl("document")}var Hl=Ut.getDocument=zM;function VM(){return bd("navigator")}Ut.getNavigatorOrThrow=VM;function ZM(){return Fl("navigator")}var Kw=Ut.getNavigator=ZM;function WM(){return bd("location")}Ut.getLocationOrThrow=WM;function qM(){return Fl("location")}var aA=Ut.getLocation=qM;function GM(){return bd("crypto")}Ut.getCryptoOrThrow=GM;function KM(){return Fl("crypto")}Ut.getCrypto=KM;function YM(){return bd("localStorage")}Ut.getLocalStorageOrThrow=YM;function XM(){return Fl("localStorage")}Ut.getLocalStorage=XM;var Yw={};Object.defineProperty(Yw,"__esModule",{value:!0});var cA=Yw.getWindowMetadata=void 0;const lA=Ut;function JM(){let e,t;try{e=lA.getDocumentOrThrow(),t=lA.getLocationOrThrow()}catch{return null}function n(){const d=e.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let E=t.protocol+"//"+t.host;if(w.indexOf("/")===0)E+=w;else{const S=t.pathname.split("/");S.pop();const v=S.join("/");E+=v+"/"+w}h.push(E)}else if(w.indexOf("//")===0){const E=t.protocol+w;h.push(E)}else h.push(w)}}return h}function r(...d){const h=e.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function i(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=e.title),d}function s(){return r("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=t.origin,l=n();return{description:a,url:c,icons:l,name:o}}cA=Yw.getWindowMetadata=JM;const QM="0.1.1";function eD(){return QM}class kt extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof kt){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),i=n.cause instanceof kt&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${i??""}`,a=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${eD()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=i,this.shortMessage=t}walk(t){return uA(this,t)}}function uA(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?uA(e.cause,t):t?null:e}const vd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function m2(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function wc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function ba(e,...t){if(!m2(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function dA(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");wc(e.outputLen),wc(e.blockLen)}function Ed(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function fA(e,t){ba(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function tD(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Ms(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Xw(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Ds(e,t){return e<<32-t|e>>>t}function y2(e,t){return e<<t|e>>>32-t>>>0}const nD=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function rD(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function iD(e){for(let t=0;t<e.length;t++)e[t]=rD(e[t]);return e}const hA=nD?e=>e:iD,pA=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",sD=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ad(e){if(ba(e),pA)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=sD[e[n]];return t}const va={_0:48,_9:57,A:65,F:70,a:97,f:102};function gA(e){if(e>=va._0&&e<=va._9)return e-va._0;if(e>=va.A&&e<=va.F)return e-(va.A-10);if(e>=va.a&&e<=va.f)return e-(va.a-10)}function w2(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(pA)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=gA(e.charCodeAt(s)),a=gA(e.charCodeAt(s+1));if(o===void 0||a===void 0){const c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Jw(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function b2(e){return typeof e=="string"&&(e=Jw(e)),ba(e),e}function rs(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];ba(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}class Qw{}function wf(e){const t=r=>e().update(b2(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function jl(e=32){if(vd&&typeof vd.getRandomValues=="function")return vd.getRandomValues(new Uint8Array(e));if(vd&&typeof vd.randomBytes=="function")return Uint8Array.from(vd.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function oD(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+l,a,r)}function aD(e,t,n){return e&t^~e&n}function cD(e,t,n){return e&t^e&n^t&n}class e6 extends Qw{constructor(t,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=Xw(this.buffer)}update(t){Ed(this),t=b2(t),ba(t);const{view:n,buffer:r,blockLen:i}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Xw(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ed(this),fA(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,Ms(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;oD(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Xw(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=s,t.length=i,t.pos=a,i%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Ea=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Xn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),lD=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),mA=Uint8Array.from(new Array(16).fill(0).map((e,t)=>t)),uD=mA.map(e=>(9*e+5)%16),yA=(()=>{const n=[[mA],[uD]];for(let r=0;r<4;r++)for(let i of n)i.push(i[r].map(s=>lD[s]));return n})(),wA=yA[0],bA=yA[1],vA=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>Uint8Array.from(e)),dD=wA.map((e,t)=>e.map(n=>vA[t][n])),fD=bA.map((e,t)=>e.map(n=>vA[t][n])),hD=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),pD=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function EA(e,t,n,r){return e===0?t^n^r:e===1?t&n|~t&r:e===2?(t|~n)^r:e===3?t&r|n&~r:t^(n|~r)}const v2=new Uint32Array(16);class gD extends e6{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:r,h3:i,h4:s}=this;return[t,n,r,i,s]}set(t,n,r,i,s){this.h0=t|0,this.h1=n|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(t,n){for(let f=0;f<16;f++,n+=4)v2[f]=t.getUint32(n,!0);let r=this.h0|0,i=r,s=this.h1|0,o=s,a=this.h2|0,c=a,l=this.h3|0,u=l,d=this.h4|0,h=d;for(let f=0;f<5;f++){const p=4-f,g=hD[f],w=pD[f],E=wA[f],S=bA[f],v=dD[f],b=fD[f];for(let $=0;$<16;$++){const O=y2(r+EA(f,s,a,l)+v2[E[$]]+g,v[$])+d|0;r=d,d=l,l=y2(a,10)|0,a=s,s=O}for(let $=0;$<16;$++){const O=y2(i+EA(p,o,c,u)+v2[S[$]]+w,b[$])+h|0;i=h,h=u,u=y2(c,10)|0,c=o,o=O}}this.set(this.h1+a+u|0,this.h2+l+h|0,this.h3+d+i|0,this.h4+r+o|0,this.h0+s+c|0)}roundClean(){Ms(v2)}destroy(){this.destroyed=!0,Ms(this.buffer),this.set(0,0,0,0,0)}}const mD=wf(()=>new gD),E2=BigInt(2**32-1),AA=BigInt(32);function yD(e,t=!1){return t?{h:Number(e&E2),l:Number(e>>AA&E2)}:{h:Number(e>>AA&E2)|0,l:Number(e&E2)|0}}function xA(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=yD(e[s],t);[r[s],i[s]]=[o,a]}return[r,i]}const CA=(e,t,n)=>e>>>n,_A=(e,t,n)=>e<<32-n|t>>>n,xd=(e,t,n)=>e>>>n|t<<32-n,Cd=(e,t,n)=>e<<32-n|t>>>n,A2=(e,t,n)=>e<<64-n|t>>>n-32,x2=(e,t,n)=>e>>>n-32|t<<64-n,wD=(e,t,n)=>e<<n|t>>>32-n,bD=(e,t,n)=>t<<n|e>>>32-n,vD=(e,t,n)=>t<<n-32|e>>>64-n,ED=(e,t,n)=>e<<n-32|t>>>64-n;function Aa(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const AD=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),xD=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,CD=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),_D=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,SD=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),ID=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,$D=BigInt(0),bf=BigInt(1),TD=BigInt(2),ND=BigInt(7),PD=BigInt(256),OD=BigInt(113),SA=[],IA=[],$A=[];for(let e=0,t=bf,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],SA.push(2*(5*r+n)),IA.push((e+1)*(e+2)/2%64);let i=$D;for(let s=0;s<7;s++)t=(t<<bf^(t>>ND)*OD)%PD,t&TD&&(i^=bf<<(bf<<BigInt(s))-bf);$A.push(i)}const TA=xA($A,!0),RD=TA[0],kD=TA[1],NA=(e,t,n)=>n>32?vD(e,t,n):wD(e,t,n),PA=(e,t,n)=>n>32?ED(e,t,n):bD(e,t,n);function BD(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=NA(l,u,1)^n[a],h=PA(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)e[o+f]^=d,e[o+f+1]^=h}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=IA[o],c=NA(i,s,a),l=PA(i,s,a),u=SA[o];i=e[u],s=e[u+1],e[u]=c,e[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=RD[r],e[1]^=kD[r]}Ms(n)}class t6 extends Qw{constructor(t,n,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,wc(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=tD(this.state)}clone(){return this._cloneInto()}keccak(){hA(this.state32),BD(this.state32,this.rounds),hA(this.state32),this.posOut=0,this.pos=0}update(t){Ed(this),t=b2(t),ba(t);const{blockLen:n,state:r}=this,i=t.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Ed(this,!1),ba(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return wc(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(fA(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ms(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new t6(n,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const MD=(e,t,n)=>wf(()=>new t6(t,e,n)),n6=MD(1,136,256/8),DD=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bc=new Uint32Array(64);class UD extends e6{constructor(t=32){super(64,t,8,!1),this.A=Ea[0]|0,this.B=Ea[1]|0,this.C=Ea[2]|0,this.D=Ea[3]|0,this.E=Ea[4]|0,this.F=Ea[5]|0,this.G=Ea[6]|0,this.H=Ea[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[t,n,r,i,s,o,a,c]}set(t,n,r,i,s,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)bc[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const h=bc[d-15],f=bc[d-2],p=Ds(h,7)^Ds(h,18)^h>>>3,g=Ds(f,17)^Ds(f,19)^f>>>10;bc[d]=g+bc[d-7]+p+bc[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Ds(a,6)^Ds(a,11)^Ds(a,25),f=u+h+aD(a,c,l)+DD[d]+bc[d]|0,g=(Ds(r,2)^Ds(r,13)^Ds(r,22))+cD(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Ms(bc)}destroy(){this.set(0,0,0,0,0,0,0,0),Ms(this.buffer)}}const OA=xA(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),LD=OA[0],FD=OA[1],vc=new Uint32Array(80),Ec=new Uint32Array(80);class RA extends e6{constructor(t=64){super(128,t,16,!1),this.Ah=Xn[0]|0,this.Al=Xn[1]|0,this.Bh=Xn[2]|0,this.Bl=Xn[3]|0,this.Ch=Xn[4]|0,this.Cl=Xn[5]|0,this.Dh=Xn[6]|0,this.Dl=Xn[7]|0,this.Eh=Xn[8]|0,this.El=Xn[9]|0,this.Fh=Xn[10]|0,this.Fl=Xn[11]|0,this.Gh=Xn[12]|0,this.Gl=Xn[13]|0,this.Hh=Xn[14]|0,this.Hl=Xn[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[t,n,r,i,s,o,a,c,l,u,d,h,f,p,g,w]}set(t,n,r,i,s,o,a,c,l,u,d,h,f,p,g,w){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(t,n){for(let v=0;v<16;v++,n+=4)vc[v]=t.getUint32(n),Ec[v]=t.getUint32(n+=4);for(let v=16;v<80;v++){const b=vc[v-15]|0,$=Ec[v-15]|0,O=xd(b,$,1)^xd(b,$,8)^CA(b,$,7),k=Cd(b,$,1)^Cd(b,$,8)^_A(b,$,7),L=vc[v-2]|0,M=Ec[v-2]|0,z=xd(L,M,19)^A2(L,M,61)^CA(L,M,6),H=Cd(L,M,19)^x2(L,M,61)^_A(L,M,6),I=CD(k,H,Ec[v-7],Ec[v-16]),x=_D(I,O,z,vc[v-7],vc[v-16]);vc[v]=x|0,Ec[v]=I|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:E,Hl:S}=this;for(let v=0;v<80;v++){const b=xd(d,h,14)^xd(d,h,18)^A2(d,h,41),$=Cd(d,h,14)^Cd(d,h,18)^x2(d,h,41),O=d&f^~d&g,k=h&p^~h&w,L=SD(S,$,k,FD[v],Ec[v]),M=ID(L,E,b,O,LD[v],vc[v]),z=L|0,H=xd(r,i,28)^A2(r,i,34)^A2(r,i,39),I=Cd(r,i,28)^x2(r,i,34)^x2(r,i,39),x=r&s^r&a^s&a,T=i&o^i&c^o&c;E=g|0,S=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Aa(l|0,u|0,M|0,z|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const m=AD(z,I,T);r=xD(m,M,H,x),i=m|0}({h:r,l:i}=Aa(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Aa(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Aa(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Aa(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Aa(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Aa(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Aa(this.Gh|0,this.Gl|0,g|0,w|0),{h:E,l:S}=Aa(this.Hh|0,this.Hl|0,E|0,S|0),this.set(r,i,s,o,a,c,l,u,d,h,f,p,g,w,E,S)}roundClean(){Ms(vc,Ec)}destroy(){Ms(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class HD extends RA{constructor(){super(48),this.Ah=Yn[0]|0,this.Al=Yn[1]|0,this.Bh=Yn[2]|0,this.Bl=Yn[3]|0,this.Ch=Yn[4]|0,this.Cl=Yn[5]|0,this.Dh=Yn[6]|0,this.Dl=Yn[7]|0,this.Eh=Yn[8]|0,this.El=Yn[9]|0,this.Fh=Yn[10]|0,this.Fl=Yn[11]|0,this.Gh=Yn[12]|0,this.Gl=Yn[13]|0,this.Hh=Yn[14]|0,this.Hl=Yn[15]|0}}const Ii=wf(()=>new UD),jD=wf(()=>new RA),zD=wf(()=>new HD),VD=Ii;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const r6=BigInt(0),C2=BigInt(1);function vf(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ac(e){if(!vf(e))throw new Error("Uint8Array expected")}function Ef(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function _2(e){const t=e.toString(16);return t.length&1?"0"+t:t}function kA(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?r6:BigInt("0x"+e)}const BA=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ZD=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function zl(e){if(Ac(e),BA)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=ZD[e[n]];return t}const xa={_0:48,_9:57,A:65,F:70,a:97,f:102};function MA(e){if(e>=xa._0&&e<=xa._9)return e-xa._0;if(e>=xa.A&&e<=xa.F)return e-(xa.A-10);if(e>=xa.a&&e<=xa.f)return e-(xa.a-10)}function S2(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(BA)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=MA(e.charCodeAt(s)),a=MA(e.charCodeAt(s+1));if(o===void 0||a===void 0){const c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function hr(e){return kA(zl(e))}function DA(e){return Ac(e),kA(zl(Uint8Array.from(e).reverse()))}function pn(e,t){return S2(e.toString(16).padStart(t*2,"0"))}function UA(e,t){return pn(e,t).reverse()}function Jn(e,t,n){let r;if(typeof t=="string")try{r=S2(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(vf(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function rn(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Ac(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}function i6(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const s6=e=>typeof e=="bigint"&&r6<=e;function o6(e,t,n){return s6(e)&&s6(t)&&s6(n)&&t<=e&&e<n}function _d(e,t,n,r){if(!o6(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Af(e){let t;for(t=0;e>r6;e>>=C2,t+=1);return t}function WD(e,t){return e>>BigInt(t)&C2}const Vl=e=>(C2<<BigInt(e))-C2,a6=e=>new Uint8Array(e),LA=e=>Uint8Array.from(e);function qD(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=a6(e),i=a6(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),c=(d=a6(0))=>{i=a(LA([0]),d),r=a(),d.length!==0&&(i=a(LA([1]),d),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<t;){r=a();const f=r.slice();h.push(f),d+=r.length}return rn(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const GD={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||vf(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function xf(e,t,n={}){const r=(i,s,o)=>{const a=GD[s];if(typeof a!="function")throw new Error("invalid validator function");const c=e[i];if(!(o&&c===void 0)&&!a(c,e))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}const FA=()=>{throw new Error("not implemented")};function c6(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const s=e(n,...r);return t.set(n,s),s}}function KD(e,t){if(WA(e)>t)throw new yU({givenSize:WA(e),maxSize:t})}const Ca={zero:48,nine:57,A:65,F:70,a:97,f:102};function HA(e){if(e>=Ca.zero&&e<=Ca.nine)return e-Ca.zero;if(e>=Ca.A&&e<=Ca.F)return e-(Ca.A-10);if(e>=Ca.a&&e<=Ca.f)return e-(Ca.a-10)}function YD(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new wU({size:e.length,targetSize:r,type:"Bytes"});const i=new Uint8Array(r);for(let s=0;s<r;s++){const o=n==="right";i[o?s:r-s-1]=e[o?s:e.length-s-1]}return i}function l6(e,t){if(Sa(e)>t)throw new aU({givenSize:Sa(e),maxSize:t})}function XD(e,t){if(typeof t=="number"&&t>0&&t>Sa(e)-1)throw new ZA({offset:t,position:"start",size:Sa(e)})}function JD(e,t,n){if(typeof t=="number"&&typeof n=="number"&&Sa(e)!==n-t)throw new ZA({offset:n,position:"end",size:Sa(e)})}function jA(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const i=e.replace("0x","");if(i.length>r*2)throw new cU({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const QD="#__bigint";function u6(e,t,n){return JSON.stringify(e,(r,i)=>typeof t=="function"?t(r,i):typeof i=="bigint"?i.toString()+QD:i,n)}const eU=new TextEncoder,tU=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function nU(e,t={}){const{strict:n=!1}=t;if(!e)throw new zA(e);if(typeof e!="string")throw new zA(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new VA(e);if(!e.startsWith("0x"))throw new VA(e)}function d6(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function f6(e){return e instanceof Uint8Array?Cf(e):Array.isArray(e)?Cf(new Uint8Array(e)):e}function rU(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(l6(n,t.size),$2(n,t.size)):n}function Cf(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=tU[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(l6(r,t.size),h6(r,t.size)):r}function I2(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&i>s||i<o){const l=typeof e=="bigint"?"n":"";throw new oU({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${e}${l}`})}const c=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?$2(c,r):c}function iU(e,t={}){return Cf(eU.encode(e),t)}function $2(e,t){return jA(e,{dir:"left",size:t})}function h6(e,t){return jA(e,{dir:"right",size:t})}function _a(e,t,n,r={}){const{strict:i}=r;XD(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return i&&JD(s,t,n),s}function Sa(e){return Math.ceil((e.length-2)/2)}function sU(e,t={}){const{strict:n=!1}=t;try{return nU(e,{strict:n}),!0}catch{return!1}}class oU extends kt{constructor({max:t,min:n,signed:r,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class zA extends kt{constructor(t){super(`Value \`${typeof t=="object"?u6(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class VA extends kt{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class aU extends kt{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class ZA extends kt{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class cU extends kt{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}const lU=new TextEncoder;function uU(e){if(!(e instanceof Uint8Array)){if(!e)throw new T2(e);if(typeof e!="object")throw new T2(e);if(!("BYTES_PER_ELEMENT"in e))throw new T2(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new T2(e)}}function dU(e){return e instanceof Uint8Array?e:typeof e=="string"?hU(e):fU(e)}function fU(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function hU(e,t={}){const{size:n}=t;let r=e;n&&(l6(e,n),r=h6(e,n));let i=r.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const l=HA(i.charCodeAt(c++)),u=HA(i.charCodeAt(c++));if(l===void 0||u===void 0)throw new kt(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=l*16+u}return o}function pU(e,t={}){const{size:n}=t,r=lU.encode(e);return typeof n=="number"?(KD(r,n),gU(r,n)):r}function gU(e,t){return YD(e,{dir:"right",size:t})}function WA(e){return e.length}function mU(e){try{return uU(e),!0}catch{return!1}}class T2 extends kt{constructor(t){super(`Value \`${typeof t=="object"?u6(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class yU extends kt{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class wU extends kt{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function qA(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=n6(dU(e));return n==="Bytes"?r:Cf(r)}class bU extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const p6={checksum:new bU(8192)}.checksum;function GA(e,t={}){const{compressed:n}=t,{prefix:r,x:i,y:s}=e;if(n===!1||typeof i=="bigint"&&typeof s=="bigint"){if(r!==4)throw new YA({prefix:r,cause:new _U});return}if(n===!0||typeof i=="bigint"&&typeof s>"u"){if(r!==3&&r!==2)throw new YA({prefix:r,cause:new CU});return}throw new xU({publicKey:e})}function vU(e){const t=(()=>{if(sU(e))return KA(e);if(mU(e))return EU(e);const{prefix:n,x:r,y:i}=e;return typeof r=="bigint"&&typeof i=="bigint"?{prefix:n??4,x:r,y:i}:{prefix:n,x:r}})();return GA(t),t}function EU(e){return KA(Cf(e))}function KA(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new SU({publicKey:e});if(e.length===130){const r=BigInt(_a(e,0,32)),i=BigInt(_a(e,32,64));return{prefix:4,x:r,y:i}}if(e.length===132){const r=Number(_a(e,0,1)),i=BigInt(_a(e,1,33)),s=BigInt(_a(e,33,65));return{prefix:r,x:i,y:s}}const t=Number(_a(e,0,1)),n=BigInt(_a(e,1,33));return{prefix:t,x:n}}function AU(e,t={}){GA(e);const{prefix:n,x:r,y:i}=e,{includePrefix:s=!0}=t;return d6(s?I2(n,{size:1}):"0x",I2(r,{size:32}),typeof i=="bigint"?I2(i,{size:32}):"0x")}class xU extends kt{constructor({publicKey:t}){super(`Value \`${u6(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class YA extends kt{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class CU extends kt{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class _U extends kt{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class SU extends kt{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${Sa(f6(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}const IU=/^0x[a-fA-F0-9]{40}$/;function g6(e,t={}){const{strict:n=!0}=t;if(!IU.test(e))throw new JA({address:e,cause:new NU});if(n){if(e.toLowerCase()===e)return;if(XA(e)!==e)throw new JA({address:e,cause:new PU})}}function XA(e){if(p6.has(e))return p6.get(e);g6(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=qA(pU(t),{as:"Bytes"}),r=t.split("");for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&r[s]&&(r[s]=r[s].toUpperCase()),(n[s>>1]&15)>=8&&r[s+1]&&(r[s+1]=r[s+1].toUpperCase());const i=`0x${r.join("")}`;return p6.set(e,i),i}function $U(e,t={}){const{checksum:n=!1}=t;return g6(e),n?XA(e):e}function TU(e,t={}){const n=qA(`0x${AU(e).slice(4)}`).substring(26);return $U(`0x${n}`,t)}class JA extends kt{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class NU extends kt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class PU extends kt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const OU=/^(.*)\[([0-9]*)\]$/,RU=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,kU=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function m6(e,t){if(e.length!==t.length)throw new MU({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const i=e[r],s=t[r];n.push(m6.encode(i,s))}return d6(...n)}(function(e){function t(n,r,i=!1){if(n==="address"){const c=r;return g6(c),$2(c.toLowerCase(),i?32:0)}if(n==="string")return iU(r);if(n==="bytes")return r;if(n==="bool")return $2(rU(r),i?32:1);const s=n.match(kU);if(s){const[c,l,u="256"]=s,d=Number.parseInt(u,10)/8;return I2(r,{size:i?32:d,signed:l==="int"})}const o=n.match(RU);if(o){const[c,l]=o;if(Number.parseInt(l,10)!==(r.length-2)/2)throw new BU({expectedSize:Number.parseInt(l,10),value:r});return h6(r,i?32:0)}const a=n.match(OU);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(t(l,r[d],!0));return u.length===0?"0x":d6(...u)}throw new DU(n)}e.encode=t})(m6||(m6={}));class BU extends kt{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${Sa(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class MU extends kt{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class DU extends kt{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class QA extends Qw{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,dA(t);const r=b2(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Ms(s)}update(t){return Ed(this),this.iHash.update(t),this}digestInto(t){Ed(this),ba(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const _f=(e,t,n)=>new QA(e,t).update(n).digest();_f.create=(e,t)=>new QA(e,t);const kr=BigInt(0),pr=BigInt(1),Zl=BigInt(2),UU=BigInt(3),e9=BigInt(4),t9=BigInt(5),n9=BigInt(8);function gr(e,t){const n=e%t;return n>=kr?n:t+n}function $i(e,t,n){let r=e;for(;t-- >kr;)r*=r,r%=n;return r}function y6(e,t){if(e===kr)throw new Error("invert: expected non-zero number");if(t<=kr)throw new Error("invert: expected positive modulus, got "+t);let n=gr(e,t),r=t,i=kr,s=pr;for(;n!==kr;){const a=r/n,c=r%n,l=i-s*a;r=n,n=c,i=s,s=l}if(r!==pr)throw new Error("invert: does not exist");return gr(i,t)}function r9(e,t){const n=(e.ORDER+pr)/e9,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function LU(e,t){const n=(e.ORDER-t9)/n9,r=e.mul(t,Zl),i=e.pow(r,n),s=e.mul(t,i),o=e.mul(e.mul(s,Zl),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function FU(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-pr,n=0;for(;t%Zl===kr;)t/=Zl,n++;let r=Zl;const i=xc(e);for(;P2(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return r9;let s=i.pow(r,t);const o=(t+pr)/Zl;return function(c,l){if(c.is0(l))return l;if(P2(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,s),h=c.pow(l,t),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=pr<<BigInt(u-p-1),E=c.pow(d,w);u=p,d=c.sqr(E),h=c.mul(h,d),f=c.mul(f,E)}return f}}function HU(e){return e%e9===UU?r9:e%n9===t9?LU:FU(e)}const jU=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function i9(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=jU.reduce((r,i)=>(r[i]="function",r),t);return xf(e,n)}function N2(e,t,n){if(n<kr)throw new Error("invalid exponent, negatives unsupported");if(n===kr)return e.ONE;if(n===pr)return t;let r=e.ONE,i=t;for(;n>kr;)n&pr&&(r=e.mul(r,i)),i=e.sqr(i),n>>=pr;return r}function Wl(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((o,a,c)=>e.is0(a)?o:(r[c]=o,e.mul(o,a)),e.ONE),s=e.inv(i);return t.reduceRight((o,a,c)=>e.is0(a)?o:(r[c]=e.mul(o,r[c]),e.mul(o,a)),s),r}function P2(e,t){const n=(e.ORDER-pr)/Zl,r=e.pow(t,n),i=e.eql(r,e.ONE),s=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function s9(e,t){t!==void 0&&wc(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function xc(e,t,n=!1,r={}){if(e<=kr)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=s9(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:s,MASK:Vl(i),ZERO:kr,ONE:pr,create:c=>gr(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return kr<=c&&c<e},is0:c=>c===kr,isOdd:c=>(c&pr)===pr,neg:c=>gr(-c,e),eql:(c,l)=>c===l,sqr:c=>gr(c*c,e),add:(c,l)=>gr(c+l,e),sub:(c,l)=>gr(c-l,e),mul:(c,l)=>gr(c*l,e),pow:(c,l)=>N2(a,c,l),div:(c,l)=>gr(c*y6(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>y6(c,e),sqrt:r.sqrt||(c=>(o||(o=HU(e)),o(a,c))),toBytes:c=>n?UA(c,s):pn(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?DA(c):hr(c)},invertBatch:c=>Wl(a,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(a)}function o9(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function w6(e){const t=o9(e);return t+Math.ceil(t/2)}function a9(e,t,n=!1){const r=e.length,i=o9(t),s=w6(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?DA(e):hr(e),a=gr(o,t-pr)+pr;return n?UA(a,i):pn(a,i)}const c9=BigInt(0),b6=BigInt(1);function v6(e,t){const n=t.negate();return e?n:t}function l9(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function E6(e,t){l9(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,s=Vl(e),o=BigInt(e);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function u9(e,t,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(e&i),c=e>>o;a>r&&(a-=s,c+=b6);const l=t*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=t%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function zU(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function VU(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const A6=new WeakMap,d9=new WeakMap;function x6(e){return d9.get(e)||1}function ZU(e,t){return{constTimeNegate:v6,hasPrecomputes(n){return x6(n)!==1},unsafeLadder(n,r,i=e.ZERO){let s=n;for(;r>c9;)r&b6&&(i=i.add(s)),s=s.double(),r>>=b6;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=E6(r,t),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){let s=e.ZERO,o=e.BASE;const a=E6(n,t);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=u9(i,c,a);i=l,d?o=o.add(v6(f,r[p])):s=s.add(v6(h,r[u]))}return{p:s,f:o}},wNAFUnsafe(n,r,i,s=e.ZERO){const o=E6(n,t);for(let a=0;a<o.windows&&i!==c9;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=u9(i,a,o);if(i=c,!u){const h=r[l];s=s.add(d?h.negate():h)}}return s},getPrecomputes(n,r,i){let s=A6.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&A6.set(r,i(s))),s},wNAFCached(n,r,i){const s=x6(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=x6(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){l9(r,t),d9.set(n,r),A6.delete(n)}}}function WU(e,t,n,r){zU(n,e),VU(r,t);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=Af(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Vl(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((t.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<s;g++){const w=r[g],E=Number(w>>BigInt(f)&l);u[E]=u[E].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function f9(e){return i9(e.Fp),xf(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...s9(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function h9(e){e.lowS!==void 0&&Ef("lowS",e.lowS),e.prehash!==void 0&&Ef("prehash",e.prehash)}function qU(e){const t=f9(e);xf(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class GU extends Error{constructor(t=""){super(t)}}const Ia={Err:GU,_tlv:{encode:(e,t)=>{const{Err:n}=Ia;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=_2(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?_2(i.length/2|128):"";return _2(e)+s+i+t},decode(e,t){const{Err:n}=Ia;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=t.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=Ia;if(e<is)throw new t("integer: negative integers are not allowed");let n=_2(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=Ia;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return hr(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Ia,i=Jn("signature",e),{v:s,l:o}=r.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(e){const{_tlv:t,_int:n}=Ia,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),s=r+i;return t.encode(48,s)}};function C6(e,t){return zl(pn(e,t))}const is=BigInt(0),Pt=BigInt(1),Cc=BigInt(2),Sf=BigInt(3),_6=BigInt(4);function S6(e){const t=qU(e),{Fp:n}=t,r=xc(t.n,t.nBitLength),i=t.toBytes||((v,b,$)=>{const O=b.toAffine();return rn(Uint8Array.from([4]),n.toBytes(O.x),n.toBytes(O.y))}),s=t.fromBytes||(v=>{const b=v.subarray(1),$=n.fromBytes(b.subarray(0,n.BYTES)),O=n.fromBytes(b.subarray(n.BYTES,2*n.BYTES));return{x:$,y:O}});function o(v){const{a:b,b:$}=t,O=n.sqr(v),k=n.mul(O,v);return n.add(n.add(k,n.mul(v,b)),$)}function a(v,b){const $=n.sqr(b),O=o(v);return n.eql($,O)}if(!a(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(t.a,Sf),_6),l=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(c,l)))throw new Error("bad curve params: a or b");function u(v){return o6(v,Pt,t.n)}function d(v){const{allowedPrivateKeyLengths:b,nByteLength:$,wrapPrivateKey:O,n:k}=t;if(b&&typeof v!="bigint"){if(vf(v)&&(v=zl(v)),typeof v!="string"||!b.includes(v.length))throw new Error("invalid private key");v=v.padStart($*2,"0")}let L;try{L=typeof v=="bigint"?v:hr(Jn("private key",v,$))}catch{throw new Error("invalid private key, expected hex or "+$+" bytes, got "+typeof v)}return O&&(L=gr(L,k)),_d("private key",L,Pt,k),L}function h(v){if(!(v instanceof g))throw new Error("ProjectivePoint expected")}const f=c6((v,b)=>{const{px:$,py:O,pz:k}=v;if(n.eql(k,n.ONE))return{x:$,y:O};const L=v.is0();b==null&&(b=L?n.ONE:n.inv(k));const M=n.mul($,b),z=n.mul(O,b),H=n.mul(k,b);if(L)return{x:n.ZERO,y:n.ZERO};if(!n.eql(H,n.ONE))throw new Error("invZ was invalid");return{x:M,y:z}}),p=c6(v=>{if(v.is0()){if(t.allowInfinityPoint&&!n.is0(v.py))return;throw new Error("bad point: ZERO")}const{x:b,y:$}=v.toAffine();if(!n.isValid(b)||!n.isValid($))throw new Error("bad point: x or y not FE");if(!a(b,$))throw new Error("bad point: equation left != right");if(!v.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(b,$,O){if(b==null||!n.isValid(b))throw new Error("x required");if($==null||!n.isValid($)||n.is0($))throw new Error("y required");if(O==null||!n.isValid(O))throw new Error("z required");this.px=b,this.py=$,this.pz=O,Object.freeze(this)}static fromAffine(b){const{x:$,y:O}=b||{};if(!b||!n.isValid($)||!n.isValid(O))throw new Error("invalid affine point");if(b instanceof g)throw new Error("projective point not allowed");const k=L=>n.eql(L,n.ZERO);return k($)&&k(O)?g.ZERO:new g($,O,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const $=Wl(n,b.map(O=>O.pz));return b.map((O,k)=>O.toAffine($[k])).map(g.fromAffine)}static fromHex(b){const $=g.fromAffine(s(Jn("pointHex",b)));return $.assertValidity(),$}static fromPrivateKey(b){return g.BASE.multiply(d(b))}static msm(b,$){return WU(g,r,b,$)}_setWindowSize(b){S.setWindowSize(this,b)}assertValidity(){p(this)}hasEvenY(){const{y:b}=this.toAffine();if(n.isOdd)return!n.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){h(b);const{px:$,py:O,pz:k}=this,{px:L,py:M,pz:z}=b,H=n.eql(n.mul($,z),n.mul(L,k)),I=n.eql(n.mul(O,z),n.mul(M,k));return H&&I}negate(){return new g(this.px,n.neg(this.py),this.pz)}double(){const{a:b,b:$}=t,O=n.mul($,Sf),{px:k,py:L,pz:M}=this;let z=n.ZERO,H=n.ZERO,I=n.ZERO,x=n.mul(k,k),T=n.mul(L,L),m=n.mul(M,M),y=n.mul(k,L);return y=n.add(y,y),I=n.mul(k,M),I=n.add(I,I),z=n.mul(b,I),H=n.mul(O,m),H=n.add(z,H),z=n.sub(T,H),H=n.add(T,H),H=n.mul(z,H),z=n.mul(y,z),I=n.mul(O,I),m=n.mul(b,m),y=n.sub(x,m),y=n.mul(b,y),y=n.add(y,I),I=n.add(x,x),x=n.add(I,x),x=n.add(x,m),x=n.mul(x,y),H=n.add(H,x),m=n.mul(L,M),m=n.add(m,m),x=n.mul(m,y),z=n.sub(z,x),I=n.mul(m,T),I=n.add(I,I),I=n.add(I,I),new g(z,H,I)}add(b){h(b);const{px:$,py:O,pz:k}=this,{px:L,py:M,pz:z}=b;let H=n.ZERO,I=n.ZERO,x=n.ZERO;const T=t.a,m=n.mul(t.b,Sf);let y=n.mul($,L),_=n.mul(O,M),N=n.mul(k,z),P=n.add($,O),R=n.add(L,M);P=n.mul(P,R),R=n.add(y,_),P=n.sub(P,R),R=n.add($,k);let j=n.add(L,z);return R=n.mul(R,j),j=n.add(y,N),R=n.sub(R,j),j=n.add(O,k),H=n.add(M,z),j=n.mul(j,H),H=n.add(_,N),j=n.sub(j,H),x=n.mul(T,R),H=n.mul(m,N),x=n.add(H,x),H=n.sub(_,x),x=n.add(_,x),I=n.mul(H,x),_=n.add(y,y),_=n.add(_,y),N=n.mul(T,N),R=n.mul(m,R),_=n.add(_,N),N=n.sub(y,N),N=n.mul(T,N),R=n.add(R,N),y=n.mul(_,R),I=n.add(I,y),y=n.mul(j,R),H=n.mul(P,H),H=n.sub(H,y),y=n.mul(P,_),x=n.mul(j,x),x=n.add(x,y),new g(H,I,x)}subtract(b){return this.add(b.negate())}is0(){return this.equals(g.ZERO)}wNAF(b){return S.wNAFCached(this,b,g.normalizeZ)}multiplyUnsafe(b){const{endo:$,n:O}=t;_d("scalar",b,is,O);const k=g.ZERO;if(b===is)return k;if(this.is0()||b===Pt)return this;if(!$||S.hasPrecomputes(this))return S.wNAFCachedUnsafe(this,b,g.normalizeZ);let{k1neg:L,k1:M,k2neg:z,k2:H}=$.splitScalar(b),I=k,x=k,T=this;for(;M>is||H>is;)M&Pt&&(I=I.add(T)),H&Pt&&(x=x.add(T)),T=T.double(),M>>=Pt,H>>=Pt;return L&&(I=I.negate()),z&&(x=x.negate()),x=new g(n.mul(x.px,$.beta),x.py,x.pz),I.add(x)}multiply(b){const{endo:$,n:O}=t;_d("scalar",b,Pt,O);let k,L;if($){const{k1neg:M,k1:z,k2neg:H,k2:I}=$.splitScalar(b);let{p:x,f:T}=this.wNAF(z),{p:m,f:y}=this.wNAF(I);x=S.constTimeNegate(M,x),m=S.constTimeNegate(H,m),m=new g(n.mul(m.px,$.beta),m.py,m.pz),k=x.add(m),L=T.add(y)}else{const{p:M,f:z}=this.wNAF(b);k=M,L=z}return g.normalizeZ([k,L])[0]}multiplyAndAddUnsafe(b,$,O){const k=g.BASE,L=(z,H)=>H===is||H===Pt||!z.equals(k)?z.multiplyUnsafe(H):z.multiply(H),M=L(this,$).add(L(b,O));return M.is0()?void 0:M}toAffine(b){return f(this,b)}isTorsionFree(){const{h:b,isTorsionFree:$}=t;if(b===Pt)return!0;if($)return $(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:$}=t;return b===Pt?this:$?$(g,this):this.multiplyUnsafe(t.h)}toRawBytes(b=!0){return Ef("isCompressed",b),this.assertValidity(),i(g,this,b)}toHex(b=!0){return Ef("isCompressed",b),zl(this.toRawBytes(b))}}g.BASE=new g(t.Gx,t.Gy,n.ONE),g.ZERO=new g(n.ZERO,n.ONE,n.ZERO);const{endo:w,nBitLength:E}=t,S=ZU(g,w?Math.ceil(E/2):E);return{CURVE:t,ProjectivePoint:g,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:u}}function KU(e){const t=f9(e);return xf(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function YU(e){const t=KU(e),{Fp:n,n:r,nByteLength:i,nBitLength:s}=t,o=n.BYTES+1,a=2*n.BYTES+1;function c(m){return gr(m,r)}function l(m){return y6(m,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:f}=S6({...t,toBytes(m,y,_){const N=y.toAffine(),P=n.toBytes(N.x),R=rn;return Ef("isCompressed",_),_?R(Uint8Array.from([y.hasEvenY()?2:3]),P):R(Uint8Array.from([4]),P,n.toBytes(N.y))},fromBytes(m){const y=m.length,_=m[0],N=m.subarray(1);if(y===o&&(_===2||_===3)){const P=hr(N);if(!o6(P,Pt,n.ORDER))throw new Error("Point is not on curve");const R=h(P);let j;try{j=n.sqrt(R)}catch(K){const W=K instanceof Error?": "+K.message:"";throw new Error("Point is not on curve"+W)}const Z=(j&Pt)===Pt;return(_&1)===1!==Z&&(j=n.neg(j)),{x:P,y:j}}else if(y===a&&_===4){const P=n.fromBytes(N.subarray(0,n.BYTES)),R=n.fromBytes(N.subarray(n.BYTES,2*n.BYTES));return{x:P,y:R}}else{const P=o,R=a;throw new Error("invalid Point, expected length of "+P+", or uncompressed "+R+", got "+y)}}});function p(m){const y=r>>Pt;return m>y}function g(m){return p(m)?c(-m):m}const w=(m,y,_)=>hr(m.slice(y,_));class E{constructor(y,_,N){_d("r",y,Pt,r),_d("s",_,Pt,r),this.r=y,this.s=_,N!=null&&(this.recovery=N),Object.freeze(this)}static fromCompact(y){const _=i;return y=Jn("compactSignature",y,_*2),new E(w(y,0,_),w(y,_,2*_))}static fromDER(y){const{r:_,s:N}=Ia.toSig(Jn("DER",y));return new E(_,N)}assertValidity(){}addRecoveryBit(y){return new E(this.r,this.s,y)}recoverPublicKey(y){const{r:_,s:N,recovery:P}=this,R=k(Jn("msgHash",y));if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");const j=P===2||P===3?_+t.n:_;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Z=(P&1)===0?"02":"03",G=u.fromHex(Z+C6(j,n.BYTES)),K=l(j),W=c(-R*K),te=c(N*K),ne=u.BASE.multiplyAndAddUnsafe(G,W,te);if(!ne)throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return S2(this.toDERHex())}toDERHex(){return Ia.hexFromSig(this)}toCompactRawBytes(){return S2(this.toCompactHex())}toCompactHex(){const y=i;return C6(this.r,y)+C6(this.s,y)}}const S={isValidPrivateKey(m){try{return d(m),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const m=w6(t.n);return a9(t.randomBytes(m),t.n)},precompute(m=8,y=u.BASE){return y._setWindowSize(m),y.multiply(BigInt(3)),y}};function v(m,y=!0){return u.fromPrivateKey(m).toRawBytes(y)}function b(m){if(typeof m=="bigint")return!1;if(m instanceof u)return!0;const _=Jn("key",m).length,N=n.BYTES,P=N+1,R=2*N+1;if(!(t.allowedPrivateKeyLengths||i===P))return _===P||_===R}function $(m,y,_=!0){if(b(m)===!0)throw new Error("first arg must be private key");if(b(y)===!1)throw new Error("second arg must be public key");return u.fromHex(y).multiply(d(m)).toRawBytes(_)}const O=t.bits2int||function(m){if(m.length>8192)throw new Error("input is too large");const y=hr(m),_=m.length*8-s;return _>0?y>>BigInt(_):y},k=t.bits2int_modN||function(m){return c(O(m))},L=Vl(s);function M(m){return _d("num < 2^"+s,m,is,L),pn(m,i)}function z(m,y,_=H){if(["recovered","canonical"].some(oe=>oe in _))throw new Error("sign() legacy options not supported");const{hash:N,randomBytes:P}=t;let{lowS:R,prehash:j,extraEntropy:Z}=_;R==null&&(R=!0),m=Jn("msgHash",m),h9(_),j&&(m=Jn("prehashed msgHash",N(m)));const G=k(m),K=d(y),W=[M(K),M(G)];if(Z!=null&&Z!==!1){const oe=Z===!0?P(n.BYTES):Z;W.push(Jn("extraEntropy",oe))}const te=rn(...W),ne=G;function me(oe){const de=O(oe);if(!f(de))return;const $e=l(de),Pe=u.BASE.multiply(de).toAffine(),Oe=c(Pe.x);if(Oe===is)return;const Ye=c($e*c(ne+Oe*K));if(Ye===is)return;let rt=(Pe.x===Oe?0:2)|Number(Pe.y&Pt),Kn=Ye;return R&&p(Ye)&&(Kn=g(Ye),rt^=1),new E(Oe,Kn,rt)}return{seed:te,k2sig:me}}const H={lowS:t.lowS,prehash:!1},I={lowS:t.lowS,prehash:!1};function x(m,y,_=H){const{seed:N,k2sig:P}=z(m,y,_),R=t;return qD(R.hash.outputLen,R.nByteLength,R.hmac)(N,P)}u.BASE._setWindowSize(8);function T(m,y,_,N=I){const P=m;y=Jn("msgHash",y),_=Jn("publicKey",_);const{lowS:R,prehash:j,format:Z}=N;if(h9(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(Z!==void 0&&Z!=="compact"&&Z!=="der")throw new Error("format must be compact or der");const G=typeof P=="string"||vf(P),K=!G&&!Z&&typeof P=="object"&&P!==null&&typeof P.r=="bigint"&&typeof P.s=="bigint";if(!G&&!K)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let W,te;try{if(K&&(W=new E(P.r,P.s)),G){try{Z!=="compact"&&(W=E.fromDER(P))}catch(rt){if(!(rt instanceof Ia.Err))throw rt}!W&&Z!=="der"&&(W=E.fromCompact(P))}te=u.fromHex(_)}catch{return!1}if(!W||R&&W.hasHighS())return!1;j&&(y=t.hash(y));const{r:ne,s:me}=W,oe=k(y),de=l(me),$e=c(oe*de),Pe=c(ne*de),Oe=u.BASE.multiplyAndAddUnsafe(te,$e,Pe)?.toAffine();return Oe?c(Oe.x)===ne:!1}return{CURVE:t,getPublicKey:v,getSharedSecret:$,sign:x,verify:T,ProjectivePoint:u,Signature:E,utils:S}}function XU(e,t){const n=e.ORDER;let r=is;for(let p=n-Pt;p%Cc===is;p/=Cc)r+=Pt;const i=r,s=Cc<<i-Pt-Pt,o=s*Cc,a=(n-Pt)/o,c=(a-Pt)/Cc,l=o-Pt,u=s,d=e.pow(t,a),h=e.pow(t,(a+Pt)/Cc);let f=(p,g)=>{let w=d,E=e.pow(g,l),S=e.sqr(E);S=e.mul(S,g);let v=e.mul(p,S);v=e.pow(v,c),v=e.mul(v,E),E=e.mul(v,g),S=e.mul(v,p);let b=e.mul(S,E);v=e.pow(b,u);let $=e.eql(v,e.ONE);E=e.mul(S,h),v=e.mul(b,w),S=e.cmov(E,S,$),b=e.cmov(v,b,$);for(let O=i;O>Pt;O--){let k=O-Cc;k=Cc<<k-Pt;let L=e.pow(b,k);const M=e.eql(L,e.ONE);E=e.mul(S,w),w=e.mul(w,w),L=e.mul(b,w),S=e.cmov(E,S,M),b=e.cmov(L,b,M)}return{isValid:$,value:S}};if(e.ORDER%_6===Sf){const p=(e.ORDER-Sf)/_6,g=e.sqrt(e.neg(t));f=(w,E)=>{let S=e.sqr(E);const v=e.mul(w,E);S=e.mul(S,v);let b=e.pow(S,p);b=e.mul(b,v);const $=e.mul(b,g),O=e.mul(e.sqr(b),E),k=e.eql(O,w);let L=e.cmov($,b,k);return{isValid:k,value:L}}}return f}function p9(e,t){if(i9(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=XU(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,o,a,c,l,u,d;i=e.sqr(r),i=e.mul(i,t.Z),s=e.sqr(i),s=e.add(s,i),o=e.add(s,e.ONE),o=e.mul(o,t.B),a=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,t.A),s=e.sqr(o),l=e.sqr(a),c=e.mul(l,t.A),s=e.add(s,c),s=e.mul(s,o),l=e.mul(l,a),c=e.mul(l,t.B),s=e.add(s,c),u=e.mul(i,o);const{isValid:h,value:f}=n(s,l);d=e.mul(i,r),d=e.mul(d,f),u=e.cmov(u,o,h),d=e.cmov(d,f,h);const p=e.isOdd(r)===e.isOdd(d);d=e.cmov(e.neg(d),d,p);const g=Wl(e,[a],!0)[0];return u=e.mul(u,g),{x:u,y:d}}}function JU(e){return{hash:e,hmac:(t,...n)=>_f(e,t,rs(...n)),randomBytes:jl}}function O2(e,t){const n=r=>YU({...e,...JU(r)});return{...n(t),create:n}}const QU=hr;function _c(e,t){if(If(e),If(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function eL(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function If(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function tL(e,t,n,r){Ac(e),Ac(t),If(n),t.length>255&&(t=r(rn(i6("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:s}=r,o=Math.ceil(n/i);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=rn(t,_c(t.length,1)),c=_c(0,s),l=_c(n,2),u=new Array(o),d=r(rn(c,e,l,_c(0,1),a));u[0]=r(rn(d,_c(1,1),a));for(let f=1;f<=o;f++){const p=[eL(d,u[f-1]),_c(f+1,1),a];u[f]=r(rn(...p))}return rn(...u).slice(0,n)}function nL(e,t,n,r,i){if(Ac(e),Ac(t),If(n),t.length>255){const s=Math.ceil(2*r/8);t=i.create({dkLen:s}).update(i6("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(_c(n,2)).update(t).update(_c(t.length,1)).digest()}function g9(e,t,n){xf(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:s,hash:o,expand:a,DST:c}=n;Ac(e),If(t);const l=typeof c=="string"?i6(c):c,u=r.toString(2).length,d=Math.ceil((u+i)/8),h=t*s*d;let f;if(a==="xmd")f=tL(e,l,h,o);else if(a==="xof")f=nL(e,l,h,i,o);else if(a==="_internal_pass")f=e;else throw new Error('expand must be "xmd" or "xof"');const p=new Array(t);for(let g=0;g<t;g++){const w=new Array(s);for(let E=0;E<s;E++){const S=d*(E+g*s),v=f.subarray(S,S+d);w[E]=gr(QU(v),r)}p[g]=w}return p}function m9(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,i)=>{const[s,o,a,c]=n.map(d=>d.reduce((h,f)=>e.add(e.mul(h,r),f))),[l,u]=Wl(e,[o,c],!0);return r=e.mul(s,l),i=e.mul(i,e.mul(a,u)),{x:r,y:i}}}function y9(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");function r(s){return e.fromAffine(t(s))}function i(s){const o=s.clearCofactor();return o.equals(e.ZERO)?e.ZERO:(o.assertValidity(),o)}return{defaults:n,hashToCurve(s,o){const a=g9(s,2,{...n,DST:n.DST,...o}),c=r(a[0]),l=r(a[1]);return i(c.add(l))},encodeToCurve(s,o){const a=g9(s,1,{...n,DST:n.encodeDST,...o});return i(r(a[0]))},mapToCurve(s){if(!Array.isArray(s))throw new Error("expected array of bigints");for(const o of s)if(typeof o!="bigint")throw new Error("expected array of bigints");return i(r(s))}}}const w9=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),b9=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),rL=BigInt(0),iL=BigInt(1),I6=BigInt(2),v9=(e,t)=>(e+t/I6)/t;function sL(e){const t=w9,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,d=$i(u,n,t)*u%t,h=$i(d,n,t)*u%t,f=$i(h,I6,t)*l%t,p=$i(f,i,t)*f%t,g=$i(p,s,t)*p%t,w=$i(g,a,t)*g%t,E=$i(w,c,t)*w%t,S=$i(E,a,t)*g%t,v=$i(S,n,t)*u%t,b=$i(v,o,t)*p%t,$=$i(b,r,t)*l%t,O=$i($,I6,t);if(!$6.eql($6.sqr(O),e))throw new Error("Cannot find square root");return O}const $6=xc(w9,void 0,void 0,{sqrt:sL}),oL=O2({a:rL,b:BigInt(7),Fp:$6,n:b9,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=b9,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-iL*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=v9(s*e,t),c=v9(-r*e,t);let l=gr(e-a*n-c*i,t),u=gr(-a*r-c*s,t);const d=l>o,h=u>o;if(d&&(l=t-l),h&&(u=t-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Ii);function aL(e){if(e.length!==130&&e.length!==132)throw new lL({signature:e});const t=BigInt(_a(e,0,32)),n=BigInt(_a(e,32,64)),r=(()=>{const i=+`0x${e.slice(130)}`;if(!Number.isNaN(i))try{return cL(i)}catch{throw new uL({value:i})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function cL(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new dL({value:e})}class lL extends kt{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Sa(f6(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class uL extends kt{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class dL extends kt{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}Object.freeze({1:0n,2:1n,3:2n,4:3n,5:4n,6:5n,7:6n,8:7n,9:8n,A:9n,B:10n,C:11n,D:12n,E:13n,F:14n,G:15n,H:16n,J:17n,K:18n,L:19n,M:20n,N:21n,P:22n,Q:23n,R:24n,S:25n,T:26n,U:27n,V:28n,W:29n,X:30n,Y:31n,Z:32n,a:33n,b:34n,c:35n,d:36n,e:37n,f:38n,g:39n,h:40n,i:41n,j:42n,k:43n,m:44n,n:45n,o:46n,p:47n,q:48n,r:49n,s:50n,t:51n,u:52n,v:53n,w:54n,x:55n,y:56n,z:57n}),Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)]),{...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t]))},Ea.slice();const fL=BigInt(0),R2=BigInt(1),E9=BigInt(2),Sd=BigInt(3);function hL(e){const t=[];for(;e>R2;e>>=R2)(e&R2)===fL?t.unshift(0):(e&Sd)===Sd?(t.unshift(-1),e+=R2):t.unshift(1);return t}function pL(e){const{Fp:t,Fr:n,Fp2:r,Fp6:i,Fp12:s}=e.fields,o=e.params.xNegative,a=e.params.twistType,c=S6({n:n.ORDER,...e.G1}),l=Object.assign(c,y9(c.ProjectivePoint,e.G1.mapToCurve,{...e.htfDefaults,...e.G1.htfDefaults})),u=S6({n:n.ORDER,...e.G2}),d=Object.assign(u,y9(u.ProjectivePoint,e.G2.mapToCurve,{...e.htfDefaults,...e.G2.htfDefaults}));let h;if(a==="multiplicative")h=(G,K,W,te,ne,me)=>s.mul014(te,G,r.mul(K,ne),r.mul(W,me));else if(a==="divisive")h=(G,K,W,te,ne,me)=>s.mul034(te,r.mul(W,me),r.mul(K,ne),G);else throw new Error("bls: unknown twist type");const f=r.div(r.ONE,r.mul(r.ONE,E9));function p(G,K,W,te){const ne=r.sqr(W),me=r.sqr(te),oe=r.mulByB(r.mul(me,Sd)),de=r.mul(oe,Sd),$e=r.sub(r.sub(r.sqr(r.add(W,te)),me),ne),Pe=r.sub(oe,ne),Oe=r.mul(r.sqr(K),Sd),Ye=r.neg($e);return G.push([Pe,Oe,Ye]),K=r.mul(r.mul(r.mul(r.sub(ne,de),K),W),f),W=r.sub(r.sqr(r.mul(r.add(ne,de),f)),r.mul(r.sqr(oe),Sd)),te=r.mul(ne,$e),{Rx:K,Ry:W,Rz:te}}function g(G,K,W,te,ne,me){const oe=r.sub(W,r.mul(me,te)),de=r.sub(K,r.mul(ne,te)),$e=r.sub(r.mul(oe,ne),r.mul(de,me)),Pe=r.neg(oe),Oe=de;G.push([$e,Pe,Oe]);const Ye=r.sqr(de),rt=r.mul(Ye,de),Kn=r.mul(Ye,K),Ml=r.add(r.sub(rt,r.mul(Kn,E9)),r.mul(r.sqr(oe),te));return K=r.mul(de,Ml),W=r.sub(r.mul(r.sub(Kn,Ml),oe),r.mul(rt,W)),te=r.mul(te,rt),{Rx:K,Ry:W,Rz:te}}const w=hL(e.params.ateLoopSize),E=c6(G=>{const K=G,{x:W,y:te}=K.toAffine(),ne=W,me=te,oe=r.neg(te);let de=ne,$e=me,Pe=r.ONE;const Oe=[];for(const Ye of w){const rt=[];({Rx:de,Ry:$e,Rz:Pe}=p(rt,de,$e,Pe)),Ye&&({Rx:de,Ry:$e,Rz:Pe}=g(rt,de,$e,Pe,ne,Ye===-1?oe:me)),Oe.push(rt)}if(e.postPrecompute){const Ye=Oe[Oe.length-1];e.postPrecompute(de,$e,Pe,ne,me,g.bind(null,Ye))}return Oe});function S(G,K=!1){let W=s.ONE;if(G.length){const te=G[0][0].length;for(let ne=0;ne<te;ne++){W=s.sqr(W);for(const[me,oe,de]of G)for(const[$e,Pe,Oe]of me[ne])W=h($e,Pe,Oe,W,oe,de)}}return o&&(W=s.conjugate(W)),K?s.finalExponentiate(W):W}function v(G,K=!0){const W=[];l.ProjectivePoint.normalizeZ(G.map(({g1:te})=>te)),d.ProjectivePoint.normalizeZ(G.map(({g2:te})=>te));for(const{g1:te,g2:ne}of G){if(te.equals(l.ProjectivePoint.ZERO)||ne.equals(d.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");te.assertValidity(),ne.assertValidity();const me=te.toAffine();W.push([E(ne),me.x,me.y])}return S(W,K)}function b(G,K,W=!0){return v([{g1:G,g2:K}],W)}const $={randomPrivateKey:()=>{const G=w6(n.ORDER);return a9(e.randomBytes(G),n.ORDER)},calcPairingPrecomputes:E},{ShortSignature:O}=e.G1,{Signature:k}=e.G2;function L(G){return G instanceof l.ProjectivePoint?G:l.ProjectivePoint.fromHex(G)}function M(G,K){return G instanceof l.ProjectivePoint?G:l.hashToCurve(Jn("point",G),K)}function z(G){return G instanceof d.ProjectivePoint?G:k.fromHex(G)}function H(G,K){return G instanceof d.ProjectivePoint?G:d.hashToCurve(Jn("point",G),K)}function I(G){return l.ProjectivePoint.fromPrivateKey(G).toRawBytes(!0)}function x(G){return d.ProjectivePoint.fromPrivateKey(G).toRawBytes(!0)}function T(G,K,W){const te=H(G,W);te.assertValidity();const ne=te.multiply(l.normPrivateKeyToScalar(K));return G instanceof d.ProjectivePoint?ne:k.toRawBytes(ne)}function m(G,K,W){const te=M(G,W);te.assertValidity();const ne=te.multiply(l.normPrivateKeyToScalar(K));return G instanceof l.ProjectivePoint?ne:O.toRawBytes(ne)}function y(G,K,W,te){const ne=L(W),me=H(K,te),oe=l.ProjectivePoint.BASE,de=z(G),$e=v([{g1:ne.negate(),g2:me},{g1:oe,g2:de}]);return s.eql($e,s.ONE)}function _(G,K,W,te){const ne=z(W),me=M(K,te),oe=d.ProjectivePoint.BASE,de=L(G),$e=v([{g1:me,g2:ne},{g1:de,g2:oe.negate()}]);return s.eql($e,s.ONE)}function N(G){if(!Array.isArray(G)||G.length===0)throw new Error("expected non-empty array")}function P(G){N(G);const W=G.map(L).reduce((te,ne)=>te.add(ne),l.ProjectivePoint.ZERO);return G[0]instanceof l.ProjectivePoint?(W.assertValidity(),W):W.toRawBytes(!0)}function R(G){N(G);const W=G.map(z).reduce((te,ne)=>te.add(ne),d.ProjectivePoint.ZERO);return G[0]instanceof d.ProjectivePoint?(W.assertValidity(),W):k.toRawBytes(W)}function j(G){N(G);const W=G.map(L).reduce((te,ne)=>te.add(ne),l.ProjectivePoint.ZERO);return G[0]instanceof l.ProjectivePoint?(W.assertValidity(),W):O.toRawBytes(W)}function Z(G,K,W,te){if(N(K),W.length!==K.length)throw new Error("amount of public keys and messages should be equal");const ne=z(G),me=K.map(Pe=>H(Pe,te)),oe=W.map(L),de=new Map;for(let Pe=0;Pe<oe.length;Pe++){const Oe=oe[Pe],Ye=me[Pe];let rt=de.get(Ye);rt===void 0&&(rt=[],de.set(Ye,rt)),rt.push(Oe)}const $e=[];try{for(const[Pe,Oe]of de){const Ye=Oe.reduce((rt,Kn)=>rt.add(Kn));$e.push({g1:Ye,g2:Pe})}return $e.push({g1:l.ProjectivePoint.BASE.negate(),g2:ne}),s.eql(v($e),s.ONE)}catch{return!1}}return l.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:I,getPublicKeyForShortSignatures:x,sign:T,signShortSignature:m,verify:y,verifyBatch:Z,verifyShortSignature:_,aggregatePublicKeys:P,aggregateSignatures:R,aggregateShortSignatures:j,millerLoopBatch:S,pairing:b,pairingBatch:v,G1:l,G2:d,Signature:k,ShortSignature:O,fields:{Fr:n,Fp:t,Fp2:r,Fp6:i,Fp12:s},params:{ateLoopSize:e.params.ateLoopSize,r:e.params.r,G1b:e.G1.b,G2b:e.G2.b},utils:$}}const gL=BigInt(0),Id=BigInt(1),$a=BigInt(2),A9=BigInt(3);function T6(e,t,n,r,i=1,s){const o=BigInt(s===void 0?r:s),a=n**BigInt(r),c=[];for(let l=0;l<i;l++){const u=BigInt(l+1),d=[];for(let h=0,f=Id;h<r;h++){const p=(u*f-u)/o%a;d.push(e.pow(t,p)),f*=n}c.push(d)}return c}function mL(e,t,n){const r=t.pow(n,(e.ORDER-Id)/A9),i=t.pow(n,(e.ORDER-Id)/$a);function s(h,f){const p=t.mul(t.frobeniusMap(h,1),r),g=t.mul(t.frobeniusMap(f,1),i);return[p,g]}const o=t.pow(n,(e.ORDER**$a-Id)/A9),a=t.pow(n,(e.ORDER**$a-Id)/$a);if(!t.eql(a,t.neg(t.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function c(h,f){return[t.mul(h,o),t.neg(f)]}const l=h=>(f,p)=>{const g=p.toAffine(),w=h(g.x,g.y);return f.fromAffine({x:w[0],y:w[1]})},u=l(s),d=l(c);return{psi:s,psi2:c,G2psi:u,G2psi2:d,PSI_X:r,PSI_Y:i,PSI2_X:o,PSI2_Y:a}}function yL(e){const{ORDER:t}=e,n=xc(t),r=n.create(e.NONRESIDUE||BigInt(-1)),i=n.div(n.ONE,$a),s=T6(n,r,n.ORDER,2)[0],o=({c0:I,c1:x},{c0:T,c1:m})=>({c0:n.add(I,T),c1:n.add(x,m)}),a=({c0:I,c1:x},{c0:T,c1:m})=>({c0:n.sub(I,T),c1:n.sub(x,m)}),c=({c0:I,c1:x},T)=>{if(typeof T=="bigint")return{c0:n.mul(I,T),c1:n.mul(x,T)};const{c0:m,c1:y}=T;let _=n.mul(I,m),N=n.mul(x,y);const P=n.sub(_,N),R=n.sub(n.mul(n.add(I,x),n.add(m,y)),n.add(_,N));return{c0:P,c1:R}},l=({c0:I,c1:x})=>{const T=n.add(I,x),m=n.sub(I,x),y=n.add(I,I);return{c0:n.mul(T,m),c1:n.mul(y,x)}},u=I=>{if(I.length!==2)throw new Error("invalid tuple");const x=I.map(T=>n.create(T));return{c0:x[0],c1:x[1]}},d=t*t,h=u(e.FP2_NONRESIDUE),f={ORDER:d,isLE:n.isLE,NONRESIDUE:h,BITS:Af(d),BYTES:Math.ceil(Af(d)/8),MASK:Vl(Af(d)),ZERO:{c0:n.ZERO,c1:n.ZERO},ONE:{c0:n.ONE,c1:n.ZERO},create:I=>I,isValid:({c0:I,c1:x})=>typeof I=="bigint"&&typeof x=="bigint",is0:({c0:I,c1:x})=>n.is0(I)&&n.is0(x),eql:({c0:I,c1:x},{c0:T,c1:m})=>n.eql(I,T)&&n.eql(x,m),neg:({c0:I,c1:x})=>({c0:n.neg(I),c1:n.neg(x)}),pow:(I,x)=>N2(f,I,x),invertBatch:I=>Wl(f,I),add:o,sub:a,mul:c,sqr:l,addN:o,subN:a,mulN:c,sqrN:l,div:(I,x)=>f.mul(I,typeof x=="bigint"?n.inv(n.create(x)):f.inv(x)),inv:({c0:I,c1:x})=>{const T=n.inv(n.create(I*I+x*x));return{c0:n.mul(T,n.create(I)),c1:n.mul(T,n.create(-x))}},sqrt:I=>{if(e.Fp2sqrt)return e.Fp2sqrt(I);const{c0:x,c1:T}=I;if(n.is0(T))return P2(n,x)===1?f.create({c0:n.sqrt(x),c1:n.ZERO}):f.create({c0:n.ZERO,c1:n.sqrt(n.div(x,r))});const m=n.sqrt(n.sub(n.sqr(x),n.mul(n.sqr(T),r)));let y=n.mul(n.add(m,x),i);P2(n,y)===-1&&(y=n.sub(y,m));const N=n.sqrt(y),P=f.create({c0:N,c1:n.div(n.mul(T,i),N)});if(!f.eql(f.sqr(P),I))throw new Error("Cannot find square root");const R=P,j=f.neg(R),{re:Z,im:G}=f.reim(R),{re:K,im:W}=f.reim(j);return G>W||G===W&&Z>K?R:j},isOdd:I=>{const{re:x,im:T}=f.reim(I),m=x%$a,y=x===gL,_=T%$a;return BigInt(m||y&&_)==Id},fromBytes(I){if(I.length!==f.BYTES)throw new Error("fromBytes invalid length="+I.length);return{c0:n.fromBytes(I.subarray(0,n.BYTES)),c1:n.fromBytes(I.subarray(n.BYTES))}},toBytes:({c0:I,c1:x})=>rn(n.toBytes(I),n.toBytes(x)),cmov:({c0:I,c1:x},{c0:T,c1:m},y)=>({c0:n.cmov(I,T,y),c1:n.cmov(x,m,y)}),reim:({c0:I,c1:x})=>({re:I,im:x}),mulByNonresidue:({c0:I,c1:x})=>f.mul({c0:I,c1:x},h),mulByB:e.Fp2mulByB,fromBigTuple:u,frobeniusMap:({c0:I,c1:x},T)=>({c0:I,c1:n.mul(x,s[T%2])})},p=({c0:I,c1:x,c2:T},{c0:m,c1:y,c2:_})=>({c0:f.add(I,m),c1:f.add(x,y),c2:f.add(T,_)}),g=({c0:I,c1:x,c2:T},{c0:m,c1:y,c2:_})=>({c0:f.sub(I,m),c1:f.sub(x,y),c2:f.sub(T,_)}),w=({c0:I,c1:x,c2:T},m)=>{if(typeof m=="bigint")return{c0:f.mul(I,m),c1:f.mul(x,m),c2:f.mul(T,m)};const{c0:y,c1:_,c2:N}=m,P=f.mul(I,y),R=f.mul(x,_),j=f.mul(T,N);return{c0:f.add(P,f.mulByNonresidue(f.sub(f.mul(f.add(x,T),f.add(_,N)),f.add(R,j)))),c1:f.add(f.sub(f.mul(f.add(I,x),f.add(y,_)),f.add(P,R)),f.mulByNonresidue(j)),c2:f.sub(f.add(R,f.mul(f.add(I,T),f.add(y,N))),f.add(P,j))}},E=({c0:I,c1:x,c2:T})=>{let m=f.sqr(I),y=f.mul(f.mul(I,x),$a),_=f.mul(f.mul(x,T),$a),N=f.sqr(T);return{c0:f.add(f.mulByNonresidue(_),m),c1:f.add(f.mulByNonresidue(N),y),c2:f.sub(f.sub(f.add(f.add(y,f.sqr(f.add(f.sub(I,x),T))),_),m),N)}},[S,v]=T6(f,h,n.ORDER,6,2,3),b={ORDER:f.ORDER,isLE:f.isLE,BITS:3*f.BITS,BYTES:3*f.BYTES,MASK:Vl(3*f.BITS),ZERO:{c0:f.ZERO,c1:f.ZERO,c2:f.ZERO},ONE:{c0:f.ONE,c1:f.ZERO,c2:f.ZERO},create:I=>I,isValid:({c0:I,c1:x,c2:T})=>f.isValid(I)&&f.isValid(x)&&f.isValid(T),is0:({c0:I,c1:x,c2:T})=>f.is0(I)&&f.is0(x)&&f.is0(T),neg:({c0:I,c1:x,c2:T})=>({c0:f.neg(I),c1:f.neg(x),c2:f.neg(T)}),eql:({c0:I,c1:x,c2:T},{c0:m,c1:y,c2:_})=>f.eql(I,m)&&f.eql(x,y)&&f.eql(T,_),sqrt:FA,div:(I,x)=>b.mul(I,typeof x=="bigint"?n.inv(n.create(x)):b.inv(x)),pow:(I,x)=>N2(b,I,x),invertBatch:I=>Wl(b,I),add:p,sub:g,mul:w,sqr:E,addN:p,subN:g,mulN:w,sqrN:E,inv:({c0:I,c1:x,c2:T})=>{let m=f.sub(f.sqr(I),f.mulByNonresidue(f.mul(T,x))),y=f.sub(f.mulByNonresidue(f.sqr(T)),f.mul(I,x)),_=f.sub(f.sqr(x),f.mul(I,T)),N=f.inv(f.add(f.mulByNonresidue(f.add(f.mul(T,y),f.mul(x,_))),f.mul(I,m)));return{c0:f.mul(N,m),c1:f.mul(N,y),c2:f.mul(N,_)}},fromBytes:I=>{if(I.length!==b.BYTES)throw new Error("fromBytes invalid length="+I.length);return{c0:f.fromBytes(I.subarray(0,f.BYTES)),c1:f.fromBytes(I.subarray(f.BYTES,2*f.BYTES)),c2:f.fromBytes(I.subarray(2*f.BYTES))}},toBytes:({c0:I,c1:x,c2:T})=>rn(f.toBytes(I),f.toBytes(x),f.toBytes(T)),cmov:({c0:I,c1:x,c2:T},{c0:m,c1:y,c2:_},N)=>({c0:f.cmov(I,m,N),c1:f.cmov(x,y,N),c2:f.cmov(T,_,N)}),fromBigSix:I=>{if(!Array.isArray(I)||I.length!==6)throw new Error("invalid Fp6 usage");return{c0:f.fromBigTuple(I.slice(0,2)),c1:f.fromBigTuple(I.slice(2,4)),c2:f.fromBigTuple(I.slice(4,6))}},frobeniusMap:({c0:I,c1:x,c2:T},m)=>({c0:f.frobeniusMap(I,m),c1:f.mul(f.frobeniusMap(x,m),S[m%6]),c2:f.mul(f.frobeniusMap(T,m),v[m%6])}),mulByFp2:({c0:I,c1:x,c2:T},m)=>({c0:f.mul(I,m),c1:f.mul(x,m),c2:f.mul(T,m)}),mulByNonresidue:({c0:I,c1:x,c2:T})=>({c0:f.mulByNonresidue(T),c1:I,c2:x}),mul1:({c0:I,c1:x,c2:T},m)=>({c0:f.mulByNonresidue(f.mul(T,m)),c1:f.mul(I,m),c2:f.mul(x,m)}),mul01({c0:I,c1:x,c2:T},m,y){let _=f.mul(I,m),N=f.mul(x,y);return{c0:f.add(f.mulByNonresidue(f.sub(f.mul(f.add(x,T),y),N)),_),c1:f.sub(f.sub(f.mul(f.add(m,y),f.add(I,x)),_),N),c2:f.add(f.sub(f.mul(f.add(I,T),m),_),N)}}},$=T6(f,h,n.ORDER,12,1,6)[0],O=({c0:I,c1:x},{c0:T,c1:m})=>({c0:b.add(I,T),c1:b.add(x,m)}),k=({c0:I,c1:x},{c0:T,c1:m})=>({c0:b.sub(I,T),c1:b.sub(x,m)}),L=({c0:I,c1:x},T)=>{if(typeof T=="bigint")return{c0:b.mul(I,T),c1:b.mul(x,T)};let{c0:m,c1:y}=T,_=b.mul(I,m),N=b.mul(x,y);return{c0:b.add(_,b.mulByNonresidue(N)),c1:b.sub(b.mul(b.add(I,x),b.add(m,y)),b.add(_,N))}},M=({c0:I,c1:x})=>{let T=b.mul(I,x);return{c0:b.sub(b.sub(b.mul(b.add(b.mulByNonresidue(x),I),b.add(I,x)),T),b.mulByNonresidue(T)),c1:b.add(T,T)}};function z(I,x){const T=f.sqr(I),m=f.sqr(x);return{first:f.add(f.mulByNonresidue(m),T),second:f.sub(f.sub(f.sqr(f.add(I,x)),T),m)}}const H={ORDER:f.ORDER,isLE:b.isLE,BITS:2*b.BITS,BYTES:2*b.BYTES,MASK:Vl(2*b.BITS),ZERO:{c0:b.ZERO,c1:b.ZERO},ONE:{c0:b.ONE,c1:b.ZERO},create:I=>I,isValid:({c0:I,c1:x})=>b.isValid(I)&&b.isValid(x),is0:({c0:I,c1:x})=>b.is0(I)&&b.is0(x),neg:({c0:I,c1:x})=>({c0:b.neg(I),c1:b.neg(x)}),eql:({c0:I,c1:x},{c0:T,c1:m})=>b.eql(I,T)&&b.eql(x,m),sqrt:FA,inv:({c0:I,c1:x})=>{let T=b.inv(b.sub(b.sqr(I),b.mulByNonresidue(b.sqr(x))));return{c0:b.mul(I,T),c1:b.neg(b.mul(x,T))}},div:(I,x)=>H.mul(I,typeof x=="bigint"?n.inv(n.create(x)):H.inv(x)),pow:(I,x)=>N2(H,I,x),invertBatch:I=>Wl(H,I),add:O,sub:k,mul:L,sqr:M,addN:O,subN:k,mulN:L,sqrN:M,fromBytes:I=>{if(I.length!==H.BYTES)throw new Error("fromBytes invalid length="+I.length);return{c0:b.fromBytes(I.subarray(0,b.BYTES)),c1:b.fromBytes(I.subarray(b.BYTES))}},toBytes:({c0:I,c1:x})=>rn(b.toBytes(I),b.toBytes(x)),cmov:({c0:I,c1:x},{c0:T,c1:m},y)=>({c0:b.cmov(I,T,y),c1:b.cmov(x,m,y)}),fromBigTwelve:I=>({c0:b.fromBigSix(I.slice(0,6)),c1:b.fromBigSix(I.slice(6,12))}),frobeniusMap(I,x){const{c0:T,c1:m,c2:y}=b.frobeniusMap(I.c1,x),_=$[x%12];return{c0:b.frobeniusMap(I.c0,x),c1:b.create({c0:f.mul(T,_),c1:f.mul(m,_),c2:f.mul(y,_)})}},mulByFp2:({c0:I,c1:x},T)=>({c0:b.mulByFp2(I,T),c1:b.mulByFp2(x,T)}),conjugate:({c0:I,c1:x})=>({c0:I,c1:b.neg(x)}),mul014:({c0:I,c1:x},T,m,y)=>{let _=b.mul01(I,T,m),N=b.mul1(x,y);return{c0:b.add(b.mulByNonresidue(N),_),c1:b.sub(b.sub(b.mul01(b.add(x,I),T,f.add(m,y)),_),N)}},mul034:({c0:I,c1:x},T,m,y)=>{const _=b.create({c0:f.mul(I.c0,T),c1:f.mul(I.c1,T),c2:f.mul(I.c2,T)}),N=b.mul01(x,m,y),P=b.mul01(b.add(I,x),f.add(T,m),y);return{c0:b.add(b.mulByNonresidue(N),_),c1:b.sub(P,b.add(_,N))}},_cyclotomicSquare:e.Fp12cyclotomicSquare,_cyclotomicExp:e.Fp12cyclotomicExp,finalExponentiate:e.Fp12finalExponentiate};return{Fp:n,Fp2:f,Fp6:b,Fp4Square:z,Fp12:H}}const mr=BigInt(0),k2=BigInt(1),_n=BigInt(2),B2=BigInt(3),$f=BigInt(4),Sc=BigInt("0xd201000000010000"),wL=Af(Sc),{Fp:Re,Fp2:Le,Fp6:N6,Fp4Square:P6,Fp12:dt}=yL({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[k2,k2],Fp2mulByB:({c0:e,c1:t})=>{const n=Re.mul(e,$f),r=Re.mul(t,$f);return{c0:Re.sub(n,r),c1:Re.add(n,r)}},Fp12cyclotomicSquare:({c0:e,c1:t})=>{const{c0:n,c1:r,c2:i}=e,{c0:s,c1:o,c2:a}=t,{first:c,second:l}=P6(n,o),{first:u,second:d}=P6(s,i),{first:h,second:f}=P6(r,a),p=Le.mulByNonresidue(f);return{c0:N6.create({c0:Le.add(Le.mul(Le.sub(c,n),_n),c),c1:Le.add(Le.mul(Le.sub(u,r),_n),u),c2:Le.add(Le.mul(Le.sub(h,i),_n),h)}),c1:N6.create({c0:Le.add(Le.mul(Le.add(p,s),_n),p),c1:Le.add(Le.mul(Le.add(l,o),_n),l),c2:Le.add(Le.mul(Le.add(d,a),_n),d)})}},Fp12cyclotomicExp(e,t){let n=dt.ONE;for(let r=wL-1;r>=0;r--)n=dt._cyclotomicSquare(n),WD(t,r)&&(n=dt.mul(n,e));return n},Fp12finalExponentiate:e=>{const t=Sc,n=dt.div(dt.frobeniusMap(e,6),e),r=dt.mul(dt.frobeniusMap(n,2),n),i=dt.conjugate(dt._cyclotomicExp(r,t)),s=dt.mul(dt.conjugate(dt._cyclotomicSquare(r)),i),o=dt.conjugate(dt._cyclotomicExp(s,t)),a=dt.conjugate(dt._cyclotomicExp(o,t)),c=dt.mul(dt.conjugate(dt._cyclotomicExp(a,t)),dt._cyclotomicSquare(i)),l=dt.conjugate(dt._cyclotomicExp(c,t)),u=dt.frobeniusMap(dt.mul(i,a),2),d=dt.frobeniusMap(dt.mul(o,r),3),h=dt.frobeniusMap(dt.mul(c,dt.conjugate(r)),1),f=dt.mul(dt.mul(l,dt.conjugate(s)),r);return dt.mul(dt.mul(dt.mul(u,d),h),f)}}),x9=xc(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),bL=m9(Le,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(e=>e.map(t=>Le.fromBigTuple(t.map(BigInt))))),vL=m9(Re,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),EL=p9(Le,{A:Le.create({c0:Re.create(mr),c1:Re.create(BigInt(240))}),B:Le.create({c0:Re.create(BigInt(1012)),c1:Re.create(BigInt(1012))}),Z:Le.create({c0:Re.create(BigInt(-2)),c1:Re.create(BigInt(-1))})}),AL=p9(Re,{A:Re.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:Re.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:Re.create(BigInt(11))}),{G2psi:C9,G2psi2:xL}=mL(Re,Le,Le.div(Le.ONE,Le.NONRESIDUE)),O6=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:Re.ORDER,m:2,k:128,expand:"xmd",hash:Ii}),M2=Tf(Re.toBytes(mr),{infinity:!0,compressed:!0});function D2(e){e=e.slice();const t=e[0]&224,n=!!(t>>7&1),r=!!(t>>6&1),i=!!(t>>5&1);return e[0]&=31,{compressed:n,infinity:r,sort:i,value:e}}function Tf(e,t){if(e[0]&224)throw new Error("setMask: non-empty mask");return t.compressed&&(e[0]|=128),t.infinity&&(e[0]|=64),t.sort&&(e[0]|=32),e}function _9(e){e.assertValidity();const t=e.equals(ss.G1.ProjectivePoint.ZERO),{x:n,y:r}=e.toAffine();if(t)return M2.slice();const i=Re.ORDER,s=!!(r*_n/i);return Tf(pn(n,Re.BYTES),{compressed:!0,sort:s})}function S9(e){e.assertValidity();const t=Re.BYTES;if(e.equals(ss.G2.ProjectivePoint.ZERO))return rn(M2,pn(mr,t));const{x:n,y:r}=e.toAffine(),{re:i,im:s}=Le.reim(n),{re:o,im:a}=Le.reim(r),l=!!((a>mr?a*_n:o*_n)/Re.ORDER&k2),u=i;return rn(Tf(pn(s,t),{sort:l,compressed:!0}),pn(u,t))}const ss=pL({fields:{Fp:Re,Fp2:Le,Fp6:N6,Fp12:dt,Fr:x9},G1:{Fp:Re,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:Re.ZERO,b:$f,htfDefaults:{...O6,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(e,t)=>{const n=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),r=new e(Re.mul(t.px,n),t.py,t.pz);return t.multiplyUnsafe(Sc).negate().multiplyUnsafe(Sc).equals(r)},clearCofactor:(e,t)=>t.multiplyUnsafe(Sc).add(t),mapToCurve:e=>{const{x:t,y:n}=AL(Re.create(e[0]));return vL(t,n)},fromBytes:e=>{const{compressed:t,infinity:n,sort:r,value:i}=D2(e);if(i.length===48&&t){const s=Re.ORDER,o=hr(i),a=Re.create(o&Re.MASK);if(n){if(a!==mr)throw new Error("G1: non-empty compressed point at infinity");return{x:mr,y:mr}}const c=Re.add(Re.pow(a,B2),Re.create(ss.params.G1b));let l=Re.sqrt(c);if(!l)throw new Error("invalid compressed G1 point");return l*_n/s!==BigInt(r)&&(l=Re.neg(l)),{x:Re.create(a),y:Re.create(l)}}else if(i.length===96&&!t){const s=hr(i.subarray(0,Re.BYTES)),o=hr(i.subarray(Re.BYTES));if(n){if(s!==mr||o!==mr)throw new Error("G1: non-empty point at infinity");return ss.G1.ProjectivePoint.ZERO.toAffine()}return{x:Re.create(s),y:Re.create(o)}}else throw new Error("invalid point G1, expected 48/96 bytes")},toBytes:(e,t,n)=>{const r=t.equals(e.ZERO),{x:i,y:s}=t.toAffine();if(n){if(r)return M2.slice();const o=Re.ORDER,a=!!(s*_n/o);return Tf(pn(i,Re.BYTES),{compressed:!0,sort:a})}else return r?rn(new Uint8Array([64]),new Uint8Array(2*Re.BYTES-1)):rn(pn(i,Re.BYTES),pn(s,Re.BYTES))},ShortSignature:{fromHex(e){const{infinity:t,sort:n,value:r}=D2(Jn("signatureHex",e,48)),i=Re.ORDER,s=hr(r);if(t)return ss.G1.ProjectivePoint.ZERO;const o=Re.create(s&Re.MASK),a=Re.add(Re.pow(o,B2),Re.create(ss.params.G1b));let c=Re.sqrt(a);if(!c)throw new Error("invalid compressed G1 point");const l=BigInt(n);c*_n/i!==l&&(c=Re.neg(c));const u=ss.G1.ProjectivePoint.fromAffine({x:o,y:c});return u.assertValidity(),u},toRawBytes(e){return _9(e)},toHex(e){return zl(_9(e))}}},G2:{Fp:Le,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a669